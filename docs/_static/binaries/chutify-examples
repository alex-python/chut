#!/usr/bin/env python
import base64, json, types, sys
PY3 = sys.version_info[0] == 3
mods = []
mods.append(('six', 'IiIiVXRpbGl0aWVzIGZvciB3cml0aW5nIGNvZGUgdGhhdCBydW5zIG9uIFB5dGhvbiAyIGFuZCAz\nIiIiCgppbXBvcnQgb3BlcmF0b3IKaW1wb3J0IHN5cwppbXBvcnQgdHlwZXMKCl9fYXV0aG9yX18g\nPSAiQmVuamFtaW4gUGV0ZXJzb24gPGJlbmphbWluQHB5dGhvbi5vcmc+IgpfX3ZlcnNpb25fXyA9\nICIxLjIuMCIKCgojIFRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgb24gUHl0aG9uIDMuClBZMyA9IHN5\ncy52ZXJzaW9uX2luZm9bMF0gPT0gMwoKaWYgUFkzOgogICAgc3RyaW5nX3R5cGVzID0gc3RyLAog\nICAgaW50ZWdlcl90eXBlcyA9IGludCwKICAgIGNsYXNzX3R5cGVzID0gdHlwZSwKICAgIHRleHRf\ndHlwZSA9IHN0cgogICAgYmluYXJ5X3R5cGUgPSBieXRlcwoKICAgIE1BWFNJWkUgPSBzeXMubWF4\nc2l6ZQplbHNlOgogICAgc3RyaW5nX3R5cGVzID0gYmFzZXN0cmluZywKICAgIGludGVnZXJfdHlw\nZXMgPSAoaW50LCBsb25nKQogICAgY2xhc3NfdHlwZXMgPSAodHlwZSwgdHlwZXMuQ2xhc3NUeXBl\nKQogICAgdGV4dF90eXBlID0gdW5pY29kZQogICAgYmluYXJ5X3R5cGUgPSBzdHIKCiAgICBpZiBz\neXMucGxhdGZvcm0gPT0gImphdmEiOgogICAgICAgICMgSnl0aG9uIGFsd2F5cyB1c2VzIDMyIGJp\ndHMuCiAgICAgICAgTUFYU0laRSA9IGludCgoMSA8PCAzMSkgLSAxKQogICAgZWxzZToKICAgICAg\nICAjIEl0J3MgcG9zc2libGUgdG8gaGF2ZSBzaXplb2YobG9uZykgIT0gc2l6ZW9mKFB5X3NzaXpl\nX3QpLgogICAgICAgIGNsYXNzIFgob2JqZWN0KToKICAgICAgICAgICAgZGVmIF9fbGVuX18oc2Vs\nZik6CiAgICAgICAgICAgICAgICByZXR1cm4gMSA8PCAzMQogICAgICAgIHRyeToKICAgICAgICAg\nICAgbGVuKFgoKSkKICAgICAgICBleGNlcHQgT3ZlcmZsb3dFcnJvcjoKICAgICAgICAgICAgIyAz\nMi1iaXQKICAgICAgICAgICAgTUFYU0laRSA9IGludCgoMSA8PCAzMSkgLSAxKQogICAgICAgIGVs\nc2U6CiAgICAgICAgICAgICMgNjQtYml0CiAgICAgICAgICAgIE1BWFNJWkUgPSBpbnQoKDEgPDwg\nNjMpIC0gMSkKICAgICAgICAgICAgZGVsIFgKCgpkZWYgX2FkZF9kb2MoZnVuYywgZG9jKToKICAg\nICIiIkFkZCBkb2N1bWVudGF0aW9uIHRvIGEgZnVuY3Rpb24uIiIiCiAgICBmdW5jLl9fZG9jX18g\nPSBkb2MKCgpkZWYgX2ltcG9ydF9tb2R1bGUobmFtZSk6CiAgICAiIiJJbXBvcnQgbW9kdWxlLCBy\nZXR1cm5pbmcgdGhlIG1vZHVsZSBhZnRlciB0aGUgbGFzdCBkb3QuIiIiCiAgICBfX2ltcG9ydF9f\nKG5hbWUpCiAgICByZXR1cm4gc3lzLm1vZHVsZXNbbmFtZV0KCgpjbGFzcyBfTGF6eURlc2NyKG9i\namVjdCk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUpOgogICAgICAgIHNlbGYubmFtZSA9\nIG5hbWUKCiAgICBkZWYgX19nZXRfXyhzZWxmLCBvYmosIHRwKToKICAgICAgICByZXN1bHQgPSBz\nZWxmLl9yZXNvbHZlKCkKICAgICAgICBzZXRhdHRyKG9iaiwgc2VsZi5uYW1lLCByZXN1bHQpCiAg\nICAgICAgIyBUaGlzIGlzIGEgYml0IHVnbHksIGJ1dCBpdCBhdm9pZHMgcnVubmluZyB0aGlzIGFn\nYWluLgogICAgICAgIGRlbGF0dHIodHAsIHNlbGYubmFtZSkKICAgICAgICByZXR1cm4gcmVzdWx0\nCgoKY2xhc3MgTW92ZWRNb2R1bGUoX0xhenlEZXNjcik6CgogICAgZGVmIF9faW5pdF9fKHNlbGYs\nIG5hbWUsIG9sZCwgbmV3PU5vbmUpOgogICAgICAgIHN1cGVyKE1vdmVkTW9kdWxlLCBzZWxmKS5f\nX2luaXRfXyhuYW1lKQogICAgICAgIGlmIFBZMzoKICAgICAgICAgICAgaWYgbmV3IGlzIE5vbmU6\nCiAgICAgICAgICAgICAgICBuZXcgPSBuYW1lCiAgICAgICAgICAgIHNlbGYubW9kID0gbmV3CiAg\nICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5tb2QgPSBvbGQKCiAgICBkZWYgX3Jlc29sdmUo\nc2VsZik6CiAgICAgICAgcmV0dXJuIF9pbXBvcnRfbW9kdWxlKHNlbGYubW9kKQoKCmNsYXNzIE1v\ndmVkQXR0cmlidXRlKF9MYXp5RGVzY3IpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCBv\nbGRfbW9kLCBuZXdfbW9kLCBvbGRfYXR0cj1Ob25lLCBuZXdfYXR0cj1Ob25lKToKICAgICAgICBz\ndXBlcihNb3ZlZEF0dHJpYnV0ZSwgc2VsZikuX19pbml0X18obmFtZSkKICAgICAgICBpZiBQWTM6\nCiAgICAgICAgICAgIGlmIG5ld19tb2QgaXMgTm9uZToKICAgICAgICAgICAgICAgIG5ld19tb2Qg\nPSBuYW1lCiAgICAgICAgICAgIHNlbGYubW9kID0gbmV3X21vZAogICAgICAgICAgICBpZiBuZXdf\nYXR0ciBpcyBOb25lOgogICAgICAgICAgICAgICAgaWYgb2xkX2F0dHIgaXMgTm9uZToKICAgICAg\nICAgICAgICAgICAgICBuZXdfYXR0ciA9IG5hbWUKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg\nICAgICAgICAgICAgICAgbmV3X2F0dHIgPSBvbGRfYXR0cgogICAgICAgICAgICBzZWxmLmF0dHIg\nPSBuZXdfYXR0cgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYubW9kID0gb2xkX21vZAog\nICAgICAgICAgICBpZiBvbGRfYXR0ciBpcyBOb25lOgogICAgICAgICAgICAgICAgb2xkX2F0dHIg\nPSBuYW1lCiAgICAgICAgICAgIHNlbGYuYXR0ciA9IG9sZF9hdHRyCgogICAgZGVmIF9yZXNvbHZl\nKHNlbGYpOgogICAgICAgIG1vZHVsZSA9IF9pbXBvcnRfbW9kdWxlKHNlbGYubW9kKQogICAgICAg\nIHJldHVybiBnZXRhdHRyKG1vZHVsZSwgc2VsZi5hdHRyKQoKCgpjbGFzcyBfTW92ZWRJdGVtcyh0\neXBlcy5Nb2R1bGVUeXBlKToKICAgICIiIkxhenkgbG9hZGluZyBvZiBtb3ZlZCBvYmplY3RzIiIi\nCgoKX21vdmVkX2F0dHJpYnV0ZXMgPSBbCiAgICBNb3ZlZEF0dHJpYnV0ZSgiY1N0cmluZ0lPIiwg\nImNTdHJpbmdJTyIsICJpbyIsICJTdHJpbmdJTyIpLAogICAgTW92ZWRBdHRyaWJ1dGUoImZpbHRl\nciIsICJpdGVydG9vbHMiLCAiYnVpbHRpbnMiLCAiaWZpbHRlciIsICJmaWx0ZXIiKSwKICAgIE1v\ndmVkQXR0cmlidXRlKCJpbnB1dCIsICJfX2J1aWx0aW5fXyIsICJidWlsdGlucyIsICJyYXdfaW5w\ndXQiLCAiaW5wdXQiKSwKICAgIE1vdmVkQXR0cmlidXRlKCJtYXAiLCAiaXRlcnRvb2xzIiwgImJ1\naWx0aW5zIiwgImltYXAiLCAibWFwIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgicmVsb2FkX21vZHVs\nZSIsICJfX2J1aWx0aW5fXyIsICJpbXAiLCAicmVsb2FkIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgi\ncmVkdWNlIiwgIl9fYnVpbHRpbl9fIiwgImZ1bmN0b29scyIpLAogICAgTW92ZWRBdHRyaWJ1dGUo\nIlN0cmluZ0lPIiwgIlN0cmluZ0lPIiwgImlvIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgieHJhbmdl\nIiwgIl9fYnVpbHRpbl9fIiwgImJ1aWx0aW5zIiwgInhyYW5nZSIsICJyYW5nZSIpLAogICAgTW92\nZWRBdHRyaWJ1dGUoInppcCIsICJpdGVydG9vbHMiLCAiYnVpbHRpbnMiLCAiaXppcCIsICJ6aXAi\nKSwKCiAgICBNb3ZlZE1vZHVsZSgiYnVpbHRpbnMiLCAiX19idWlsdGluX18iKSwKICAgIE1vdmVk\nTW9kdWxlKCJjb25maWdwYXJzZXIiLCAiQ29uZmlnUGFyc2VyIiksCiAgICBNb3ZlZE1vZHVsZSgi\nY29weXJlZyIsICJjb3B5X3JlZyIpLAogICAgTW92ZWRNb2R1bGUoImh0dHBfY29va2llamFyIiwg\nImNvb2tpZWxpYiIsICJodHRwLmNvb2tpZWphciIpLAogICAgTW92ZWRNb2R1bGUoImh0dHBfY29v\na2llcyIsICJDb29raWUiLCAiaHR0cC5jb29raWVzIiksCiAgICBNb3ZlZE1vZHVsZSgiaHRtbF9l\nbnRpdGllcyIsICJodG1sZW50aXR5ZGVmcyIsICJodG1sLmVudGl0aWVzIiksCiAgICBNb3ZlZE1v\nZHVsZSgiaHRtbF9wYXJzZXIiLCAiSFRNTFBhcnNlciIsICJodG1sLnBhcnNlciIpLAogICAgTW92\nZWRNb2R1bGUoImh0dHBfY2xpZW50IiwgImh0dHBsaWIiLCAiaHR0cC5jbGllbnQiKSwKICAgIE1v\ndmVkTW9kdWxlKCJCYXNlSFRUUFNlcnZlciIsICJCYXNlSFRUUFNlcnZlciIsICJodHRwLnNlcnZl\nciIpLAogICAgTW92ZWRNb2R1bGUoIkNHSUhUVFBTZXJ2ZXIiLCAiQ0dJSFRUUFNlcnZlciIsICJo\ndHRwLnNlcnZlciIpLAogICAgTW92ZWRNb2R1bGUoIlNpbXBsZUhUVFBTZXJ2ZXIiLCAiU2ltcGxl\nSFRUUFNlcnZlciIsICJodHRwLnNlcnZlciIpLAogICAgTW92ZWRNb2R1bGUoImNQaWNrbGUiLCAi\nY1BpY2tsZSIsICJwaWNrbGUiKSwKICAgIE1vdmVkTW9kdWxlKCJxdWV1ZSIsICJRdWV1ZSIpLAog\nICAgTW92ZWRNb2R1bGUoInJlcHJsaWIiLCAicmVwciIpLAogICAgTW92ZWRNb2R1bGUoInNvY2tl\ndHNlcnZlciIsICJTb2NrZXRTZXJ2ZXIiKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyIiwgIlRr\naW50ZXIiKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX2RpYWxvZyIsICJEaWFsb2ciLCAidGtp\nbnRlci5kaWFsb2ciKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX2ZpbGVkaWFsb2ciLCAiRmls\nZURpYWxvZyIsICJ0a2ludGVyLmZpbGVkaWFsb2ciKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVy\nX3Njcm9sbGVkdGV4dCIsICJTY3JvbGxlZFRleHQiLCAidGtpbnRlci5zY3JvbGxlZHRleHQiKSwK\nICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX3NpbXBsZWRpYWxvZyIsICJTaW1wbGVEaWFsb2ciLCAi\ndGtpbnRlci5zaW1wbGVkaWFsb2ciKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX3RpeCIsICJU\naXgiLCAidGtpbnRlci50aXgiKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX2NvbnN0YW50cyIs\nICJUa2NvbnN0YW50cyIsICJ0a2ludGVyLmNvbnN0YW50cyIpLAogICAgTW92ZWRNb2R1bGUoInRr\naW50ZXJfZG5kIiwgIlRrZG5kIiwgInRraW50ZXIuZG5kIiksCiAgICBNb3ZlZE1vZHVsZSgidGtp\nbnRlcl9jb2xvcmNob29zZXIiLCAidGtDb2xvckNob29zZXIiLAogICAgICAgICAgICAgICAgInRr\naW50ZXIuY29sb3JjaG9vc2VyIiksCiAgICBNb3ZlZE1vZHVsZSgidGtpbnRlcl9jb21tb25kaWFs\nb2ciLCAidGtDb21tb25EaWFsb2ciLAogICAgICAgICAgICAgICAgInRraW50ZXIuY29tbW9uZGlh\nbG9nIiksCiAgICBNb3ZlZE1vZHVsZSgidGtpbnRlcl90a2ZpbGVkaWFsb2ciLCAidGtGaWxlRGlh\nbG9nIiwgInRraW50ZXIuZmlsZWRpYWxvZyIpLAogICAgTW92ZWRNb2R1bGUoInRraW50ZXJfZm9u\ndCIsICJ0a0ZvbnQiLCAidGtpbnRlci5mb250IiksCiAgICBNb3ZlZE1vZHVsZSgidGtpbnRlcl9t\nZXNzYWdlYm94IiwgInRrTWVzc2FnZUJveCIsICJ0a2ludGVyLm1lc3NhZ2Vib3giKSwKICAgIE1v\ndmVkTW9kdWxlKCJ0a2ludGVyX3Rrc2ltcGxlZGlhbG9nIiwgInRrU2ltcGxlRGlhbG9nIiwKICAg\nICAgICAgICAgICAgICJ0a2ludGVyLnNpbXBsZWRpYWxvZyIpLAogICAgTW92ZWRNb2R1bGUoInVy\nbGxpYl9yb2JvdHBhcnNlciIsICJyb2JvdHBhcnNlciIsICJ1cmxsaWIucm9ib3RwYXJzZXIiKSwK\nICAgIE1vdmVkTW9kdWxlKCJ3aW5yZWciLCAiX3dpbnJlZyIpLApdCmZvciBhdHRyIGluIF9tb3Zl\nZF9hdHRyaWJ1dGVzOgogICAgc2V0YXR0cihfTW92ZWRJdGVtcywgYXR0ci5uYW1lLCBhdHRyKQpk\nZWwgYXR0cgoKbW92ZXMgPSBzeXMubW9kdWxlc1sic2l4Lm1vdmVzIl0gPSBfTW92ZWRJdGVtcygi\nbW92ZXMiKQoKCmRlZiBhZGRfbW92ZShtb3ZlKToKICAgICIiIkFkZCBhbiBpdGVtIHRvIHNpeC5t\nb3Zlcy4iIiIKICAgIHNldGF0dHIoX01vdmVkSXRlbXMsIG1vdmUubmFtZSwgbW92ZSkKCgpkZWYg\ncmVtb3ZlX21vdmUobmFtZSk6CiAgICAiIiJSZW1vdmUgaXRlbSBmcm9tIHNpeC5tb3Zlcy4iIiIK\nICAgIHRyeToKICAgICAgICBkZWxhdHRyKF9Nb3ZlZEl0ZW1zLCBuYW1lKQogICAgZXhjZXB0IEF0\ndHJpYnV0ZUVycm9yOgogICAgICAgIHRyeToKICAgICAgICAgICAgZGVsIG1vdmVzLl9fZGljdF9f\nW25hbWVdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByYWlzZSBBdHRyaWJ1\ndGVFcnJvcigibm8gc3VjaCBtb3ZlLCAlciIgJSAobmFtZSwpKQoKCmlmIFBZMzoKICAgIF9tZXRo\nX2Z1bmMgPSAiX19mdW5jX18iCiAgICBfbWV0aF9zZWxmID0gIl9fc2VsZl9fIgoKICAgIF9mdW5j\nX2NvZGUgPSAiX19jb2RlX18iCiAgICBfZnVuY19kZWZhdWx0cyA9ICJfX2RlZmF1bHRzX18iCgog\nICAgX2l0ZXJrZXlzID0gImtleXMiCiAgICBfaXRlcnZhbHVlcyA9ICJ2YWx1ZXMiCiAgICBfaXRl\ncml0ZW1zID0gIml0ZW1zIgplbHNlOgogICAgX21ldGhfZnVuYyA9ICJpbV9mdW5jIgogICAgX21l\ndGhfc2VsZiA9ICJpbV9zZWxmIgoKICAgIF9mdW5jX2NvZGUgPSAiZnVuY19jb2RlIgogICAgX2Z1\nbmNfZGVmYXVsdHMgPSAiZnVuY19kZWZhdWx0cyIKCiAgICBfaXRlcmtleXMgPSAiaXRlcmtleXMi\nCiAgICBfaXRlcnZhbHVlcyA9ICJpdGVydmFsdWVzIgogICAgX2l0ZXJpdGVtcyA9ICJpdGVyaXRl\nbXMiCgoKdHJ5OgogICAgYWR2YW5jZV9pdGVyYXRvciA9IG5leHQKZXhjZXB0IE5hbWVFcnJvcjoK\nICAgIGRlZiBhZHZhbmNlX2l0ZXJhdG9yKGl0KToKICAgICAgICByZXR1cm4gaXQubmV4dCgpCm5l\neHQgPSBhZHZhbmNlX2l0ZXJhdG9yCgoKaWYgUFkzOgogICAgZGVmIGdldF91bmJvdW5kX2Z1bmN0\naW9uKHVuYm91bmQpOgogICAgICAgIHJldHVybiB1bmJvdW5kCgogICAgSXRlcmF0b3IgPSBvYmpl\nY3QKCiAgICBkZWYgY2FsbGFibGUob2JqKToKICAgICAgICByZXR1cm4gYW55KCJfX2NhbGxfXyIg\naW4ga2xhc3MuX19kaWN0X18gZm9yIGtsYXNzIGluIHR5cGUob2JqKS5fX21yb19fKQplbHNlOgog\nICAgZGVmIGdldF91bmJvdW5kX2Z1bmN0aW9uKHVuYm91bmQpOgogICAgICAgIHJldHVybiB1bmJv\ndW5kLmltX2Z1bmMKCiAgICBjbGFzcyBJdGVyYXRvcihvYmplY3QpOgoKICAgICAgICBkZWYgbmV4\ndChzZWxmKToKICAgICAgICAgICAgcmV0dXJuIHR5cGUoc2VsZikuX19uZXh0X18oc2VsZikKCiAg\nICBjYWxsYWJsZSA9IGNhbGxhYmxlCl9hZGRfZG9jKGdldF91bmJvdW5kX2Z1bmN0aW9uLAogICAg\nICAgICAiIiJHZXQgdGhlIGZ1bmN0aW9uIG91dCBvZiBhIHBvc3NpYmx5IHVuYm91bmQgZnVuY3Rp\nb24iIiIpCgoKZ2V0X21ldGhvZF9mdW5jdGlvbiA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX21ldGhf\nZnVuYykKZ2V0X21ldGhvZF9zZWxmID0gb3BlcmF0b3IuYXR0cmdldHRlcihfbWV0aF9zZWxmKQpn\nZXRfZnVuY3Rpb25fY29kZSA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX2Z1bmNfY29kZSkKZ2V0X2Z1\nbmN0aW9uX2RlZmF1bHRzID0gb3BlcmF0b3IuYXR0cmdldHRlcihfZnVuY19kZWZhdWx0cykKCgpk\nZWYgaXRlcmtleXMoZCk6CiAgICAiIiJSZXR1cm4gYW4gaXRlcmF0b3Igb3ZlciB0aGUga2V5cyBv\nZiBhIGRpY3Rpb25hcnkuIiIiCiAgICByZXR1cm4gaXRlcihnZXRhdHRyKGQsIF9pdGVya2V5cyko\nKSkKCmRlZiBpdGVydmFsdWVzKGQpOgogICAgIiIiUmV0dXJuIGFuIGl0ZXJhdG9yIG92ZXIgdGhl\nIHZhbHVlcyBvZiBhIGRpY3Rpb25hcnkuIiIiCiAgICByZXR1cm4gaXRlcihnZXRhdHRyKGQsIF9p\ndGVydmFsdWVzKSgpKQoKZGVmIGl0ZXJpdGVtcyhkKToKICAgICIiIlJldHVybiBhbiBpdGVyYXRv\nciBvdmVyIHRoZSAoa2V5LCB2YWx1ZSkgcGFpcnMgb2YgYSBkaWN0aW9uYXJ5LiIiIgogICAgcmV0\ndXJuIGl0ZXIoZ2V0YXR0cihkLCBfaXRlcml0ZW1zKSgpKQoKCmlmIFBZMzoKICAgIGRlZiBiKHMp\nOgogICAgICAgIHJldHVybiBzLmVuY29kZSgibGF0aW4tMSIpCiAgICBkZWYgdShzKToKICAgICAg\nICByZXR1cm4gcwogICAgaWYgc3lzLnZlcnNpb25faW5mb1sxXSA8PSAxOgogICAgICAgIGRlZiBp\nbnQyYnl0ZShpKToKICAgICAgICAgICAgcmV0dXJuIGJ5dGVzKChpLCkpCiAgICBlbHNlOgogICAg\nICAgICMgVGhpcyBpcyBhYm91dCAyeCBmYXN0ZXIgdGhhbiB0aGUgaW1wbGVtZW50YXRpb24gYWJv\ndmUgb24gMy4yKwogICAgICAgIGludDJieXRlID0gb3BlcmF0b3IubWV0aG9kY2FsbGVyKCJ0b19i\neXRlcyIsIDEsICJiaWciKQogICAgaW1wb3J0IGlvCiAgICBTdHJpbmdJTyA9IGlvLlN0cmluZ0lP\nCiAgICBCeXRlc0lPID0gaW8uQnl0ZXNJTwplbHNlOgogICAgZGVmIGIocyk6CiAgICAgICAgcmV0\ndXJuIHMKICAgIGRlZiB1KHMpOgogICAgICAgIHJldHVybiB1bmljb2RlKHMsICJ1bmljb2RlX2Vz\nY2FwZSIpCiAgICBpbnQyYnl0ZSA9IGNocgogICAgaW1wb3J0IFN0cmluZ0lPCiAgICBTdHJpbmdJ\nTyA9IEJ5dGVzSU8gPSBTdHJpbmdJTy5TdHJpbmdJTwpfYWRkX2RvYyhiLCAiIiJCeXRlIGxpdGVy\nYWwiIiIpCl9hZGRfZG9jKHUsICIiIlRleHQgbGl0ZXJhbCIiIikKCgppZiBQWTM6CiAgICBpbXBv\ncnQgYnVpbHRpbnMKICAgIGV4ZWNfID0gZ2V0YXR0cihidWlsdGlucywgImV4ZWMiKQoKCiAgICBk\nZWYgcmVyYWlzZSh0cCwgdmFsdWUsIHRiPU5vbmUpOgogICAgICAgIGlmIHZhbHVlLl9fdHJhY2Vi\nYWNrX18gaXMgbm90IHRiOgogICAgICAgICAgICByYWlzZSB2YWx1ZS53aXRoX3RyYWNlYmFjayh0\nYikKICAgICAgICByYWlzZSB2YWx1ZQoKCiAgICBwcmludF8gPSBnZXRhdHRyKGJ1aWx0aW5zLCAi\ncHJpbnQiKQogICAgZGVsIGJ1aWx0aW5zCgplbHNlOgogICAgZGVmIGV4ZWNfKGNvZGUsIGdsb2Jz\nPU5vbmUsIGxvY3M9Tm9uZSk6CiAgICAgICAgIiIiRXhlY3V0ZSBjb2RlIGluIGEgbmFtZXNwYWNl\nLiIiIgogICAgICAgIGlmIGdsb2JzIGlzIE5vbmU6CiAgICAgICAgICAgIGZyYW1lID0gc3lzLl9n\nZXRmcmFtZSgxKQogICAgICAgICAgICBnbG9icyA9IGZyYW1lLmZfZ2xvYmFscwogICAgICAgICAg\nICBpZiBsb2NzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBsb2NzID0gZnJhbWUuZl9sb2NhbHMK\nICAgICAgICAgICAgZGVsIGZyYW1lCiAgICAgICAgZWxpZiBsb2NzIGlzIE5vbmU6CiAgICAgICAg\nICAgIGxvY3MgPSBnbG9icwogICAgICAgIGV4ZWMoIiIiZXhlYyBjb2RlIGluIGdsb2JzLCBsb2Nz\nIiIiKQoKCiAgICBleGVjXygiIiJkZWYgcmVyYWlzZSh0cCwgdmFsdWUsIHRiPU5vbmUpOgogICAg\ncmFpc2UgdHAsIHZhbHVlLCB0YgoiIiIpCgoKICAgIGRlZiBwcmludF8oKmFyZ3MsICoqa3dhcmdz\nKToKICAgICAgICAiIiJUaGUgbmV3LXN0eWxlIHByaW50IGZ1bmN0aW9uLiIiIgogICAgICAgIGZw\nID0ga3dhcmdzLnBvcCgiZmlsZSIsIHN5cy5zdGRvdXQpCiAgICAgICAgaWYgZnAgaXMgTm9uZToK\nICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZGVmIHdyaXRlKGRhdGEpOgogICAgICAgICAgICBp\nZiBub3QgaXNpbnN0YW5jZShkYXRhLCBiYXNlc3RyaW5nKToKICAgICAgICAgICAgICAgIGRhdGEg\nPSBzdHIoZGF0YSkKICAgICAgICAgICAgZnAud3JpdGUoZGF0YSkKICAgICAgICB3YW50X3VuaWNv\nZGUgPSBGYWxzZQogICAgICAgIHNlcCA9IGt3YXJncy5wb3AoInNlcCIsIE5vbmUpCiAgICAgICAg\naWYgc2VwIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNlcCwgdW5pY29k\nZSk6CiAgICAgICAgICAgICAgICB3YW50X3VuaWNvZGUgPSBUcnVlCiAgICAgICAgICAgIGVsaWYg\nbm90IGlzaW5zdGFuY2Uoc2VwLCBzdHIpOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9y\nKCJzZXAgbXVzdCBiZSBOb25lIG9yIGEgc3RyaW5nIikKICAgICAgICBlbmQgPSBrd2FyZ3MucG9w\nKCJlbmQiLCBOb25lKQogICAgICAgIGlmIGVuZCBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYg\naXNpbnN0YW5jZShlbmQsIHVuaWNvZGUpOgogICAgICAgICAgICAgICAgd2FudF91bmljb2RlID0g\nVHJ1ZQogICAgICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKGVuZCwgc3RyKToKICAgICAgICAg\nICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZW5kIG11c3QgYmUgTm9uZSBvciBhIHN0cmluZyIpCiAg\nICAgICAgaWYga3dhcmdzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImludmFsaWQga2V5\nd29yZCBhcmd1bWVudHMgdG8gcHJpbnQoKSIpCiAgICAgICAgaWYgbm90IHdhbnRfdW5pY29kZToK\nICAgICAgICAgICAgZm9yIGFyZyBpbiBhcmdzOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5j\nZShhcmcsIHVuaWNvZGUpOgogICAgICAgICAgICAgICAgICAgIHdhbnRfdW5pY29kZSA9IFRydWUK\nICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGlmIHdhbnRfdW5pY29kZToKICAgICAg\nICAgICAgbmV3bGluZSA9IHVuaWNvZGUoIlxuIikKICAgICAgICAgICAgc3BhY2UgPSB1bmljb2Rl\nKCIgIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBuZXdsaW5lID0gIlxuIgogICAgICAgICAg\nICBzcGFjZSA9ICIgIgogICAgICAgIGlmIHNlcCBpcyBOb25lOgogICAgICAgICAgICBzZXAgPSBz\ncGFjZQogICAgICAgIGlmIGVuZCBpcyBOb25lOgogICAgICAgICAgICBlbmQgPSBuZXdsaW5lCiAg\nICAgICAgZm9yIGksIGFyZyBpbiBlbnVtZXJhdGUoYXJncyk6CiAgICAgICAgICAgIGlmIGk6CiAg\nICAgICAgICAgICAgICB3cml0ZShzZXApCiAgICAgICAgICAgIHdyaXRlKGFyZykKICAgICAgICB3\ncml0ZShlbmQpCgpfYWRkX2RvYyhyZXJhaXNlLCAiIiJSZXJhaXNlIGFuIGV4Y2VwdGlvbi4iIiIp\nCgoKZGVmIHdpdGhfbWV0YWNsYXNzKG1ldGEsIGJhc2U9b2JqZWN0KToKICAgICIiIkNyZWF0ZSBh\nIGJhc2UgY2xhc3Mgd2l0aCBhIG1ldGFjbGFzcy4iIiIKICAgIHJldHVybiBtZXRhKCJOZXdCYXNl\nIiwgKGJhc2UsKSwge30pCg==\n'))
mods.append(('docopt', 'aW1wb3J0IHN5cwppbXBvcnQgcmUKCgpjbGFzcyBEb2NvcHRMYW5ndWFnZUVycm9yKEV4Y2VwdGlv\nbik6CgogICAgIiIiRXJyb3IgaW4gY29uc3RydWN0aW9uIG9mIHVzYWdlLW1lc3NhZ2UgYnkgZGV2\nZWxvcGVyLiIiIgoKCmNsYXNzIERvY29wdEV4aXQoU3lzdGVtRXhpdCk6CgogICAgIiIiRXhpdCBp\nbiBjYXNlIHVzZXIgaW52b2tlZCBwcm9ncmFtIHdpdGggaW5jb3JyZWN0IGFyZ3VtZW50cy4iIiIK\nCiAgICB1c2FnZSA9ICcnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2U9JycpOgogICAg\nICAgIFN5c3RlbUV4aXQuX19pbml0X18oc2VsZiwgKG1lc3NhZ2UgKyAnXG4nICsgc2VsZi51c2Fn\nZSkuc3RyaXAoKSkKCgpjbGFzcyBQYXR0ZXJuKG9iamVjdCk6CgogICAgZGVmIF9fZXFfXyhzZWxm\nLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHJlcHIoc2VsZikgPT0gcmVwcihvdGhlcikKCiAgICBk\nZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2gocmVwcihzZWxmKSkKCiAgICBk\nZWYgZml4KHNlbGYpOgogICAgICAgIHNlbGYuZml4X2lkZW50aXRpZXMoKQogICAgICAgIHNlbGYu\nZml4X2xpc3RfYXJndW1lbnRzKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBmaXhfaWRl\nbnRpdGllcyhzZWxmLCB1bmlxPU5vbmUpOgogICAgICAgICIiIk1ha2UgcGF0dGVybi10cmVlIHRp\ncHMgcG9pbnQgdG8gc2FtZSBvYmplY3QgaWYgdGhleSBhcmUgZXF1YWwuIiIiCiAgICAgICAgaWYg\nbm90IGhhc2F0dHIoc2VsZiwgJ2NoaWxkcmVuJyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmCiAg\nICAgICAgdW5pcSA9IGxpc3Qoc2V0KHNlbGYuZmxhdCkpIGlmIHVuaXEgPT0gTm9uZSBlbHNlIHVu\naXEKICAgICAgICBmb3IgaSwgYyBpbiBlbnVtZXJhdGUoc2VsZi5jaGlsZHJlbik6CiAgICAgICAg\nICAgIGlmIG5vdCBoYXNhdHRyKGMsICdjaGlsZHJlbicpOgogICAgICAgICAgICAgICAgYXNzZXJ0\nIGMgaW4gdW5pcQogICAgICAgICAgICAgICAgc2VsZi5jaGlsZHJlbltpXSA9IHVuaXFbdW5pcS5p\nbmRleChjKV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGMuZml4X2lkZW50aXRp\nZXModW5pcSkKCiAgICBkZWYgZml4X2xpc3RfYXJndW1lbnRzKHNlbGYpOgogICAgICAgICIiIkZp\nbmQgYXJndW1lbnRzIHRoYXQgc2hvdWxkIGFjY3VtdWxhdGUgdmFsdWVzIGFuZCBmaXggdGhlbS4i\nIiIKICAgICAgICBlaXRoZXIgPSBbbGlzdChjLmNoaWxkcmVuKSBmb3IgYyBpbiBzZWxmLmVpdGhl\nci5jaGlsZHJlbl0KICAgICAgICBmb3IgY2FzZSBpbiBlaXRoZXI6CiAgICAgICAgICAgIGZvciBl\nIGluIFtjIGZvciBjIGluIGNhc2UgaWYgY2FzZS5jb3VudChjKSA+IDFdOgogICAgICAgICAgICAg\nICAgaWYgdHlwZShlKSBpcyBBcmd1bWVudCBvciB0eXBlKGUpIGlzIE9wdGlvbiBhbmQgZS5hcmdj\nb3VudDoKICAgICAgICAgICAgICAgICAgICBlLnZhbHVlID0gW10KICAgICAgICAgICAgICAgIGlm\nIHR5cGUoZSkgaXMgQ29tbWFuZCBvciB0eXBlKGUpIGlzIE9wdGlvbiBhbmQgZS5hcmdjb3VudCA9\nPSAwOgogICAgICAgICAgICAgICAgICAgIGUudmFsdWUgPSAwCiAgICAgICAgcmV0dXJuIHNlbGYK\nCiAgICBAcHJvcGVydHkKICAgIGRlZiBlaXRoZXIoc2VsZik6CiAgICAgICAgIiIiVHJhbnNmb3Jt\nIHBhdHRlcm4gaW50byBhbiBlcXVpdmFsZW50LCB3aXRoIG9ubHkgdG9wLWxldmVsIEVpdGhlci4i\nIiIKICAgICAgICAjIEN1cnJlbnRseSB0aGUgcGF0dGVybiB3aWxsIG5vdCBiZSBlcXVpdmFsZW50\nLCBidXQgbW9yZSAibmFycm93IiwKICAgICAgICAjIGFsdGhvdWdoIGdvb2QgZW5vdWdoIHRvIHJl\nYXNvbiBhYm91dCBsaXN0IGFyZ3VtZW50cy4KICAgICAgICByZXQgPSBbXQogICAgICAgIGdyb3Vw\ncyA9IFtbc2VsZl1dCiAgICAgICAgd2hpbGUgZ3JvdXBzOgogICAgICAgICAgICBjaGlsZHJlbiA9\nIGdyb3Vwcy5wb3AoMCkKICAgICAgICAgICAgdHlwZXMgPSBbdHlwZShjKSBmb3IgYyBpbiBjaGls\nZHJlbl0KICAgICAgICAgICAgaWYgRWl0aGVyIGluIHR5cGVzOgogICAgICAgICAgICAgICAgZWl0\naGVyID0gW2MgZm9yIGMgaW4gY2hpbGRyZW4gaWYgdHlwZShjKSBpcyBFaXRoZXJdWzBdCiAgICAg\nICAgICAgICAgICBjaGlsZHJlbi5wb3AoY2hpbGRyZW4uaW5kZXgoZWl0aGVyKSkKICAgICAgICAg\nICAgICAgIGZvciBjIGluIGVpdGhlci5jaGlsZHJlbjoKICAgICAgICAgICAgICAgICAgICBncm91\ncHMuYXBwZW5kKFtjXSArIGNoaWxkcmVuKQogICAgICAgICAgICBlbGlmIFJlcXVpcmVkIGluIHR5\ncGVzOgogICAgICAgICAgICAgICAgcmVxdWlyZWQgPSBbYyBmb3IgYyBpbiBjaGlsZHJlbiBpZiB0\neXBlKGMpIGlzIFJlcXVpcmVkXVswXQogICAgICAgICAgICAgICAgY2hpbGRyZW4ucG9wKGNoaWxk\ncmVuLmluZGV4KHJlcXVpcmVkKSkKICAgICAgICAgICAgICAgIGdyb3Vwcy5hcHBlbmQobGlzdChy\nZXF1aXJlZC5jaGlsZHJlbikgKyBjaGlsZHJlbikKICAgICAgICAgICAgZWxpZiBPcHRpb25hbCBp\nbiB0eXBlczoKICAgICAgICAgICAgICAgIG9wdGlvbmFsID0gW2MgZm9yIGMgaW4gY2hpbGRyZW4g\naWYgdHlwZShjKSBpcyBPcHRpb25hbF1bMF0KICAgICAgICAgICAgICAgIGNoaWxkcmVuLnBvcChj\naGlsZHJlbi5pbmRleChvcHRpb25hbCkpCiAgICAgICAgICAgICAgICBncm91cHMuYXBwZW5kKGxp\nc3Qob3B0aW9uYWwuY2hpbGRyZW4pICsgY2hpbGRyZW4pCiAgICAgICAgICAgIGVsaWYgT25lT3JN\nb3JlIGluIHR5cGVzOgogICAgICAgICAgICAgICAgb25lb3Jtb3JlID0gW2MgZm9yIGMgaW4gY2hp\nbGRyZW4gaWYgdHlwZShjKSBpcyBPbmVPck1vcmVdWzBdCiAgICAgICAgICAgICAgICBjaGlsZHJl\nbi5wb3AoY2hpbGRyZW4uaW5kZXgob25lb3Jtb3JlKSkKICAgICAgICAgICAgICAgIGdyb3Vwcy5h\ncHBlbmQobGlzdChvbmVvcm1vcmUuY2hpbGRyZW4pICogMiArIGNoaWxkcmVuKQogICAgICAgICAg\nICBlbHNlOgogICAgICAgICAgICAgICAgcmV0LmFwcGVuZChjaGlsZHJlbikKICAgICAgICByZXR1\ncm4gRWl0aGVyKCpbUmVxdWlyZWQoKmUpIGZvciBlIGluIHJldF0pCgoKY2xhc3MgQ2hpbGRQYXR0\nZXJuKFBhdHRlcm4pOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCB2YWx1ZT1Ob25lKToK\nICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbHVlCgogICAg\nZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnJXMoJXIsICVyKScgJSAoc2VsZi5f\nX2NsYXNzX18uX19uYW1lX18sIHNlbGYubmFtZSwgc2VsZi52YWx1ZSkKCiAgICBAcHJvcGVydHkK\nICAgIGRlZiBmbGF0KHNlbGYpOgogICAgICAgIHJldHVybiBbc2VsZl0KCiAgICBkZWYgbWF0Y2go\nc2VsZiwgbGVmdCwgY29sbGVjdGVkPU5vbmUpOgogICAgICAgIGNvbGxlY3RlZCA9IFtdIGlmIGNv\nbGxlY3RlZCBpcyBOb25lIGVsc2UgY29sbGVjdGVkCiAgICAgICAgcG9zLCBtYXRjaCA9IHNlbGYu\nc2luZ2xlX21hdGNoKGxlZnQpCiAgICAgICAgaWYgbWF0Y2ggaXMgTm9uZToKICAgICAgICAgICAg\ncmV0dXJuIEZhbHNlLCBsZWZ0LCBjb2xsZWN0ZWQKICAgICAgICBsZWZ0XyA9IGxlZnRbOnBvc10g\nKyBsZWZ0W3BvcysxOl0KICAgICAgICBzYW1lX25hbWUgPSBbYSBmb3IgYSBpbiBjb2xsZWN0ZWQg\naWYgYS5uYW1lID09IHNlbGYubmFtZV0KICAgICAgICBpZiB0eXBlKHNlbGYudmFsdWUpIGluIChp\nbnQsIGxpc3QpOgogICAgICAgICAgICBpbmNyZW1lbnQgPSAxIGlmIHR5cGUoc2VsZi52YWx1ZSkg\naXMgaW50IGVsc2UgW21hdGNoLnZhbHVlXQogICAgICAgICAgICBpZiBub3Qgc2FtZV9uYW1lOgog\nICAgICAgICAgICAgICAgbWF0Y2gudmFsdWUgPSBpbmNyZW1lbnQKICAgICAgICAgICAgICAgIHJl\ndHVybiBUcnVlLCBsZWZ0XywgY29sbGVjdGVkICsgW21hdGNoXQogICAgICAgICAgICBzYW1lX25h\nbWVbMF0udmFsdWUgKz0gaW5jcmVtZW50CiAgICAgICAgICAgIHJldHVybiBUcnVlLCBsZWZ0Xywg\nY29sbGVjdGVkCiAgICAgICAgcmV0dXJuIFRydWUsIGxlZnRfLCBjb2xsZWN0ZWQgKyBbbWF0Y2hd\nCgoKY2xhc3MgUGFycmVudFBhdHRlcm4oUGF0dGVybik6CgogICAgZGVmIF9faW5pdF9fKHNlbGYs\nICpjaGlsZHJlbik6CiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IGxpc3QoY2hpbGRyZW4pCgogICAg\nZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnJXMoJXMpJyAlIChzZWxmLl9fY2xh\nc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgJy5qb2luKHJlcHIo\nYSkgZm9yIGEgaW4gc2VsZi5jaGlsZHJlbikpCgogICAgQHByb3BlcnR5CiAgICBkZWYgZmxhdChz\nZWxmKToKICAgICAgICByZXR1cm4gc3VtKFtjLmZsYXQgZm9yIGMgaW4gc2VsZi5jaGlsZHJlbl0s\nIFtdKQoKCmNsYXNzIEFyZ3VtZW50KENoaWxkUGF0dGVybik6CgogICAgZGVmIHNpbmdsZV9tYXRj\naChzZWxmLCBsZWZ0KToKICAgICAgICBmb3IgbiwgcCBpbiBlbnVtZXJhdGUobGVmdCk6CiAgICAg\nICAgICAgIGlmIHR5cGUocCkgaXMgQXJndW1lbnQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbiwg\nQXJndW1lbnQoc2VsZi5uYW1lLCBwLnZhbHVlKQogICAgICAgIHJldHVybiBOb25lLCBOb25lCgoK\nY2xhc3MgQ29tbWFuZChBcmd1bWVudCk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIHZh\nbHVlPUZhbHNlKToKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi52YWx1ZSA9\nIHZhbHVlCgogICAgZGVmIHNpbmdsZV9tYXRjaChzZWxmLCBsZWZ0KToKICAgICAgICBmb3Igbiwg\ncCBpbiBlbnVtZXJhdGUobGVmdCk6CiAgICAgICAgICAgIGlmIHR5cGUocCkgaXMgQXJndW1lbnQ6\nCiAgICAgICAgICAgICAgICBpZiBwLnZhbHVlID09IHNlbGYubmFtZToKICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gbiwgQ29tbWFuZChzZWxmLm5hbWUsIFRydWUpCiAgICAgICAgICAgICAgICBl\nbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUK\nCgpjbGFzcyBPcHRpb24oQ2hpbGRQYXR0ZXJuKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc2hv\ncnQ9Tm9uZSwgbG9uZz1Ob25lLCBhcmdjb3VudD0wLCB2YWx1ZT1GYWxzZSk6CiAgICAgICAgYXNz\nZXJ0IGFyZ2NvdW50IGluICgwLCAxKQogICAgICAgIHNlbGYuc2hvcnQsIHNlbGYubG9uZyA9IHNo\nb3J0LCBsb25nCiAgICAgICAgc2VsZi5hcmdjb3VudCwgc2VsZi52YWx1ZSA9IGFyZ2NvdW50LCB2\nYWx1ZQogICAgICAgIHNlbGYudmFsdWUgPSBOb25lIGlmIHZhbHVlID09IEZhbHNlIGFuZCBhcmdj\nb3VudCBlbHNlIHZhbHVlICAjIEhBQ0sKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBwYXJzZShj\nbGFzc18sIG9wdGlvbl9kZXNjcmlwdGlvbik6CiAgICAgICAgc2hvcnQsIGxvbmcsIGFyZ2NvdW50\nLCB2YWx1ZSA9IE5vbmUsIE5vbmUsIDAsIEZhbHNlCiAgICAgICAgb3B0aW9ucywgXywgZGVzY3Jp\ncHRpb24gPSBvcHRpb25fZGVzY3JpcHRpb24uc3RyaXAoKS5wYXJ0aXRpb24oJyAgJykKICAgICAg\nICBvcHRpb25zID0gb3B0aW9ucy5yZXBsYWNlKCcsJywgJyAnKS5yZXBsYWNlKCc9JywgJyAnKQog\nICAgICAgIGZvciBzIGluIG9wdGlvbnMuc3BsaXQoKToKICAgICAgICAgICAgaWYgcy5zdGFydHN3\naXRoKCctLScpOgogICAgICAgICAgICAgICAgbG9uZyA9IHMKICAgICAgICAgICAgZWxpZiBzLnN0\nYXJ0c3dpdGgoJy0nKToKICAgICAgICAgICAgICAgIHNob3J0ID0gcwogICAgICAgICAgICBlbHNl\nOgogICAgICAgICAgICAgICAgYXJnY291bnQgPSAxCiAgICAgICAgaWYgYXJnY291bnQ6CiAgICAg\nICAgICAgIG1hdGNoZWQgPSByZS5maW5kYWxsKCdcW2RlZmF1bHQ6ICguKilcXScsIGRlc2NyaXB0\naW9uLCBmbGFncz1yZS5JKQogICAgICAgICAgICB2YWx1ZSA9IG1hdGNoZWRbMF0gaWYgbWF0Y2hl\nZCBlbHNlIE5vbmUKICAgICAgICByZXR1cm4gY2xhc3NfKHNob3J0LCBsb25nLCBhcmdjb3VudCwg\ndmFsdWUpCgogICAgZGVmIHNpbmdsZV9tYXRjaChzZWxmLCBsZWZ0KToKICAgICAgICBmb3Igbiwg\ncCBpbiBlbnVtZXJhdGUobGVmdCk6CiAgICAgICAgICAgIGlmIHNlbGYubmFtZSA9PSBwLm5hbWU6\nCiAgICAgICAgICAgICAgICByZXR1cm4gbiwgcAogICAgICAgIHJldHVybiBOb25lLCBOb25lCgog\nICAgQHByb3BlcnR5CiAgICBkZWYgbmFtZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5sb25n\nIG9yIHNlbGYuc2hvcnQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICdP\ncHRpb24oJXIsICVyLCAlciwgJXIpJyAlIChzZWxmLnNob3J0LCBzZWxmLmxvbmcsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFyZ2NvdW50LCBzZWxmLnZh\nbHVlKQoKCmNsYXNzIFJlcXVpcmVkKFBhcnJlbnRQYXR0ZXJuKToKCiAgICBkZWYgbWF0Y2goc2Vs\nZiwgbGVmdCwgY29sbGVjdGVkPU5vbmUpOgogICAgICAgIGNvbGxlY3RlZCA9IFtdIGlmIGNvbGxl\nY3RlZCBpcyBOb25lIGVsc2UgY29sbGVjdGVkCiAgICAgICAgbCA9IGxlZnQKICAgICAgICBjID0g\nY29sbGVjdGVkCiAgICAgICAgZm9yIHAgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgbWF0\nY2hlZCwgbCwgYyA9IHAubWF0Y2gobCwgYykKICAgICAgICAgICAgaWYgbm90IG1hdGNoZWQ6CiAg\nICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGxlZnQsIGNvbGxlY3RlZAogICAgICAgIHJldHVy\nbiBUcnVlLCBsLCBjCgoKY2xhc3MgT3B0aW9uYWwoUGFycmVudFBhdHRlcm4pOgoKICAgIGRlZiBt\nYXRjaChzZWxmLCBsZWZ0LCBjb2xsZWN0ZWQ9Tm9uZSk6CiAgICAgICAgY29sbGVjdGVkID0gW10g\naWYgY29sbGVjdGVkIGlzIE5vbmUgZWxzZSBjb2xsZWN0ZWQKICAgICAgICBmb3IgcCBpbiBzZWxm\nLmNoaWxkcmVuOgogICAgICAgICAgICBtLCBsZWZ0LCBjb2xsZWN0ZWQgPSBwLm1hdGNoKGxlZnQs\nIGNvbGxlY3RlZCkKICAgICAgICByZXR1cm4gVHJ1ZSwgbGVmdCwgY29sbGVjdGVkCgoKY2xhc3Mg\nT25lT3JNb3JlKFBhcnJlbnRQYXR0ZXJuKToKCiAgICBkZWYgbWF0Y2goc2VsZiwgbGVmdCwgY29s\nbGVjdGVkPU5vbmUpOgogICAgICAgIGFzc2VydCBsZW4oc2VsZi5jaGlsZHJlbikgPT0gMQogICAg\nICAgIGNvbGxlY3RlZCA9IFtdIGlmIGNvbGxlY3RlZCBpcyBOb25lIGVsc2UgY29sbGVjdGVkCiAg\nICAgICAgbCA9IGxlZnQKICAgICAgICBjID0gY29sbGVjdGVkCiAgICAgICAgbF8gPSBOb25lCiAg\nICAgICAgbWF0Y2hlZCA9IFRydWUKICAgICAgICB0aW1lcyA9IDAKICAgICAgICB3aGlsZSBtYXRj\naGVkOgogICAgICAgICAgICAjIGNvdWxkIGl0IGJlIHRoYXQgc29tZXRoaW5nIGRpZG4ndCBtYXRj\naCBidXQgY2hhbmdlZCBsIG9yIGM/CiAgICAgICAgICAgIG1hdGNoZWQsIGwsIGMgPSBzZWxmLmNo\naWxkcmVuWzBdLm1hdGNoKGwsIGMpCiAgICAgICAgICAgIHRpbWVzICs9IDEgaWYgbWF0Y2hlZCBl\nbHNlIDAKICAgICAgICAgICAgaWYgbF8gPT0gbDoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAg\nICAgICAgIGxfID0gbAogICAgICAgIGlmIHRpbWVzID49IDE6CiAgICAgICAgICAgIHJldHVybiBU\ncnVlLCBsLCBjCiAgICAgICAgcmV0dXJuIEZhbHNlLCBsZWZ0LCBjb2xsZWN0ZWQKCgpjbGFzcyBF\naXRoZXIoUGFycmVudFBhdHRlcm4pOgoKICAgIGRlZiBtYXRjaChzZWxmLCBsZWZ0LCBjb2xsZWN0\nZWQ9Tm9uZSk6CiAgICAgICAgY29sbGVjdGVkID0gW10gaWYgY29sbGVjdGVkIGlzIE5vbmUgZWxz\nZSBjb2xsZWN0ZWQKICAgICAgICBvdXRjb21lcyA9IFtdCiAgICAgICAgZm9yIHAgaW4gc2VsZi5j\naGlsZHJlbjoKICAgICAgICAgICAgbWF0Y2hlZCwgXywgXyA9IG91dGNvbWUgPSBwLm1hdGNoKGxl\nZnQsIGNvbGxlY3RlZCkKICAgICAgICAgICAgaWYgbWF0Y2hlZDoKICAgICAgICAgICAgICAgIG91\ndGNvbWVzLmFwcGVuZChvdXRjb21lKQogICAgICAgIGlmIG91dGNvbWVzOgogICAgICAgICAgICBy\nZXR1cm4gbWluKG91dGNvbWVzLCBrZXk9bGFtYmRhIG91dGNvbWU6IGxlbihvdXRjb21lWzFdKSkK\nICAgICAgICByZXR1cm4gRmFsc2UsIGxlZnQsIGNvbGxlY3RlZAoKCmNsYXNzIFRva2VuU3RyZWFt\nKGxpc3QpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzb3VyY2UsIGVycm9yKToKICAgICAgICBz\nZWxmICs9IHNvdXJjZS5zcGxpdCgpIGlmIGhhc2F0dHIoc291cmNlLCAnc3BsaXQnKSBlbHNlIHNv\ndXJjZQogICAgICAgIHNlbGYuZXJyb3IgPSBlcnJvcgoKICAgIGRlZiBtb3ZlKHNlbGYpOgogICAg\nICAgIHJldHVybiBzZWxmLnBvcCgwKSBpZiBsZW4oc2VsZikgZWxzZSBOb25lCgogICAgZGVmIGN1\ncnJlbnQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGZbMF0gaWYgbGVuKHNlbGYpIGVsc2UgTm9u\nZQoKCmRlZiBwYXJzZV9sb25nKHRva2Vucywgb3B0aW9ucyk6CiAgICByYXcsIGVxLCB2YWx1ZSA9\nIHRva2Vucy5tb3ZlKCkucGFydGl0aW9uKCc9JykKICAgIHZhbHVlID0gTm9uZSBpZiBlcSA9PSB2\nYWx1ZSA9PSAnJyBlbHNlIHZhbHVlCiAgICBvcHQgPSBbbyBmb3IgbyBpbiBvcHRpb25zIGlmIG8u\nbG9uZyBhbmQgby5sb25nID09IHJhd10KICAgIGlmIHRva2Vucy5lcnJvciBpcyBEb2NvcHRFeGl0\nIGFuZCBvcHQgPT0gW106CiAgICAgICAgb3B0ID0gW28gZm9yIG8gaW4gb3B0aW9ucyBpZiBvLmxv\nbmcgYW5kIG8ubG9uZy5zdGFydHN3aXRoKHJhdyldCiAgICBpZiBsZW4ob3B0KSA8IDE6CiAgICAg\nICAgaWYgdG9rZW5zLmVycm9yIGlzIERvY29wdEV4aXQ6CiAgICAgICAgICAgIHJhaXNlIHRva2Vu\ncy5lcnJvcignJXMgaXMgbm90IHJlY29nbml6ZWQnICUgcmF3KQogICAgICAgIGVsc2U6CiAgICAg\nICAgICAgIG8gPSBPcHRpb24oTm9uZSwgcmF3LCAoMSBpZiBlcSA9PSAnPScgZWxzZSAwKSkKICAg\nICAgICAgICAgb3B0aW9ucy5hcHBlbmQobykKICAgICAgICAgICAgcmV0dXJuIFtvXQogICAgaWYg\nbGVuKG9wdCkgPiAxOgogICAgICAgIHJhaXNlIHRva2Vucy5lcnJvcignJXMgaXMgbm90IGEgdW5p\ncXVlIHByZWZpeDogJXM/JyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAocmF3LCAnLCAnLmpv\naW4oJyVzJyAlIG8ubG9uZyBmb3IgbyBpbiBvcHQpKSkKICAgIG8gPSBvcHRbMF0KICAgIG9wdCA9\nIE9wdGlvbihvLnNob3J0LCBvLmxvbmcsIG8uYXJnY291bnQsIG8udmFsdWUpCiAgICBpZiBvcHQu\nYXJnY291bnQgPT0gMToKICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOgogICAgICAgICAgICBpZiB0\nb2tlbnMuY3VycmVudCgpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSB0b2tlbnMuZXJy\nb3IoJyVzIHJlcXVpcmVzIGFyZ3VtZW50JyAlIG9wdC5uYW1lKQogICAgICAgICAgICB2YWx1ZSA9\nIHRva2Vucy5tb3ZlKCkKICAgIGVsaWYgdmFsdWUgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2Ug\ndG9rZW5zLmVycm9yKCclcyBtdXN0IG5vdCBoYXZlIGFuIGFyZ3VtZW50JyAlIG9wdC5uYW1lKQog\nICAgaWYgdG9rZW5zLmVycm9yIGlzIERvY29wdEV4aXQ6CiAgICAgICAgb3B0LnZhbHVlID0gdmFs\ndWUgb3IgVHJ1ZQogICAgZWxzZToKICAgICAgICBvcHQudmFsdWUgPSBOb25lIGlmIHZhbHVlIGVs\nc2UgRmFsc2UKICAgIHJldHVybiBbb3B0XQoKCmRlZiBwYXJzZV9zaG9ydHModG9rZW5zLCBvcHRp\nb25zKToKICAgIHJhdyA9IHRva2Vucy5tb3ZlKClbMTpdCiAgICBwYXJzZWQgPSBbXQogICAgd2hp\nbGUgcmF3ICE9ICcnOgogICAgICAgIG9wdCA9IFtvIGZvciBvIGluIG9wdGlvbnMKICAgICAgICAg\nICAgICAgaWYgby5zaG9ydCBhbmQgby5zaG9ydC5sc3RyaXAoJy0nKS5zdGFydHN3aXRoKHJhd1sw\nXSldCiAgICAgICAgaWYgbGVuKG9wdCkgPiAxOgogICAgICAgICAgICByYWlzZSB0b2tlbnMuZXJy\nb3IoJy0lcyBpcyBzcGVjaWZpZWQgYW1iaWd1b3VzbHkgJWQgdGltZXMnICUKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKHJhd1swXSwgbGVuKG9wdCkpKQogICAgICAgIGlmIGxlbihvcHQp\nIDwgMToKICAgICAgICAgICAgaWYgdG9rZW5zLmVycm9yIGlzIERvY29wdEV4aXQ6CiAgICAgICAg\nICAgICAgICByYWlzZSB0b2tlbnMuZXJyb3IoJy0lcyBpcyBub3QgcmVjb2duaXplZCcgJSByYXdb\nMF0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvID0gT3B0aW9uKCctJyArIHJh\nd1swXSwgTm9uZSkKICAgICAgICAgICAgICAgIG9wdGlvbnMuYXBwZW5kKG8pCiAgICAgICAgICAg\nICAgICBwYXJzZWQuYXBwZW5kKG8pCiAgICAgICAgICAgICAgICByYXcgPSByYXdbMTpdCiAgICAg\nICAgICAgICAgICBjb250aW51ZQogICAgICAgIG8gPSBvcHRbMF0KICAgICAgICBvcHQgPSBPcHRp\nb24oby5zaG9ydCwgby5sb25nLCBvLmFyZ2NvdW50LCBvLnZhbHVlKQogICAgICAgIHJhdyA9IHJh\nd1sxOl0KICAgICAgICBpZiBvcHQuYXJnY291bnQgPT0gMDoKICAgICAgICAgICAgdmFsdWUgPSBU\ncnVlIGlmIHRva2Vucy5lcnJvciBpcyBEb2NvcHRFeGl0IGVsc2UgRmFsc2UKICAgICAgICBlbHNl\nOgogICAgICAgICAgICBpZiByYXcgPT0gJyc6CiAgICAgICAgICAgICAgICBpZiB0b2tlbnMuY3Vy\ncmVudCgpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgdG9rZW5zLmVycm9yKCct\nJXMgcmVxdWlyZXMgYXJndW1lbnQnICUgb3B0LnNob3J0WzBdKQogICAgICAgICAgICAgICAgcmF3\nID0gdG9rZW5zLm1vdmUoKQogICAgICAgICAgICB2YWx1ZSwgcmF3ID0gcmF3LCAnJwogICAgICAg\nIGlmIHRva2Vucy5lcnJvciBpcyBEb2NvcHRFeGl0OgogICAgICAgICAgICBvcHQudmFsdWUgPSB2\nYWx1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdC52YWx1ZSA9IE5vbmUgaWYgdmFsdWUg\nZWxzZSBGYWxzZQogICAgICAgIHBhcnNlZC5hcHBlbmQob3B0KQogICAgcmV0dXJuIHBhcnNlZAoK\nCmRlZiBwYXJzZV9wYXR0ZXJuKHNvdXJjZSwgb3B0aW9ucyk6CiAgICB0b2tlbnMgPSBUb2tlblN0\ncmVhbShyZS5zdWIocicoW1xbXF1cKFwpXHxdfFwuXC5cLiknLCByJyBcMSAnLCBzb3VyY2UpLAog\nICAgICAgICAgICAgICAgICAgICAgICAgRG9jb3B0TGFuZ3VhZ2VFcnJvcikKICAgIHJlc3VsdCA9\nIHBhcnNlX2V4cHIodG9rZW5zLCBvcHRpb25zKQogICAgaWYgdG9rZW5zLmN1cnJlbnQoKSBpcyBu\nb3QgTm9uZToKICAgICAgICByYWlzZSB0b2tlbnMuZXJyb3IoJ3VuZXhwZWN0ZWQgZW5kaW5nOiAl\ncicgJSAnICcuam9pbih0b2tlbnMpKQogICAgcmV0dXJuIFJlcXVpcmVkKCpyZXN1bHQpCgoKZGVm\nIHBhcnNlX2V4cHIodG9rZW5zLCBvcHRpb25zKToKICAgICIiImV4cHIgOjo9IHNlcSAoICd8JyBz\nZXEgKSogOyIiIgogICAgc2VxID0gcGFyc2Vfc2VxKHRva2Vucywgb3B0aW9ucykKICAgIGlmIHRv\na2Vucy5jdXJyZW50KCkgIT0gJ3wnOgogICAgICAgIHJldHVybiBzZXEKICAgIHJlc3VsdCA9IFtS\nZXF1aXJlZCgqc2VxKV0gaWYgbGVuKHNlcSkgPiAxIGVsc2Ugc2VxCiAgICB3aGlsZSB0b2tlbnMu\nY3VycmVudCgpID09ICd8JzoKICAgICAgICB0b2tlbnMubW92ZSgpCiAgICAgICAgc2VxID0gcGFy\nc2Vfc2VxKHRva2Vucywgb3B0aW9ucykKICAgICAgICByZXN1bHQgKz0gW1JlcXVpcmVkKCpzZXEp\nXSBpZiBsZW4oc2VxKSA+IDEgZWxzZSBzZXEKICAgIHJldHVybiBbRWl0aGVyKCpyZXN1bHQpXSBp\nZiBsZW4ocmVzdWx0KSA+IDEgZWxzZSByZXN1bHQKCgpkZWYgcGFyc2Vfc2VxKHRva2Vucywgb3B0\naW9ucyk6CiAgICAiIiJzZXEgOjo9ICggYXRvbSBbICcuLi4nIF0gKSogOyIiIgogICAgcmVzdWx0\nID0gW10KICAgIHdoaWxlIHRva2Vucy5jdXJyZW50KCkgbm90IGluIFtOb25lLCAnXScsICcpJywg\nJ3wnXToKICAgICAgICBhdG9tID0gcGFyc2VfYXRvbSh0b2tlbnMsIG9wdGlvbnMpCiAgICAgICAg\naWYgdG9rZW5zLmN1cnJlbnQoKSA9PSAnLi4uJzoKICAgICAgICAgICAgYXRvbSA9IFtPbmVPck1v\ncmUoKmF0b20pXQogICAgICAgICAgICB0b2tlbnMubW92ZSgpCiAgICAgICAgcmVzdWx0ICs9IGF0\nb20KICAgIHJldHVybiByZXN1bHQKCgpkZWYgcGFyc2VfYXRvbSh0b2tlbnMsIG9wdGlvbnMpOgog\nICAgIiIiYXRvbSA6Oj0gJygnIGV4cHIgJyknIHwgJ1snIGV4cHIgJ10nIHwgJ29wdGlvbnMnCiAg\nICAgICAgICAgICB8IGxvbmcgfCBzaG9ydHMgfCBhcmd1bWVudCB8IGNvbW1hbmQgOwogICAgIiIi\nCiAgICB0b2tlbiA9IHRva2Vucy5jdXJyZW50KCkKICAgIHJlc3VsdCA9IFtdCiAgICBpZiB0b2tl\nbiBpbiAnKFsnOgogICAgICAgIHRva2Vucy5tb3ZlKCkKICAgICAgICBtYXRjaGluZywgcGF0dGVy\nbiA9IHsnKCc6IFsnKScsIFJlcXVpcmVkXSwgJ1snOiBbJ10nLCBPcHRpb25hbF19W3Rva2VuXQog\nICAgICAgIHJlc3VsdCA9IHBhdHRlcm4oKnBhcnNlX2V4cHIodG9rZW5zLCBvcHRpb25zKSkKICAg\nICAgICBpZiB0b2tlbnMubW92ZSgpICE9IG1hdGNoaW5nOgogICAgICAgICAgICByYWlzZSB0b2tl\nbnMuZXJyb3IoInVubWF0Y2hlZCAnJXMnIiAlIHRva2VuKQogICAgICAgIHJldHVybiBbcmVzdWx0\nXQogICAgZWxpZiB0b2tlbiA9PSAnb3B0aW9ucyc6CiAgICAgICAgdG9rZW5zLm1vdmUoKQogICAg\nICAgIHJldHVybiBvcHRpb25zCiAgICBlbGlmIHRva2VuLnN0YXJ0c3dpdGgoJy0tJykgYW5kIHRv\na2VuICE9ICctLSc6CiAgICAgICAgcmV0dXJuIHBhcnNlX2xvbmcodG9rZW5zLCBvcHRpb25zKQog\nICAgZWxpZiB0b2tlbi5zdGFydHN3aXRoKCctJykgYW5kIHRva2VuIG5vdCBpbiAoJy0nLCAnLS0n\nKToKICAgICAgICByZXR1cm4gcGFyc2Vfc2hvcnRzKHRva2Vucywgb3B0aW9ucykKICAgIGVsaWYg\ndG9rZW4uc3RhcnRzd2l0aCgnPCcpIGFuZCB0b2tlbi5lbmRzd2l0aCgnPicpIG9yIHRva2VuLmlz\ndXBwZXIoKToKICAgICAgICByZXR1cm4gW0FyZ3VtZW50KHRva2Vucy5tb3ZlKCkpXQogICAgZWxz\nZToKICAgICAgICByZXR1cm4gW0NvbW1hbmQodG9rZW5zLm1vdmUoKSldCgoKZGVmIHBhcnNlX2Fy\nZ3Yoc291cmNlLCBvcHRpb25zKToKICAgIHRva2VucyA9IFRva2VuU3RyZWFtKHNvdXJjZSwgRG9j\nb3B0RXhpdCkKICAgIHBhcnNlZCA9IFtdCiAgICB3aGlsZSB0b2tlbnMuY3VycmVudCgpIGlzIG5v\ndCBOb25lOgogICAgICAgIGlmIHRva2Vucy5jdXJyZW50KCkgPT0gJy0tJzoKICAgICAgICAgICAg\ncmV0dXJuIHBhcnNlZCArIFtBcmd1bWVudChOb25lLCB2KSBmb3IgdiBpbiB0b2tlbnNdCiAgICAg\nICAgZWxpZiB0b2tlbnMuY3VycmVudCgpLnN0YXJ0c3dpdGgoJy0tJyk6CiAgICAgICAgICAgIHBh\ncnNlZCArPSBwYXJzZV9sb25nKHRva2Vucywgb3B0aW9ucykKICAgICAgICBlbGlmIHRva2Vucy5j\ndXJyZW50KCkuc3RhcnRzd2l0aCgnLScpIGFuZCB0b2tlbnMuY3VycmVudCgpICE9ICctJzoKICAg\nICAgICAgICAgcGFyc2VkICs9IHBhcnNlX3Nob3J0cyh0b2tlbnMsIG9wdGlvbnMpCiAgICAgICAg\nZWxzZToKICAgICAgICAgICAgcGFyc2VkLmFwcGVuZChBcmd1bWVudChOb25lLCB0b2tlbnMubW92\nZSgpKSkKICAgIHJldHVybiBwYXJzZWQKCgpkZWYgcGFyc2VfZG9jX29wdGlvbnMoZG9jKToKICAg\nIHJldHVybiBbT3B0aW9uLnBhcnNlKCctJyArIHMpIGZvciBzIGluIHJlLnNwbGl0KCdeICotfFxu\nICotJywgZG9jKVsxOl1dCgoKZGVmIHByaW50YWJsZV91c2FnZShkb2MpOgogICAgdXNhZ2Vfc3Bs\naXQgPSByZS5zcGxpdChyJyhbVXVdW1NzXVtBYV1bR2ddW0VlXTopJywgZG9jKQogICAgaWYgbGVu\nKHVzYWdlX3NwbGl0KSA8IDM6CiAgICAgICAgcmFpc2UgRG9jb3B0TGFuZ3VhZ2VFcnJvcignInVz\nYWdlOiIgKGNhc2UtaW5zZW5zaXRpdmUpIG5vdCBmb3VuZC4nKQogICAgaWYgbGVuKHVzYWdlX3Nw\nbGl0KSA+IDM6CiAgICAgICAgcmFpc2UgRG9jb3B0TGFuZ3VhZ2VFcnJvcignTW9yZSB0aGFuIG9u\nZSAidXNhZ2U6IiAoY2FzZS1pbnNlbnNpdGl2ZSkuJykKICAgIHJldHVybiByZS5zcGxpdChyJ1xu\nXHMqXG4nLCAnJy5qb2luKHVzYWdlX3NwbGl0WzE6XSkpWzBdLnN0cmlwKCkKCgpkZWYgZm9ybWFs\nX3VzYWdlKHByaW50YWJsZV91c2FnZSk6CiAgICBwdSA9IHByaW50YWJsZV91c2FnZS5zcGxpdCgp\nWzE6XSAgIyBzcGxpdCBhbmQgZHJvcCAidXNhZ2U6IgogICAgcmV0dXJuICcoICcgKyAnICcuam9p\nbignKSB8ICgnIGlmIHMgPT0gcHVbMF0gZWxzZSBzIGZvciBzIGluIHB1WzE6XSkgKyAnICknCgoK\nZGVmIGV4dHJhcyhoZWxwLCB2ZXJzaW9uLCBvcHRpb25zLCBkb2MpOgogICAgaWYgaGVscCBhbmQg\nYW55KChvLm5hbWUgaW4gKCctaCcsICctLWhlbHAnKSkgYW5kIG8udmFsdWUgZm9yIG8gaW4gb3B0\naW9ucyk6CiAgICAgICAgcHJpbnQoZG9jLnN0cmlwKCkpCiAgICAgICAgZXhpdCgpCiAgICBpZiB2\nZXJzaW9uIGFuZCBhbnkoby5uYW1lID09ICctLXZlcnNpb24nIGFuZCBvLnZhbHVlIGZvciBvIGlu\nIG9wdGlvbnMpOgogICAgICAgIHByaW50KHZlcnNpb24pCiAgICAgICAgZXhpdCgpCgoKY2xhc3Mg\nRGljdChkaWN0KToKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJ3slc30n\nICUgJyxcbiAnLmpvaW4oJyVyOiAlcicgJSBpIGZvciBpIGluIHNvcnRlZChzZWxmLml0ZW1zKCkp\nKQoKCmRlZiBkb2NvcHQoZG9jLCBhcmd2PXN5cy5hcmd2WzE6XSwgaGVscD1UcnVlLCB2ZXJzaW9u\nPU5vbmUpOgogICAgRG9jb3B0RXhpdC51c2FnZSA9IHByaW50YWJsZV91c2FnZShkb2MpCiAgICBv\ncHRpb25zID0gcGFyc2VfZG9jX29wdGlvbnMoZG9jKQogICAgcGF0dGVybiA9IHBhcnNlX3BhdHRl\ncm4oZm9ybWFsX3VzYWdlKERvY29wdEV4aXQudXNhZ2UpLCBvcHRpb25zKQogICAgYXJndiA9IHBh\ncnNlX2FyZ3YoYXJndiwgb3B0aW9ucykKICAgIGV4dHJhcyhoZWxwLCB2ZXJzaW9uLCBhcmd2LCBk\nb2MpCiAgICBtYXRjaGVkLCBsZWZ0LCBjb2xsZWN0ZWQgPSBwYXR0ZXJuLmZpeCgpLm1hdGNoKGFy\nZ3YpCiAgICBpZiBtYXRjaGVkIGFuZCBsZWZ0ID09IFtdOiAgIyBiZXR0ZXIgZXJyb3IgbWVzc2Fn\nZSBpZiBsZWZ0PwogICAgICAgIHJldHVybiBEaWN0KChhLm5hbWUsIGEudmFsdWUpIGZvciBhIGlu\nIChwYXR0ZXJuLmZsYXQgKyBvcHRpb25zICsgY29sbGVjdGVkKSkKICAgIHJhaXNlIERvY29wdEV4\naXQoKQo=\n'))
mods.append(('chut', 'ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCB1bmljb2RlX2xpdGVyYWxzCmltcG9ydCBvcwppbXBvcnQg\nc3lzCmltcG9ydCBzaXgKaW1wb3J0IHR5cGVzCmltcG9ydCBsb2dnaW5nCmltcG9ydCBzaHV0aWwK\naW1wb3J0IGZ1bmN0b29scwppbXBvcnQgcG9zaXhwYXRoCmZyb20gc3VicHJvY2VzcyBpbXBvcnQg\nUG9wZW4KZnJvbSBzdWJwcm9jZXNzIGltcG9ydCBQSVBFCmZyb20gc3VicHJvY2VzcyBpbXBvcnQg\nU1RET1VUCmZyb20gY29weSBpbXBvcnQgZGVlcGNvcHkKZnJvbSBjb250ZXh0bGliIGltcG9ydCBj\nb250ZXh0bWFuYWdlcgoKbG9nID0gbG9nZ2luZy5nZXRMb2dnZXIoJ2NodXQnKQoKYWxpYXNlcyA9\nIGRpY3QoCiAgICBpZmNvbmZpZz0nL3NiaW4vaWZjb25maWcnLAogICAgc3Vkbz0nL3Vzci9iaW4v\nc3VkbycsCiAgICBzc2g9J3NzaCcsCiAgKQoKCmRlZiBjb25zb2xlX3NjcmlwdChmdW5jKToKICAg\nIEBmdW5jdG9vbHMud3JhcHMoZnVuYykKICAgIGRlZiB3cmFwcGVyKGFyZ3VtZW50cz1Ob25lKToK\nICAgICAgICBkb2MgPSBnZXRhdHRyKGZ1bmMsICdfX2RvY19fJywgTm9uZSkKICAgICAgICBpZiBk\nb2MgaXMgTm9uZToKICAgICAgICAgICAgZG9jID0gJ1VzYWdlOiAlcHJvZycKICAgICAgICBuYW1l\nID0gZnVuYy5fX25hbWVfXy5yZXBsYWNlKCdfJywgJy0nKQogICAgICAgIGRvYyA9IGRvYy5yZXBs\nYWNlKCclcHJvZycsIG5hbWUpLnN0cmlwKCkKICAgICAgICBkb2MgPSBkb2MucmVwbGFjZSgnXG4g\nICAgJywgJ1xuJykKICAgICAgICAjIHRha2UgY2FyZSBpZiBhIHNjcmlwdCBpcyBjaHV0aWZpZWQK\nICAgICAgICBpZiAnZG9jb3B0JyBub3QgaW4gc3lzLm1vZHVsZXM6CiAgICAgICAgICAgIGltcG9y\ndCBkb2NvcHQKICAgICAgICBlbHNlOgogICAgICAgICAgICBkb2NvcHQgPSBzeXMubW9kdWxlc1sn\nZG9jb3B0J10gIyBOT1FBCiAgICAgICAgaWYgaXNpbnN0YW5jZShhcmd1bWVudHMsIGxpc3QpOgog\nICAgICAgICAgICBhcmd1bWVudHMgPSBkb2NvcHQuZG9jb3B0KGRvYywgYXJncz1hcmd1bWVudHMp\nCiAgICAgICAgICAgIHJldHVybiBmdW5jKGFyZ3VtZW50cykKICAgICAgICBlbHNlOgogICAgICAg\nICAgICBhcmd1bWVudHMgPSBkb2NvcHQuZG9jb3B0KGRvYywgaGVscD1UcnVlKQogICAgICAgICAg\nICBzeXMuZXhpdChmdW5jKGRvY29wdC5kb2NvcHQoZG9jKSkpCiAgICB3cmFwcGVyLmNvbnNvbGVf\nc2NyaXB0ID0gVHJ1ZQogICAgcmV0dXJuIHdyYXBwZXIKCgpkZWYgY2hlY2tfc3VkbygpOgogICAg\nc3VkbyA9IGFsaWFzZXMuZ2V0KCdzdWRvJykKICAgIGlmIG5vdCBvcy5wYXRoLmlzZmlsZShzdWRv\nKToKICAgICAgICByYWlzZSBPU0Vycm9yKCdzdWRvIGlzIG5vdCBpbnN0YWxsZWQnKQogICAgYXJn\ncyA9IFtzdWRvLCAnLXMnLCAnd2hvYW1pJ10KICAgIGt3YXJncyA9IGRpY3Qoc3Rkb3V0PVBJUEUs\nIHN0ZGVycj1TVERPVVQpCiAgICBsb2cuZGVidWcoJ1BvcGVuKCVyLCAqKiVyKScsIGFyZ3MsIGt3\nYXJncykKICAgIHdob2FtaSA9IFBvcGVuKGFyZ3MsIGVudj1lbnYsICoqa3dhcmdzKQogICAgd2hv\nYW1pLndhaXQoKQogICAgd2hvYW1pID0gd2hvYW1pLnN0ZG91dC5yZWFkKCkuc3RyaXAoKQogICAg\naWYgd2hvYW1pICE9ICdyb290JzoKICAgICAgICByYWlzZSBPU0Vycm9yKCdOb3QgYWJsZSB0byBy\ndW4gc3VkbycpCgoKY2xhc3MgRW52aXJvbihkaWN0KToKICAgICIiIk1hbmFnZSBvcy5lbnZpcm9u\nIiIiCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHIpOgogICAgICAgIHJldHVybiBzZWxm\nLmdldChhdHRyLnVwcGVyKCksIE5vbmUpCgogICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIGF0dHIs\nIHZhbHVlKToKICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCAobGlzdCwgdHVwbGUpKToKICAg\nICAgICAgICAgdmFsdWUgPSBvcy5wYXRoc2VwLmpvaW4odmFsdWUpCiAgICAgICAgc2VsZlthdHRy\nLnVwcGVyKCldID0gdmFsdWUKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgKiprd2FyZ3MpOgogICAg\nICAgIGVudmlyb24gPSBzZWxmLl9fY2xhc3NfXyhzZWxmLmNvcHkoKSkKICAgICAgICBmb3Igaywg\ndiBpbiBrd2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgc2V0YXR0cihlbnZpcm9uLCBrLCB2KQog\nICAgICAgIHJldHVybiBlbnZpcm9uCgoKY2xhc3MgUGlwZShvYmplY3QpOgogICAgIiIiQSBwaXBl\nIG9iamVjdC4gUmVwcmVzZW50IGEgc2V0IG9mIG9uZSBvciBtb3JlIGNvbW1hbmRzLiIiIgoKICAg\nIF9jaHV0ID0gTm9uZQogICAgX3BpcGUgPSBUcnVlCiAgICBfY21kX2FyZ3MgPSBbXQoKICAgIGRl\nZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuX3N0ZGVyciA9\nIE5vbmUKICAgICAgICBzZWxmLmFyZ3MgPSBsaXN0KGFyZ3MpCiAgICAgICAgc2VsZi5wcmV2aW91\ncyA9IE5vbmUKICAgICAgICBzZWxmLnByb2Nlc3NlcyA9IFtdCiAgICAgICAgc2VsZi5lbmNvZGlu\nZyA9IGt3YXJncy5nZXQoJ2VuY29kaW5nJywgJ3V0ZjgnKQogICAgICAgIHNlbGYua3dhcmdzID0g\na3dhcmdzCiAgICAgICAgaWYgJ3NoJyBpbiBrd2FyZ3M6CiAgICAgICAgICAgIGt3YXJnc1snc2hl\nbGwnXSA9IGt3YXJncy5wb3AoJ3NoJykKICAgICAgICBpZiAnY29tYmluZV9zdGRlcnInIGluIGt3\nYXJnczoKICAgICAgICAgICAga3dhcmdzLnBvcCgnY29tYmluZV9zdGRlcnInKQogICAgICAgICAg\nICBrd2FyZ3NbJ3N0ZGVyciddID0gU1RET1VUCiAgICAgICAgaWYgJ2JpbmFyeScgaW4ga3dhcmdz\nOgogICAgICAgICAgICBzZWxmLl9iaW5hcnkgPSBrd2FyZ3MucG9wKCdiaW5hcnknKQogICAgICAg\nIGlmICdwaXBlJyBpbiBrd2FyZ3M6CiAgICAgICAgICAgIGlmIG5vdCBrd2FyZ3MucG9wKCdwaXBl\nJyk6CiAgICAgICAgICAgICAgICBzZWxmLl9fY2FsbF9fKCkKICAgICAgICBlbGlmIG5vdCBzZWxm\nLl9waXBlOgogICAgICAgICAgICBzZWxmLl9fY2FsbF9fKCkKCiAgICBAcHJvcGVydHkKICAgIGRl\nZiByZXR1cm5jb2RlcyhzZWxmKToKICAgICAgICAiIiJBIGxpc3Qgb2YgcmV0dXJuIGNvZGVzIG9m\nIGFsbCBwcm9jZXNzZXMgbGF1bmNoZWQgYnkgdGhlIHBpcGUiIiIKICAgICAgICBmb3IgcCBpbiBz\nZWxmLnByb2Nlc3NlczoKICAgICAgICAgICAgcC53YWl0KCkKICAgICAgICBjb2RlcyA9IFtwLnBv\nbGwoKSBmb3IgcCBpbiBzZWxmLnByb2Nlc3Nlc10KICAgICAgICBpZiBzZXQoY29kZXMpID09IHNl\ndChbMF0pOgogICAgICAgICAgICByZXR1cm4gW10KICAgICAgICByZXR1cm4gY29kZXMKCiAgICBA\ncHJvcGVydHkKICAgIGRlZiBmYWlsZWQoc2VsZik6CiAgICAgICAgIiIiVHJ1ZSBpZiBvbmUgb3Ig\nbW9yZSBwcm9jZXNzIGZhaWxlZCIiIgogICAgICAgIG91dHB1dCA9IHNlbGYuX19jYWxsX18oKQog\nICAgICAgIHJldHVybiBvdXRwdXQuZmFpbGVkCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3VjY2Vl\nZGVkKHNlbGYpOgogICAgICAgICIiIlRydWUgaWYgYWxsIHByb2Nlc3NlcyBzdWNjZWVkZWQiIiIK\nICAgICAgICBvdXRwdXQgPSBzZWxmLl9fY2FsbF9fKCkKICAgICAgICBpZiBvdXRwdXQuc3VjY2Vl\nZGVkOgogICAgICAgICAgICByZXR1cm4gb3V0cHV0IG9yIFRydWUKICAgICAgICByZXR1cm4gRmFs\nc2UKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzdGRlcnIoc2VsZik6CiAgICAgICAgIiIiY29tYmlu\nZWQgc3RkZXJyIG9mIGFsbCBwcm9jZXNzZXMiIiIKICAgICAgICBpZiBzZWxmLl9zdGRlcnIgaXMg\nTm9uZToKICAgICAgICAgICAgc3RkZXJyID0gW3Auc3RkZXJyLnJlYWQoKSBmb3IgcCBpbiBzZWxm\nLnByb2Nlc3NlcyBpZiBwLnN0ZGVycl0KICAgICAgICAgICAgb3V0cHV0ID0gYidcbicuam9pbihz\ndGRlcnIpLnN0cmlwKCkKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3V0cHV0LCBzaXgu\ndGV4dF90eXBlKToKICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5kZWNvZGUoc2VsZi5l\nbmNvZGluZywgJ2lnbm9yZScpCiAgICAgICAgICAgIHNlbGYuX3N0ZGVyciA9IG91dHB1dAogICAg\nICAgIHJldHVybiBzZWxmLl9zdGRlcnIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb21tYW5kcyhz\nZWxmKToKICAgICAgICBjbWRzID0gW3NlbGZdCiAgICAgICAgcHJldmlvdXMgPSBzZWxmLnByZXZp\nb3VzCiAgICAgICAgd2hpbGUgcHJldmlvdXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGNtZHMu\naW5zZXJ0KDAsIHByZXZpb3VzKQogICAgICAgICAgICBwcmV2aW91cyA9IHByZXZpb3VzLnByZXZp\nb3VzCiAgICAgICAgcmV0dXJuIGNtZHMKCiAgICBkZWYgY29tbWFuZF9saW5lKHNlbGYsIHNoZWxs\nPUZhbHNlKToKICAgICAgICBhcmdzID0gW10KCiAgICAgICAgaWYgc2VsZi5fY21kX2FyZ3M6CiAg\nICAgICAgICAgIGFyZ3MuZXh0ZW5kKHNlbGYuX2NtZF9hcmdzKQoKICAgICAgICBpZiAnc3Vkbycg\naW4gYXJnczoKICAgICAgICAgICAgYXJnc1swOjFdID0gW2FsaWFzZXMuZ2V0KCdzdWRvJyldCgog\nICAgICAgIGJpbmFyeSA9IHNlbGYuX2JpbmFyeQogICAgICAgIGlmIHNlbGYuX2NtZF9hcmdzWzox\nXSA9PSBbJ3NzaCddOgogICAgICAgICAgICBjbWQgPSAnJXMgJXMnICUgKGJpbmFyeSwgJyAnLmpv\naW4oc2VsZi5hcmdzKSkKICAgICAgICAgICAgY21kID0gY21kLnN0cmlwKCkKICAgICAgICAgICAg\naWYgKCd8JyBpbiBjbWQgb3IgJz4nIGluIGNtZCkgYW5kIHNoZWxsOgogICAgICAgICAgICAgICAg\nY21kID0gcmVwcihzdHIoY21kKSkKICAgICAgICAgICAgYXJncy5hcHBlbmQoY21kKQogICAgICAg\nIGVsc2U6CiAgICAgICAgICAgIGFyZ3MuZXh0ZW5kKGJpbmFyeS5zcGxpdCgpKQogICAgICAgICAg\nICBpZiBpc2luc3RhbmNlKHNlbGYuYXJncywgbGlzdCk6CiAgICAgICAgICAgICAgICBmb3IgYSBp\nbiBzZWxmLmFyZ3M6CiAgICAgICAgICAgICAgICAgICAgYXJncy5leHRlbmQoYS5zcGxpdCgpKQog\nICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYXJncy5leHRlbmQoc2VsZi5hcmdzLnNw\nbGl0KCIgIikpCgogICAgICAgIGFyZ3MgPSBbYSBmb3IgYSBpbiBhcmdzIGlmIGFdCgogICAgICAg\nIGlmIHNoZWxsOgogICAgICAgICAgICByZXR1cm4gJyAnLmpvaW4oYXJncykKICAgICAgICByZXR1\ncm4gYXJncwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNvbW1hbmRzX2xpbmUoc2VsZik6CiAgICAg\nICAgY21kcyA9IFtdCiAgICAgICAgZm9yIGNtZCBpbiBzZWxmLmNvbW1hbmRzOgogICAgICAgICAg\nICBpZiBpc2luc3RhbmNlKGNtZCwgU3RkaW4pOgogICAgICAgICAgICAgICAgcyA9ICdzdGRpbicK\nICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKGNtZCwgUHlQaXBlKToKICAgICAgICAgICAgICAg\nIHMgPSAnJXMoKScgJSBjbWQuX19jbGFzc19fLl9fbmFtZV9fCiAgICAgICAgICAgIGVsc2U6CiAg\nICAgICAgICAgICAgICBzID0gY21kLmNvbW1hbmRfbGluZShzaGVsbD1UcnVlKQogICAgICAgICAg\nICBjbWRzLmFwcGVuZChzLnN0cmlwKCkpCiAgICAgICAgcmV0dXJuIHN0cignIHwgJy5qb2luKGNt\nZHMpKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHN0ZG91dChzZWxmKToKICAgICAgICAiIiJzdGFu\nZGFyZCBvdXRwdXQgb2YgdGhlIHBpcGUuIEEgZmlsZSBkZXNjcmlwdG9yIG9yIGFuIGl0ZXJhcm9y\nIiIiCiAgICAgICAgcCA9IE5vbmUKICAgICAgICBzZWxmLnByb2Nlc3NlcyA9IFtdCiAgICAgICAg\nc2VsZi5fc3RkZXJyID0gTm9uZQogICAgICAgIHN0ZGluID0gc3lzLnN0ZGluCiAgICAgICAgY21k\ncyA9IHNlbGYuY29tbWFuZHMKCiAgICAgICAgaWYgW2MgZm9yIGMgaW4gY21kcyBpZiBjLl9jbWRf\nYXJnc1s6MV0gPT0gWydzdWRvJ11dOgogICAgICAgICAgICBjaGVja19zdWRvKCkKCiAgICAgICAg\nZm9yIGNtZCBpbiBjbWRzOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGNtZCwgU3RkaW4pOgog\nICAgICAgICAgICAgICAgc3RkaW4gPSBjbWQuaXRlcl9zdGRvdXQKICAgICAgICAgICAgZWxpZiBp\nc2luc3RhbmNlKGNtZCwgUHlQaXBlKToKICAgICAgICAgICAgICAgIGNtZC5zdGRpbiA9IHAuc3Rk\nb3V0CiAgICAgICAgICAgICAgICBzdGRpbiA9IGNtZC5pdGVyX3N0ZG91dAogICAgICAgICAgICBl\nbHNlOgogICAgICAgICAgICAgICAgYXJncyA9IGNtZC5jb21tYW5kX2xpbmUoY21kLmt3YXJncy5n\nZXQoJ3NoZWxsJywgRmFsc2UpKQoKICAgICAgICAgICAgICAgIGt3YXJncyA9IGRpY3QoCiAgICAg\nICAgICAgICAgICAgICAgc3RkaW49c3RkaW4sIHN0ZGVycj1QSVBFLAogICAgICAgICAgICAgICAg\nICAgIHN0ZG91dD1QSVBFCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAga3dh\ncmdzLnVwZGF0ZShjbWQua3dhcmdzKQogICAgICAgICAgICAgICAgZW52XyA9IGt3YXJncy5wb3Ao\nJ2VudicsIGVudikKCiAgICAgICAgICAgICAgICBsb2cuZGVidWcoJ1BvcGVuKCVyLCAqKiVyKScs\nIGFyZ3MsIGt3YXJncykKCiAgICAgICAgICAgICAgICBrd2FyZ3NbJ2VudiddID0gZW52XwoKICAg\nICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBwID0gUG9wZW4oYXJncywgKipr\nd2FyZ3MpCiAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAg\nICBzZWxmLl9yYWlzZShhcmdzLCBrd2FyZ3MpCgogICAgICAgICAgICAgICAgc2VsZi5wcm9jZXNz\nZXMuYXBwZW5kKHApCiAgICAgICAgICAgICAgICBzdGRpbiA9IHAuc3Rkb3V0CiAgICAgICAgcmV0\ndXJuIHN0ZGluCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGl0ZW0pOgogICAgICAgIGlmIG5v\ndCBpc2luc3RhbmNlKGl0ZW0sIHNsaWNlKToKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoJ1lv\ndSBjYW4gb25seSB1c2Ugc2xpY2VzJykKICAgICAgICBjbWRzID0gc2VsZi5jb21tYW5kcwogICAg\nICAgIGNtZHMgPSBbZGVlcGNvcHkoY21kKSBmb3IgY21kIGluIGNtZHNbaXRlbV1dCiAgICAgICAg\ncmV0dXJuIHNlbGYuX29yZGVyKGNtZHMpWy0xXQoKICAgIGRlZiBfX2dldHNsaWNlX18oc2VsZiwg\nc3RhcnQsIHN0b3ApOgogICAgICAgIGNtZHMgPSBzZWxmLmNvbW1hbmRzCiAgICAgICAgY21kcyA9\nIFtkZWVwY29weShjbWQpIGZvciBjbWQgaW4gY21kc1tzdGFydDpzdG9wXV0KICAgICAgICByZXR1\ncm4gc2VsZi5fb3JkZXIoY21kcylbLTFdCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAg\nIGZvciBsaW5lIGluIHNlbGYuc3Rkb3V0OgogICAgICAgICAgICB5aWVsZCBsaW5lLmRlY29kZShz\nZWxmLmVuY29kaW5nKQoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAg\nZm9yIGNtZCBpbiBzZWxmLmNvbW1hbmRzOgogICAgICAgICAgICBpZiBrd2FyZ3MuZ2V0KCdzaGVs\nbCcpOgogICAgICAgICAgICAgICAgY21kLmt3YXJnc1snc2hlbGwnXSA9IFRydWUKICAgICAgICAg\nICAgaWYga3dhcmdzLmdldCgnY29tYmluZV9zdGRlcnInKToKICAgICAgICAgICAgICAgIGNtZC5r\nd2FyZ3NbJ3N0ZGVyciddID0gU1RET1VUCiAgICAgICAgc3Rkb3V0ID0gc2VsZi5zdGRvdXQKICAg\nICAgICBpZiBzdGRvdXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGhhc2F0dHIoc3Rkb3V0\nLCAncmVhZCcpOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gc3Rkb3V0LnJlYWQoKS5yc3RyaXAo\nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gYicnLmpvaW4obGlz\ndChzdGRvdXQpKS5yc3RyaXAoKQogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdXRwdXQs\nIHNpeC50ZXh0X3R5cGUpOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0LmRlY29kZShz\nZWxmLmVuY29kaW5nKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dHB1dCA9ICcnCiAgICAg\nICAgcmV0dXJuIHNlbGYuX2dldF9zdGRvdXQob3V0cHV0KQoKICAgIF9fc3RyX18gPSBfX2NhbGxf\nXwoKICAgIGRlZiBfX2d0X18oc2VsZiwgZmlsZW5hbWUpOgogICAgICAgIHJldHVybiBzZWxmLl93\ncml0ZShmaWxlbmFtZSwgJ3diKycpCgogICAgZGVmIF9fcnNoaWZ0X18oc2VsZiwgZmlsZW5hbWUp\nOgogICAgICAgIHJldHVybiBzZWxmLl93cml0ZShmaWxlbmFtZSwgJ2FiKycpCgogICAgZGVmIF9f\nb3JfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlci5jb21tYW5kcywg\ncHJvcGVydHkpOgogICAgICAgICAgICBvdGhlciA9IG90aGVyKCkKICAgICAgICBpZiBpc2luc3Rh\nbmNlKHNlbGYsIFN0ZGluKToKICAgICAgICAgICAgZmlyc3QgPSBvdGhlci5jb21tYW5kc1swXQog\nICAgICAgICAgICBmaXJzdC5wcmV2aW91cyA9IHNlbGYKICAgICAgICAgICAgcmV0dXJuIG90aGVy\nCiAgICAgICAgY21kcyA9IGRlZXBjb3B5KHNlbGYuY29tbWFuZHMpICsgZGVlcGNvcHkob3RoZXIu\nY29tbWFuZHMpCiAgICAgICAgY21kcyA9IHNlbGYuX29yZGVyKGNtZHMpCiAgICAgICAgb3RoZXIg\nPSBjbWRzWy0xXQogICAgICAgIHJldHVybiBvdGhlcgoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToK\nICAgICAgICByZXR1cm4gbm90IHNlbGYuZmFpbGVkCiAgICBfX25vbnplcm9fXyA9IF9fYm9vbF9f\nCgogICAgZGVmIF9fZGVlcGNvcHlfXyhzZWxmLCAqYXJncyk6CiAgICAgICAgcmV0dXJuIHNlbGYu\nX19jbGFzc19fKCpzZWxmLmFyZ3MsICoqc2VsZi5rd2FyZ3MpCgogICAgZGVmIF9fcmVwcl9fKHNl\nbGYpOgogICAgICAgIHJldHVybiByZXByKHNlbGYuY29tbWFuZHNfbGluZSkKCiAgICBkZWYgX29y\nZGVyKHNlbGYsIGNtZHMpOgogICAgICAgIGlmIGNtZHM6CiAgICAgICAgICAgIGNtZHNbMF0ucHJl\ndmlvdXMgPSBOb25lCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihjbWRzKSAtIDEsIDAs\nIC0xKToKICAgICAgICAgICAgICAgIGNtZHNbaV0ucHJldmlvdXMgPSBjbWRzW2kgLSAxXQogICAg\nICAgIHJldHVybiBjbWRzCgogICAgZGVmIF93cml0ZShzZWxmLCBmaWxlbmFtZSwgbW9kZSk6CiAg\nICAgICAgd2l0aCBvcGVuKGZpbGVuYW1lLCBtb2RlKSBhcyBmZDoKICAgICAgICAgICAgaWYgbm90\nIGlzaW5zdGFuY2Uoc2VsZiwgUHlQaXBlKToKICAgICAgICAgICAgICAgIHNlbGYua3dhcmdzWydz\ndGRvdXQnXSA9IGZkCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fX2NhbGxfXygpCiAgICAg\nICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBzZWxmLnN0ZG91dDoKICAg\nICAgICAgICAgICAgICAgICBmZC53cml0ZShsaW5lKQogICAgICAgICAgICAgICAgcmV0dXJuIHNl\nbGYuX2dldF9zdGRvdXQoJycpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgX2dldF9zdGRv\ndXQoc2VsZiwgc3Rkb3V0KToKICAgICAgICBpZiBub3Qgc2l4LlBZMyBhbmQgbm90IGlzaW5zdGFu\nY2Uoc3Rkb3V0LCBzaXguYmluYXJ5X3R5cGUpOgogICAgICAgICAgICBzdGRvdXQgPSBzdGRvdXQu\nZW5jb2RlKHNlbGYuZW5jb2RpbmcpCiAgICAgICAgb3V0cHV0ID0gU3Rkb3V0KHN0ZG91dCkKICAg\nICAgICBvdXRwdXQuc3RkZXJyID0gc2VsZi5zdGRlcnIKICAgICAgICBvdXRwdXQucmV0dXJuY29k\nZXMgPSBzZWxmLnJldHVybmNvZGVzCiAgICAgICAgb3V0cHV0LmZhaWxlZCA9IGJvb2wob3V0cHV0\nLnJldHVybmNvZGVzKQogICAgICAgIG91dHB1dC5zdWNjZWVkZWQgPSBub3Qgb3V0cHV0LmZhaWxl\nZAogICAgICAgIHJldHVybiBvdXRwdXQKCiAgICBkZWYgX3JhaXNlKHNlbGYsIGFyZ3MsIGt3YXJn\ncyk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShhcmdzLCBsaXN0KToKICAgICAgICAgICAgYXJncyA9\nICcgJy5qb2luKGFyZ3MpCiAgICAgICAgZW52XyA9IGt3YXJncy5wb3AoJ2VudicpCiAgICAgICAg\nbG9nLmRlYnVnKCdFcnJvciB3aGlsZSBydW5uaW5nIFBvcGVuKCVyLCAqKiVyKScsCiAgICAgICAg\nICAgICAgICAgIGFyZ3MsIGt3YXJncykKICAgICAgICBrd2FyZ3NbJ2VudiddID0gZW52XwogICAg\nICAgIHJhaXNlIE9TRXJyb3IoYXJncykKCgpjbGFzcyBTdGRpbihQaXBlKToKICAgICIiIlVzZWQg\ndG8gaW5qZWN0IHNvbWUgZGF0YSBpbiB0aGUgcGlwZSIiIgoKICAgIHN0ZGVyciA9ICcnCiAgICBy\nZXR1cm5jb2RlcyA9IFtdCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlKToKICAgICAgICBz\ndXBlcihTdGRpbiwgc2VsZikuX19pbml0X18oKQogICAgICAgIHNlbGYudmFsdWUgPSB2YWx1ZQog\nICAgICAgIHNlbGYuX3N0ZGluID0gTm9uZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGl0ZXJfc3Rk\nb3V0KHNlbGYpOgogICAgICAgIGlmIGhhc2F0dHIoc2VsZi52YWx1ZSwgJ3NlZWsnKToKICAgICAg\nICAgICAgc2VsZi52YWx1ZS5zZWVrKDApCiAgICAgICAgaWYgaGFzYXR0cihzZWxmLnZhbHVlLCAn\nZmlsZW5vJyk6CiAgICAgICAgICAgIHIgPSBzZWxmLnZhbHVlCiAgICAgICAgZWxzZToKICAgICAg\nICAgICAgaWYgaGFzYXR0cihzZWxmLnZhbHVlLCAncmVhZCcpOgogICAgICAgICAgICAgICAgdmFs\ndWUgPSBzZWxmLnZhbHVlLnJlYWQoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAg\naWYgbm90IGlzaW5zdGFuY2Uoc2VsZi52YWx1ZSwgc2l4LmJpbmFyeV90eXBlKToKICAgICAgICAg\nICAgICAgICAgICB2YWx1ZSA9IHNpeC5iKHNlbGYudmFsdWUpCiAgICAgICAgICAgICAgICBlbHNl\nOgogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc2VsZi52YWx1ZQogICAgICAgICAgICByLCB3\nID0gb3MucGlwZSgpCiAgICAgICAgICAgIGZkID0gb3MuZmRvcGVuKHcsICd3YicpCiAgICAgICAg\nICAgIGZkLndyaXRlKHZhbHVlKQogICAgICAgICAgICBmZC5jbG9zZSgpCiAgICAgICAgcmV0dXJu\nIHIKCiAgICBkZWYgX19kZWVwY29weV9fKHNlbGYsICphcmdzKToKICAgICAgICByZXR1cm4gc2Vs\nZi5fX2NsYXNzX18oc2VsZi52YWx1ZSkKCiAgICBkZWYgX3dyaXRlKHNlbGYsIGZpbGVuYW1lLCBt\nb2RlKToKICAgICAgICB3aXRoIG9wZW4oZmlsZW5hbWUsIG1vZGUpIGFzIGZkOgogICAgICAgICAg\nICBpZiBoYXNhdHRyKHNlbGYudmFsdWUsICdzZWVrJyk6CiAgICAgICAgICAgICAgICBzZWxmLnZh\nbHVlLnNlZWsoMCkKICAgICAgICAgICAgaWYgaGFzYXR0cihzZWxmLnZhbHVlLCAncmVhZCcpOgog\nICAgICAgICAgICAgICAgc2h1dGlsLmNvcHlmaWxlb2JqKHNlbGYudmFsdWUsIGZkKQogICAgICAg\nICAgICBlbHNlOgogICAgICAgICAgICAgICAgZmQud3JpdGUoc2VsZi52YWx1ZSkKICAgICAgICBy\nZXR1cm4gc2VsZi5fZ2V0X3N0ZG91dCgnJykKCgpjbGFzcyBTdGRvdXQoc3RyKToKICAgICIiIkEg\nc3RyaW5nIHdpdGggZXh0cmEgYXR0cmlidXRlczoKCiAgICAtIHN1Y2NlZWRlZAogICAgLSBmYWls\nZWQKICAgIC0gc3Rkb3V0CiAgICAtIHN0ZGVycgogICAgIiIiCgogICAgQHByb3BlcnR5CiAgICBk\nZWYgc3Rkb3V0KHNlbGYpOgogICAgICAgIHJldHVybiBzdHIoc2VsZikKCgpjbGFzcyBQeVBpcGUo\nUGlwZSk6CgogICAgQHByb3BlcnR5CiAgICBkZWYgaXRlcl9zdGRvdXQoc2VsZik6CiAgICAgICAg\ncmV0dXJuIHNlbGYuZnVuYyhzZWxmLnN0ZGluKQoKICAgIGRlZiBfX2RlZXBjb3B5X18oc2VsZiwg\nKmFyZ3MpOgogICAgICAgIHJldHVybiBjaC53cmFwcyhzZWxmLmZ1bmMpCgoKY2xhc3MgQmFzZShv\nYmplY3QpOgogICAgbm90X3BpcGVkID0gWydybScsICdta2RpcicsICdjcCcsICd0b3VjaCcsICdt\ndicsICdzY3AnLCAncnN5bmMnXQogICAgbm90X3BpcGVkID0gc29ydGVkKFtzdHIoYykgZm9yIGMg\naW4gbm90X3BpcGVkXSkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgKmNtZF9hcmdzKToK\nICAgICAgICBzZWxmLl9fbmFtZV9fID0gbmFtZQogICAgICAgIHNlbGYuX2NtZHMgPSB7fQogICAg\nICAgIHNlbGYuX2NtZF9hcmdzID0gW10KICAgICAgICBpZiBjbWRfYXJnczoKICAgICAgICAgICAg\nc2VsZi5fY21kX2FyZ3MgPSBbbmFtZV0gKyBsaXN0KGNtZF9hcmdzKQoKICAgIGRlZiBzZXRfZGVi\ndWcoc2VsZiwgZW5hYmxlPVRydWUpOgogICAgICAgIGlmIGVuYWJsZToKICAgICAgICAgICAgbG9n\nLnNldExldmVsKGxvZ2dpbmcuREVCVUcpCiAgICAgICAgICAgIGxvZy5hZGRIYW5kbGVyKGxvZ2dp\nbmcuU3RyZWFtSGFuZGxlcihzeXMuc3Rkb3V0KSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBs\nb2cuc2V0TGV2ZWwobG9nZ2luZy5JTkZPKQoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRy\nKToKICAgICAgICBhdHRyID0gc3RyKGF0dHIpCiAgICAgICAgaWYgYXR0ciBub3QgaW4gc2VsZi5f\nY21kczoKICAgICAgICAgICAga3cgPSBkaWN0KF9jaHV0PXNlbGYsCiAgICAgICAgICAgICAgICAg\nICAgICBfYmluYXJ5PXN0cihhbGlhc2VzLmdldChhdHRyLCBhdHRyKSksCiAgICAgICAgICAgICAg\nICAgICAgICBfY21kX2FyZ3M9c2VsZi5fY21kX2FyZ3MsCiAgICAgICAgICAgICAgICAgICAgICBf\ncGlwZT1UcnVlKQogICAgICAgICAgICBpZiBhdHRyIGluIHNlbGYubm90X3BpcGVkOgogICAgICAg\nICAgICAgICAga3dbJ19waXBlJ10gPSBGYWxzZQogICAgICAgICAgICBzZWxmLl9jbWRzW2F0dHJd\nID0gdHlwZShhdHRyLCAoUGlwZSwpLCBrdykKICAgICAgICByZXR1cm4gc2VsZi5fY21kc1thdHRy\nXQoKICAgIF9fZ2V0aXRlbV9fID0gX19nZXRhdHRyX18KCiAgICBkZWYgX19yZXByX18oc2VsZik6\nCiAgICAgICAgcmV0dXJuICc8JXM+JyAlIHNlbGYuX19uYW1lX18KCgpjbGFzcyBDaHV0KEJhc2Up\nOgoKICAgIGRlZiB3cmFwcyhzZWxmLCBmdW5jKToKICAgICAgICByZXR1cm4gdHlwZShmdW5jLl9f\nbmFtZV9fLCAoUHlQaXBlLCksIHsnZnVuYyc6IHN0YXRpY21ldGhvZChmdW5jKX0pKCkKCiAgICBA\nY29udGV4dG1hbmFnZXIKICAgIGRlZiBwaXBlcyhzZWxmLCBjbWQpOgogICAgICAgIHRyeToKICAg\nICAgICAgICAgeWllbGQgY21kCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgaWYgY21kLnJl\ndHVybmNvZGVzOgogICAgICAgICAgICAgICAgc3RkZXJyID0gY21kLnN0ZGVycgogICAgICAgICAg\nICAgICAgbG9nLmVycm9yKCdFcnJvciB3aGlsZSBydW5uaW5nICVyXG4lcycsIGNtZCwgc3RkZXJy\nKQogICAgICAgICAgICAgICAgcmFpc2UgT1NFcnJvcihzdGRlcnIpCgogICAgZGVmIHBpcGUoc2Vs\nZiwgYmluYXJ5LCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHBpcGUgPSBnZXRhdHRyKHNlbGYs\nIGJpbmFyeSkKICAgICAgICByZXR1cm4gcGlwZSgqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIGNk\nKHNlbGYsIGRpcmVjdG9yeSk6CiAgICAgICAgaWYgc2VsZi5fX25hbWVfXyBub3QgaW4gKCdzaCcs\nICdzdWRvJyk6CiAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCdZb3UgY2FuIG9ubHkgcnVu\nIGNkIGluIGxvY2FsIGNvbW1hbmRzJykKICAgICAgICBvcy5jaGRpcihkaXJlY3RvcnkpCgogICAg\nZGVmIHN0ZGluKHNlbGYsIHZhbHVlKToKICAgICAgICByZXR1cm4gU3RkaW4odmFsdWUpCgogICAg\nZGVmIHNzaChzZWxmLCAqYXJncyk6CiAgICAgICAgcmV0dXJuIFNTSCgnc3NoJywgKmFyZ3MpCgoK\nY2xhc3MgQ29tbWFuZChCYXNlKToKICAgICIiIkEgY29tbWFuZCAobGlrZSB0ZXN0KSIiIgoKICAg\nIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKToKICAgICAgICBhdHRyID0gc3RyKGF0dHIpCiAg\nICAgICAgaWYgYXR0ciBub3QgaW4gc2VsZi5fY21kczoKICAgICAgICAgICAgY21kID0gc2VsZi5f\nX25hbWVfXwogICAgICAgICAgICBrdyA9IGRpY3QoX2NodXQ9c2VsZiwKICAgICAgICAgICAgICAg\nICAgICAgIF9iaW5hcnk9JycsCiAgICAgICAgICAgICAgICAgICAgICBfY21kX2FyZ3M9W2NtZCwg\nJy0nICsgYXR0cl0sCiAgICAgICAgICAgICAgICAgICAgICBfcGlwZT1UcnVlKQogICAgICAgICAg\nICBzZWxmLl9jbWRzW2F0dHJdID0gdHlwZShzdHIoY21kKSwgKFBpcGUsKSwga3cpCiAgICAgICAg\ncmV0dXJuIHNlbGYuX2NtZHNbYXR0cl0KCgpjbGFzcyBTU0goQmFzZSk6CiAgICAiIiJBIHNzaCBz\nZXJ2ZXIiIiIKCiAgICBkZWYgam9pbihzZWxmLCAqYXJncyk6CiAgICAgICAgcmV0dXJuICclcyVz\nJyAlIChzZWxmLCBwb3NpeHBhdGguam9pbigqYXJncykpCgogICAgQHByb3BlcnR5CiAgICBkZWYg\naG9zdChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fY21kX2FyZ3NbLTFdCgogICAgZGVmIF9f\nc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuICclczonICUgc2VsZi5ob3N0CgogICAgZGVmIF9f\nY2FsbF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgY21kcyA9IFtdCiAgICAgICAg\nZm9yIGEgaW4gYXJnczoKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShhLCBQaXBlKToKICAgICAg\nICAgICAgICAgIGNtZHMuYXBwZW5kKGEuY29tbWFuZHNfbGluZSkKICAgICAgICAgICAgZWxzZToK\nICAgICAgICAgICAgICAgIGNtZHMuYXBwZW5kKGEpCiAgICAgICAgc3J2ID0gZ2V0YXR0cihTU0go\nYWxpYXNlcy5nZXQoJ3NzaCcpLCAqc2VsZi5fY21kX2FyZ3NbMTpdKSwgJycpCiAgICAgICAgcmV0\ndXJuIHNydigqY21kcywgKiprd2FyZ3MpCgoKY2xhc3MgTW9kdWxlV3JhcHBlcih0eXBlcy5Nb2R1\nbGVUeXBlKToKICAgICIiIndyYXAgY2h1dCBhbmQgYWRkIGV4dHJhIGF0dHJpYnV0ZXMgZnJvbSBj\nbGFzc2VzIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1vZCwgY2h1dCwgbmFtZSk6CiAgICAg\nICAgc2VsZi5fX25hbWVfXyA9IG5hbWUKICAgICAgICBmb3IgYXR0ciBpbiBbIl9fYnVpbHRpbnNf\nXyIsICJfX2RvY19fIiwKICAgICAgICAgICAgICAgICAgICAgIl9fcGFja2FnZV9fIiwgIl9fZmls\nZV9fIl06CiAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgYXR0ciwgZ2V0YXR0cihtb2QsIGF0dHIs\nIE5vbmUpKQogICAgICAgIHNlbGYuX19wYXRoX18gPSBnZXRhdHRyKG1vZCwgJ19fcGF0aF9fJywg\nW10pCiAgICAgICAgc2VsZi5fX3Rlc3RfXyA9IGdldGF0dHIobW9kLCAnX190ZXN0X18nLCB7fSkK\nICAgICAgICBzZWxmLm1vZCA9IG1vZAogICAgICAgIHNlbGYuY2h1dCA9IGNodXQKCiAgICBkZWYg\nX19nZXRhdHRyX18oc2VsZiwgYXR0cik6CiAgICAgICAgaWYgYXR0ciA9PSAnX19hbGxfXyc6CiAg\nICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCdZb3UgY2FudCBpbXBvcnQgdGhpbmdzIHRoYXQg\nZG9lcyBub3QgZXhpc3QnKQogICAgICAgIGlmIGhhc2F0dHIoc2VsZi5tb2QsIGF0dHIpOgogICAg\nICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLm1vZCwgYXR0cikKICAgICAgICBlbHNlOgogICAg\nICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLmNodXQsIGF0dHIpCgogICAgX19nZXRpdGVtX18g\nPSBfX2dldGF0dHJfXwoKCmVudiA9IEVudmlyb24ob3MuZW52aXJvbi5jb3B5KCkpCmNoID0gQ2h1\ndCgnc2gnKQpzdWRvID0gQ2h1dCgnc3VkbycsICctcycpCnRlc3QgPSBDb21tYW5kKCd0ZXN0JykK\nCnRyeToKICAgIGltcG9ydCBmYWJyaWMub3BlcmF0aW9ucwpleGNlcHQgSW1wb3J0RXJyb3I6CiAg\nICBwYXNzCmVsc2U6CiAgICBkZWYgX3J1bl9jb21tYW5kKGNvbW1hbmQsICphcmdzLCAqKmt3YXJn\ncyk6CiAgICAgICAgaWYgaGFzYXR0cihjb21tYW5kLCAnX2NodXQnKToKICAgICAgICAgICAgbmV3\nX2NvbW1hbmQgPSBjb21tYW5kLmNvbW1hbmRzX2xpbmUKICAgICAgICAgICAgaWYgaXNpbnN0YW5j\nZShuZXdfY29tbWFuZCwgcHJvcGVydHkpOgogICAgICAgICAgICAgICAgbmV3X2NvbW1hbmQgPSBj\nb21tYW5kKCkuY29tbWFuZHNfbGluZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5ld19jb21t\nYW5kID0gY29tbWFuZAogICAgICAgIHJldHVybiBmYWJfcnVuX2NvbW1hbmQobmV3X2NvbW1hbmQs\nICphcmdzLCAqKmt3YXJncykKICAgIGZhYl9ydW5fY29tbWFuZCA9IGZhYnJpYy5vcGVyYXRpb25z\nLl9ydW5fY29tbWFuZAogICAgZmFicmljLm9wZXJhdGlvbnMuX3J1bl9jb21tYW5kID0gX3J1bl9j\nb21tYW5kCgoKZGVmIHdyYXBzX21vZHVsZShtb2QpOgogICAgc3lzLm1vZHVsZXNbJ2NodXQnXSA9\nIE1vZHVsZVdyYXBwZXIobW9kLCBjaCwgJ2NodXQnKQogICAgc3lzLm1vZHVsZXNbJ2NodXQuc3Vk\nbyddID0gTW9kdWxlV3JhcHBlcihtb2QsIHN1ZG8sICdzdWRvJykKCmlmIF9fbmFtZV9fICE9ICdf\nX21haW5fXyc6CiAgICBtb2QgPSBzeXMubW9kdWxlc1tfX25hbWVfX10KICAgIHdyYXBzX21vZHVs\nZShtb2QpCg==\n'))
for name, code in mods:
    if PY3:
        if isinstance(code, str):
            code = code.encode('utf-8')
    else:
        name = bytes(name)
    code = base64.decodestring(code)
    mod = types.ModuleType(name)
    globs = dict()
    if PY3:
        if isinstance(code, bytes):
            code = code.decode('utf-8')
        exec(code, globs)
    else:
        exec('exec code in globs')
    mod.__dict__.update(globs)
    if name == 'chut':
        mod.wraps_module(mod)
    else:
        sys.modules[name] = mod

import six
# -*- coding: utf-8 -*-
import chut as sh
__doc__ = """
Generate standalone script from examples
"""


@sh.console_script
def chutify_examples(args):
    sh.env.path = ['/bin', '/usr/bin', 'bin']
    sh.rm('-Rf', 'dist/scripts', 'docs/_static/binaries')()
    sh.mkdir('-p docs/_static/binaries')()
    for mod in sh.ls('chut/examples'):
        mod = mod.strip()
        if mod.startswith('_') or not mod.endswith('.py'):
            continue
        print(sh.chutify('chut.examples.%s' % mod[:-3]))
    sh.mv('dist/scripts/*', 'docs/_static/binaries/', shell=True)()
    print('Generated scripts:')
    print(sh.ls('docs/_static/binaries'))

if __name__ == '__chutified__':
    chutify_examples()
if __name__ == '__main__':
    chutify_examples()
