#!/usr/bin/env python
import base64, json, types, sys
PY3 = sys.version_info[0] == 3
_chut_modules = []
_chut_modules.append(('six', 'IiIiVXRpbGl0aWVzIGZvciB3cml0aW5nIGNvZGUgdGhhdCBydW5zIG9uIFB5dGhvbiAyIGFuZCAz\nIiIiCgppbXBvcnQgb3BlcmF0b3IKaW1wb3J0IHN5cwppbXBvcnQgdHlwZXMKCl9fYXV0aG9yX18g\nPSAiQmVuamFtaW4gUGV0ZXJzb24gPGJlbmphbWluQHB5dGhvbi5vcmc+IgpfX3ZlcnNpb25fXyA9\nICIxLjIuMCIKCgojIFRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgb24gUHl0aG9uIDMuClBZMyA9IHN5\ncy52ZXJzaW9uX2luZm9bMF0gPT0gMwoKaWYgUFkzOgogICAgc3RyaW5nX3R5cGVzID0gc3RyLAog\nICAgaW50ZWdlcl90eXBlcyA9IGludCwKICAgIGNsYXNzX3R5cGVzID0gdHlwZSwKICAgIHRleHRf\ndHlwZSA9IHN0cgogICAgYmluYXJ5X3R5cGUgPSBieXRlcwoKICAgIE1BWFNJWkUgPSBzeXMubWF4\nc2l6ZQplbHNlOgogICAgc3RyaW5nX3R5cGVzID0gYmFzZXN0cmluZywKICAgIGludGVnZXJfdHlw\nZXMgPSAoaW50LCBsb25nKQogICAgY2xhc3NfdHlwZXMgPSAodHlwZSwgdHlwZXMuQ2xhc3NUeXBl\nKQogICAgdGV4dF90eXBlID0gdW5pY29kZQogICAgYmluYXJ5X3R5cGUgPSBzdHIKCiAgICBpZiBz\neXMucGxhdGZvcm0gPT0gImphdmEiOgogICAgICAgICMgSnl0aG9uIGFsd2F5cyB1c2VzIDMyIGJp\ndHMuCiAgICAgICAgTUFYU0laRSA9IGludCgoMSA8PCAzMSkgLSAxKQogICAgZWxzZToKICAgICAg\nICAjIEl0J3MgcG9zc2libGUgdG8gaGF2ZSBzaXplb2YobG9uZykgIT0gc2l6ZW9mKFB5X3NzaXpl\nX3QpLgogICAgICAgIGNsYXNzIFgob2JqZWN0KToKICAgICAgICAgICAgZGVmIF9fbGVuX18oc2Vs\nZik6CiAgICAgICAgICAgICAgICByZXR1cm4gMSA8PCAzMQogICAgICAgIHRyeToKICAgICAgICAg\nICAgbGVuKFgoKSkKICAgICAgICBleGNlcHQgT3ZlcmZsb3dFcnJvcjoKICAgICAgICAgICAgIyAz\nMi1iaXQKICAgICAgICAgICAgTUFYU0laRSA9IGludCgoMSA8PCAzMSkgLSAxKQogICAgICAgIGVs\nc2U6CiAgICAgICAgICAgICMgNjQtYml0CiAgICAgICAgICAgIE1BWFNJWkUgPSBpbnQoKDEgPDwg\nNjMpIC0gMSkKICAgICAgICAgICAgZGVsIFgKCgpkZWYgX2FkZF9kb2MoZnVuYywgZG9jKToKICAg\nICIiIkFkZCBkb2N1bWVudGF0aW9uIHRvIGEgZnVuY3Rpb24uIiIiCiAgICBmdW5jLl9fZG9jX18g\nPSBkb2MKCgpkZWYgX2ltcG9ydF9tb2R1bGUobmFtZSk6CiAgICAiIiJJbXBvcnQgbW9kdWxlLCBy\nZXR1cm5pbmcgdGhlIG1vZHVsZSBhZnRlciB0aGUgbGFzdCBkb3QuIiIiCiAgICBfX2ltcG9ydF9f\nKG5hbWUpCiAgICByZXR1cm4gc3lzLm1vZHVsZXNbbmFtZV0KCgpjbGFzcyBfTGF6eURlc2NyKG9i\namVjdCk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUpOgogICAgICAgIHNlbGYubmFtZSA9\nIG5hbWUKCiAgICBkZWYgX19nZXRfXyhzZWxmLCBvYmosIHRwKToKICAgICAgICByZXN1bHQgPSBz\nZWxmLl9yZXNvbHZlKCkKICAgICAgICBzZXRhdHRyKG9iaiwgc2VsZi5uYW1lLCByZXN1bHQpCiAg\nICAgICAgIyBUaGlzIGlzIGEgYml0IHVnbHksIGJ1dCBpdCBhdm9pZHMgcnVubmluZyB0aGlzIGFn\nYWluLgogICAgICAgIGRlbGF0dHIodHAsIHNlbGYubmFtZSkKICAgICAgICByZXR1cm4gcmVzdWx0\nCgoKY2xhc3MgTW92ZWRNb2R1bGUoX0xhenlEZXNjcik6CgogICAgZGVmIF9faW5pdF9fKHNlbGYs\nIG5hbWUsIG9sZCwgbmV3PU5vbmUpOgogICAgICAgIHN1cGVyKE1vdmVkTW9kdWxlLCBzZWxmKS5f\nX2luaXRfXyhuYW1lKQogICAgICAgIGlmIFBZMzoKICAgICAgICAgICAgaWYgbmV3IGlzIE5vbmU6\nCiAgICAgICAgICAgICAgICBuZXcgPSBuYW1lCiAgICAgICAgICAgIHNlbGYubW9kID0gbmV3CiAg\nICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5tb2QgPSBvbGQKCiAgICBkZWYgX3Jlc29sdmUo\nc2VsZik6CiAgICAgICAgcmV0dXJuIF9pbXBvcnRfbW9kdWxlKHNlbGYubW9kKQoKCmNsYXNzIE1v\ndmVkQXR0cmlidXRlKF9MYXp5RGVzY3IpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCBv\nbGRfbW9kLCBuZXdfbW9kLCBvbGRfYXR0cj1Ob25lLCBuZXdfYXR0cj1Ob25lKToKICAgICAgICBz\ndXBlcihNb3ZlZEF0dHJpYnV0ZSwgc2VsZikuX19pbml0X18obmFtZSkKICAgICAgICBpZiBQWTM6\nCiAgICAgICAgICAgIGlmIG5ld19tb2QgaXMgTm9uZToKICAgICAgICAgICAgICAgIG5ld19tb2Qg\nPSBuYW1lCiAgICAgICAgICAgIHNlbGYubW9kID0gbmV3X21vZAogICAgICAgICAgICBpZiBuZXdf\nYXR0ciBpcyBOb25lOgogICAgICAgICAgICAgICAgaWYgb2xkX2F0dHIgaXMgTm9uZToKICAgICAg\nICAgICAgICAgICAgICBuZXdfYXR0ciA9IG5hbWUKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAg\nICAgICAgICAgICAgICAgbmV3X2F0dHIgPSBvbGRfYXR0cgogICAgICAgICAgICBzZWxmLmF0dHIg\nPSBuZXdfYXR0cgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYubW9kID0gb2xkX21vZAog\nICAgICAgICAgICBpZiBvbGRfYXR0ciBpcyBOb25lOgogICAgICAgICAgICAgICAgb2xkX2F0dHIg\nPSBuYW1lCiAgICAgICAgICAgIHNlbGYuYXR0ciA9IG9sZF9hdHRyCgogICAgZGVmIF9yZXNvbHZl\nKHNlbGYpOgogICAgICAgIG1vZHVsZSA9IF9pbXBvcnRfbW9kdWxlKHNlbGYubW9kKQogICAgICAg\nIHJldHVybiBnZXRhdHRyKG1vZHVsZSwgc2VsZi5hdHRyKQoKCgpjbGFzcyBfTW92ZWRJdGVtcyh0\neXBlcy5Nb2R1bGVUeXBlKToKICAgICIiIkxhenkgbG9hZGluZyBvZiBtb3ZlZCBvYmplY3RzIiIi\nCgoKX21vdmVkX2F0dHJpYnV0ZXMgPSBbCiAgICBNb3ZlZEF0dHJpYnV0ZSgiY1N0cmluZ0lPIiwg\nImNTdHJpbmdJTyIsICJpbyIsICJTdHJpbmdJTyIpLAogICAgTW92ZWRBdHRyaWJ1dGUoImZpbHRl\nciIsICJpdGVydG9vbHMiLCAiYnVpbHRpbnMiLCAiaWZpbHRlciIsICJmaWx0ZXIiKSwKICAgIE1v\ndmVkQXR0cmlidXRlKCJpbnB1dCIsICJfX2J1aWx0aW5fXyIsICJidWlsdGlucyIsICJyYXdfaW5w\ndXQiLCAiaW5wdXQiKSwKICAgIE1vdmVkQXR0cmlidXRlKCJtYXAiLCAiaXRlcnRvb2xzIiwgImJ1\naWx0aW5zIiwgImltYXAiLCAibWFwIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgicmVsb2FkX21vZHVs\nZSIsICJfX2J1aWx0aW5fXyIsICJpbXAiLCAicmVsb2FkIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgi\ncmVkdWNlIiwgIl9fYnVpbHRpbl9fIiwgImZ1bmN0b29scyIpLAogICAgTW92ZWRBdHRyaWJ1dGUo\nIlN0cmluZ0lPIiwgIlN0cmluZ0lPIiwgImlvIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgieHJhbmdl\nIiwgIl9fYnVpbHRpbl9fIiwgImJ1aWx0aW5zIiwgInhyYW5nZSIsICJyYW5nZSIpLAogICAgTW92\nZWRBdHRyaWJ1dGUoInppcCIsICJpdGVydG9vbHMiLCAiYnVpbHRpbnMiLCAiaXppcCIsICJ6aXAi\nKSwKCiAgICBNb3ZlZE1vZHVsZSgiYnVpbHRpbnMiLCAiX19idWlsdGluX18iKSwKICAgIE1vdmVk\nTW9kdWxlKCJjb25maWdwYXJzZXIiLCAiQ29uZmlnUGFyc2VyIiksCiAgICBNb3ZlZE1vZHVsZSgi\nY29weXJlZyIsICJjb3B5X3JlZyIpLAogICAgTW92ZWRNb2R1bGUoImh0dHBfY29va2llamFyIiwg\nImNvb2tpZWxpYiIsICJodHRwLmNvb2tpZWphciIpLAogICAgTW92ZWRNb2R1bGUoImh0dHBfY29v\na2llcyIsICJDb29raWUiLCAiaHR0cC5jb29raWVzIiksCiAgICBNb3ZlZE1vZHVsZSgiaHRtbF9l\nbnRpdGllcyIsICJodG1sZW50aXR5ZGVmcyIsICJodG1sLmVudGl0aWVzIiksCiAgICBNb3ZlZE1v\nZHVsZSgiaHRtbF9wYXJzZXIiLCAiSFRNTFBhcnNlciIsICJodG1sLnBhcnNlciIpLAogICAgTW92\nZWRNb2R1bGUoImh0dHBfY2xpZW50IiwgImh0dHBsaWIiLCAiaHR0cC5jbGllbnQiKSwKICAgIE1v\ndmVkTW9kdWxlKCJCYXNlSFRUUFNlcnZlciIsICJCYXNlSFRUUFNlcnZlciIsICJodHRwLnNlcnZl\nciIpLAogICAgTW92ZWRNb2R1bGUoIkNHSUhUVFBTZXJ2ZXIiLCAiQ0dJSFRUUFNlcnZlciIsICJo\ndHRwLnNlcnZlciIpLAogICAgTW92ZWRNb2R1bGUoIlNpbXBsZUhUVFBTZXJ2ZXIiLCAiU2ltcGxl\nSFRUUFNlcnZlciIsICJodHRwLnNlcnZlciIpLAogICAgTW92ZWRNb2R1bGUoImNQaWNrbGUiLCAi\nY1BpY2tsZSIsICJwaWNrbGUiKSwKICAgIE1vdmVkTW9kdWxlKCJxdWV1ZSIsICJRdWV1ZSIpLAog\nICAgTW92ZWRNb2R1bGUoInJlcHJsaWIiLCAicmVwciIpLAogICAgTW92ZWRNb2R1bGUoInNvY2tl\ndHNlcnZlciIsICJTb2NrZXRTZXJ2ZXIiKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyIiwgIlRr\naW50ZXIiKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX2RpYWxvZyIsICJEaWFsb2ciLCAidGtp\nbnRlci5kaWFsb2ciKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX2ZpbGVkaWFsb2ciLCAiRmls\nZURpYWxvZyIsICJ0a2ludGVyLmZpbGVkaWFsb2ciKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVy\nX3Njcm9sbGVkdGV4dCIsICJTY3JvbGxlZFRleHQiLCAidGtpbnRlci5zY3JvbGxlZHRleHQiKSwK\nICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX3NpbXBsZWRpYWxvZyIsICJTaW1wbGVEaWFsb2ciLCAi\ndGtpbnRlci5zaW1wbGVkaWFsb2ciKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX3RpeCIsICJU\naXgiLCAidGtpbnRlci50aXgiKSwKICAgIE1vdmVkTW9kdWxlKCJ0a2ludGVyX2NvbnN0YW50cyIs\nICJUa2NvbnN0YW50cyIsICJ0a2ludGVyLmNvbnN0YW50cyIpLAogICAgTW92ZWRNb2R1bGUoInRr\naW50ZXJfZG5kIiwgIlRrZG5kIiwgInRraW50ZXIuZG5kIiksCiAgICBNb3ZlZE1vZHVsZSgidGtp\nbnRlcl9jb2xvcmNob29zZXIiLCAidGtDb2xvckNob29zZXIiLAogICAgICAgICAgICAgICAgInRr\naW50ZXIuY29sb3JjaG9vc2VyIiksCiAgICBNb3ZlZE1vZHVsZSgidGtpbnRlcl9jb21tb25kaWFs\nb2ciLCAidGtDb21tb25EaWFsb2ciLAogICAgICAgICAgICAgICAgInRraW50ZXIuY29tbW9uZGlh\nbG9nIiksCiAgICBNb3ZlZE1vZHVsZSgidGtpbnRlcl90a2ZpbGVkaWFsb2ciLCAidGtGaWxlRGlh\nbG9nIiwgInRraW50ZXIuZmlsZWRpYWxvZyIpLAogICAgTW92ZWRNb2R1bGUoInRraW50ZXJfZm9u\ndCIsICJ0a0ZvbnQiLCAidGtpbnRlci5mb250IiksCiAgICBNb3ZlZE1vZHVsZSgidGtpbnRlcl9t\nZXNzYWdlYm94IiwgInRrTWVzc2FnZUJveCIsICJ0a2ludGVyLm1lc3NhZ2Vib3giKSwKICAgIE1v\ndmVkTW9kdWxlKCJ0a2ludGVyX3Rrc2ltcGxlZGlhbG9nIiwgInRrU2ltcGxlRGlhbG9nIiwKICAg\nICAgICAgICAgICAgICJ0a2ludGVyLnNpbXBsZWRpYWxvZyIpLAogICAgTW92ZWRNb2R1bGUoInVy\nbGxpYl9yb2JvdHBhcnNlciIsICJyb2JvdHBhcnNlciIsICJ1cmxsaWIucm9ib3RwYXJzZXIiKSwK\nICAgIE1vdmVkTW9kdWxlKCJ3aW5yZWciLCAiX3dpbnJlZyIpLApdCmZvciBhdHRyIGluIF9tb3Zl\nZF9hdHRyaWJ1dGVzOgogICAgc2V0YXR0cihfTW92ZWRJdGVtcywgYXR0ci5uYW1lLCBhdHRyKQpk\nZWwgYXR0cgoKbW92ZXMgPSBzeXMubW9kdWxlc1sic2l4Lm1vdmVzIl0gPSBfTW92ZWRJdGVtcygi\nbW92ZXMiKQoKCmRlZiBhZGRfbW92ZShtb3ZlKToKICAgICIiIkFkZCBhbiBpdGVtIHRvIHNpeC5t\nb3Zlcy4iIiIKICAgIHNldGF0dHIoX01vdmVkSXRlbXMsIG1vdmUubmFtZSwgbW92ZSkKCgpkZWYg\ncmVtb3ZlX21vdmUobmFtZSk6CiAgICAiIiJSZW1vdmUgaXRlbSBmcm9tIHNpeC5tb3Zlcy4iIiIK\nICAgIHRyeToKICAgICAgICBkZWxhdHRyKF9Nb3ZlZEl0ZW1zLCBuYW1lKQogICAgZXhjZXB0IEF0\ndHJpYnV0ZUVycm9yOgogICAgICAgIHRyeToKICAgICAgICAgICAgZGVsIG1vdmVzLl9fZGljdF9f\nW25hbWVdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByYWlzZSBBdHRyaWJ1\ndGVFcnJvcigibm8gc3VjaCBtb3ZlLCAlciIgJSAobmFtZSwpKQoKCmlmIFBZMzoKICAgIF9tZXRo\nX2Z1bmMgPSAiX19mdW5jX18iCiAgICBfbWV0aF9zZWxmID0gIl9fc2VsZl9fIgoKICAgIF9mdW5j\nX2NvZGUgPSAiX19jb2RlX18iCiAgICBfZnVuY19kZWZhdWx0cyA9ICJfX2RlZmF1bHRzX18iCgog\nICAgX2l0ZXJrZXlzID0gImtleXMiCiAgICBfaXRlcnZhbHVlcyA9ICJ2YWx1ZXMiCiAgICBfaXRl\ncml0ZW1zID0gIml0ZW1zIgplbHNlOgogICAgX21ldGhfZnVuYyA9ICJpbV9mdW5jIgogICAgX21l\ndGhfc2VsZiA9ICJpbV9zZWxmIgoKICAgIF9mdW5jX2NvZGUgPSAiZnVuY19jb2RlIgogICAgX2Z1\nbmNfZGVmYXVsdHMgPSAiZnVuY19kZWZhdWx0cyIKCiAgICBfaXRlcmtleXMgPSAiaXRlcmtleXMi\nCiAgICBfaXRlcnZhbHVlcyA9ICJpdGVydmFsdWVzIgogICAgX2l0ZXJpdGVtcyA9ICJpdGVyaXRl\nbXMiCgoKdHJ5OgogICAgYWR2YW5jZV9pdGVyYXRvciA9IG5leHQKZXhjZXB0IE5hbWVFcnJvcjoK\nICAgIGRlZiBhZHZhbmNlX2l0ZXJhdG9yKGl0KToKICAgICAgICByZXR1cm4gaXQubmV4dCgpCm5l\neHQgPSBhZHZhbmNlX2l0ZXJhdG9yCgoKaWYgUFkzOgogICAgZGVmIGdldF91bmJvdW5kX2Z1bmN0\naW9uKHVuYm91bmQpOgogICAgICAgIHJldHVybiB1bmJvdW5kCgogICAgSXRlcmF0b3IgPSBvYmpl\nY3QKCiAgICBkZWYgY2FsbGFibGUob2JqKToKICAgICAgICByZXR1cm4gYW55KCJfX2NhbGxfXyIg\naW4ga2xhc3MuX19kaWN0X18gZm9yIGtsYXNzIGluIHR5cGUob2JqKS5fX21yb19fKQplbHNlOgog\nICAgZGVmIGdldF91bmJvdW5kX2Z1bmN0aW9uKHVuYm91bmQpOgogICAgICAgIHJldHVybiB1bmJv\ndW5kLmltX2Z1bmMKCiAgICBjbGFzcyBJdGVyYXRvcihvYmplY3QpOgoKICAgICAgICBkZWYgbmV4\ndChzZWxmKToKICAgICAgICAgICAgcmV0dXJuIHR5cGUoc2VsZikuX19uZXh0X18oc2VsZikKCiAg\nICBjYWxsYWJsZSA9IGNhbGxhYmxlCl9hZGRfZG9jKGdldF91bmJvdW5kX2Z1bmN0aW9uLAogICAg\nICAgICAiIiJHZXQgdGhlIGZ1bmN0aW9uIG91dCBvZiBhIHBvc3NpYmx5IHVuYm91bmQgZnVuY3Rp\nb24iIiIpCgoKZ2V0X21ldGhvZF9mdW5jdGlvbiA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX21ldGhf\nZnVuYykKZ2V0X21ldGhvZF9zZWxmID0gb3BlcmF0b3IuYXR0cmdldHRlcihfbWV0aF9zZWxmKQpn\nZXRfZnVuY3Rpb25fY29kZSA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX2Z1bmNfY29kZSkKZ2V0X2Z1\nbmN0aW9uX2RlZmF1bHRzID0gb3BlcmF0b3IuYXR0cmdldHRlcihfZnVuY19kZWZhdWx0cykKCgpk\nZWYgaXRlcmtleXMoZCk6CiAgICAiIiJSZXR1cm4gYW4gaXRlcmF0b3Igb3ZlciB0aGUga2V5cyBv\nZiBhIGRpY3Rpb25hcnkuIiIiCiAgICByZXR1cm4gaXRlcihnZXRhdHRyKGQsIF9pdGVya2V5cyko\nKSkKCmRlZiBpdGVydmFsdWVzKGQpOgogICAgIiIiUmV0dXJuIGFuIGl0ZXJhdG9yIG92ZXIgdGhl\nIHZhbHVlcyBvZiBhIGRpY3Rpb25hcnkuIiIiCiAgICByZXR1cm4gaXRlcihnZXRhdHRyKGQsIF9p\ndGVydmFsdWVzKSgpKQoKZGVmIGl0ZXJpdGVtcyhkKToKICAgICIiIlJldHVybiBhbiBpdGVyYXRv\nciBvdmVyIHRoZSAoa2V5LCB2YWx1ZSkgcGFpcnMgb2YgYSBkaWN0aW9uYXJ5LiIiIgogICAgcmV0\ndXJuIGl0ZXIoZ2V0YXR0cihkLCBfaXRlcml0ZW1zKSgpKQoKCmlmIFBZMzoKICAgIGRlZiBiKHMp\nOgogICAgICAgIHJldHVybiBzLmVuY29kZSgibGF0aW4tMSIpCiAgICBkZWYgdShzKToKICAgICAg\nICByZXR1cm4gcwogICAgaWYgc3lzLnZlcnNpb25faW5mb1sxXSA8PSAxOgogICAgICAgIGRlZiBp\nbnQyYnl0ZShpKToKICAgICAgICAgICAgcmV0dXJuIGJ5dGVzKChpLCkpCiAgICBlbHNlOgogICAg\nICAgICMgVGhpcyBpcyBhYm91dCAyeCBmYXN0ZXIgdGhhbiB0aGUgaW1wbGVtZW50YXRpb24gYWJv\ndmUgb24gMy4yKwogICAgICAgIGludDJieXRlID0gb3BlcmF0b3IubWV0aG9kY2FsbGVyKCJ0b19i\neXRlcyIsIDEsICJiaWciKQogICAgaW1wb3J0IGlvCiAgICBTdHJpbmdJTyA9IGlvLlN0cmluZ0lP\nCiAgICBCeXRlc0lPID0gaW8uQnl0ZXNJTwplbHNlOgogICAgZGVmIGIocyk6CiAgICAgICAgcmV0\ndXJuIHMKICAgIGRlZiB1KHMpOgogICAgICAgIHJldHVybiB1bmljb2RlKHMsICJ1bmljb2RlX2Vz\nY2FwZSIpCiAgICBpbnQyYnl0ZSA9IGNocgogICAgaW1wb3J0IFN0cmluZ0lPCiAgICBTdHJpbmdJ\nTyA9IEJ5dGVzSU8gPSBTdHJpbmdJTy5TdHJpbmdJTwpfYWRkX2RvYyhiLCAiIiJCeXRlIGxpdGVy\nYWwiIiIpCl9hZGRfZG9jKHUsICIiIlRleHQgbGl0ZXJhbCIiIikKCgppZiBQWTM6CiAgICBpbXBv\ncnQgYnVpbHRpbnMKICAgIGV4ZWNfID0gZ2V0YXR0cihidWlsdGlucywgImV4ZWMiKQoKCiAgICBk\nZWYgcmVyYWlzZSh0cCwgdmFsdWUsIHRiPU5vbmUpOgogICAgICAgIGlmIHZhbHVlLl9fdHJhY2Vi\nYWNrX18gaXMgbm90IHRiOgogICAgICAgICAgICByYWlzZSB2YWx1ZS53aXRoX3RyYWNlYmFjayh0\nYikKICAgICAgICByYWlzZSB2YWx1ZQoKCiAgICBwcmludF8gPSBnZXRhdHRyKGJ1aWx0aW5zLCAi\ncHJpbnQiKQogICAgZGVsIGJ1aWx0aW5zCgplbHNlOgogICAgZGVmIGV4ZWNfKGNvZGUsIGdsb2Jz\nPU5vbmUsIGxvY3M9Tm9uZSk6CiAgICAgICAgIiIiRXhlY3V0ZSBjb2RlIGluIGEgbmFtZXNwYWNl\nLiIiIgogICAgICAgIGlmIGdsb2JzIGlzIE5vbmU6CiAgICAgICAgICAgIGZyYW1lID0gc3lzLl9n\nZXRmcmFtZSgxKQogICAgICAgICAgICBnbG9icyA9IGZyYW1lLmZfZ2xvYmFscwogICAgICAgICAg\nICBpZiBsb2NzIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBsb2NzID0gZnJhbWUuZl9sb2NhbHMK\nICAgICAgICAgICAgZGVsIGZyYW1lCiAgICAgICAgZWxpZiBsb2NzIGlzIE5vbmU6CiAgICAgICAg\nICAgIGxvY3MgPSBnbG9icwogICAgICAgIGV4ZWMoIiIiZXhlYyBjb2RlIGluIGdsb2JzLCBsb2Nz\nIiIiKQoKCiAgICBleGVjXygiIiJkZWYgcmVyYWlzZSh0cCwgdmFsdWUsIHRiPU5vbmUpOgogICAg\ncmFpc2UgdHAsIHZhbHVlLCB0YgoiIiIpCgoKICAgIGRlZiBwcmludF8oKmFyZ3MsICoqa3dhcmdz\nKToKICAgICAgICAiIiJUaGUgbmV3LXN0eWxlIHByaW50IGZ1bmN0aW9uLiIiIgogICAgICAgIGZw\nID0ga3dhcmdzLnBvcCgiZmlsZSIsIHN5cy5zdGRvdXQpCiAgICAgICAgaWYgZnAgaXMgTm9uZToK\nICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZGVmIHdyaXRlKGRhdGEpOgogICAgICAgICAgICBp\nZiBub3QgaXNpbnN0YW5jZShkYXRhLCBiYXNlc3RyaW5nKToKICAgICAgICAgICAgICAgIGRhdGEg\nPSBzdHIoZGF0YSkKICAgICAgICAgICAgZnAud3JpdGUoZGF0YSkKICAgICAgICB3YW50X3VuaWNv\nZGUgPSBGYWxzZQogICAgICAgIHNlcCA9IGt3YXJncy5wb3AoInNlcCIsIE5vbmUpCiAgICAgICAg\naWYgc2VwIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNlcCwgdW5pY29k\nZSk6CiAgICAgICAgICAgICAgICB3YW50X3VuaWNvZGUgPSBUcnVlCiAgICAgICAgICAgIGVsaWYg\nbm90IGlzaW5zdGFuY2Uoc2VwLCBzdHIpOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9y\nKCJzZXAgbXVzdCBiZSBOb25lIG9yIGEgc3RyaW5nIikKICAgICAgICBlbmQgPSBrd2FyZ3MucG9w\nKCJlbmQiLCBOb25lKQogICAgICAgIGlmIGVuZCBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYg\naXNpbnN0YW5jZShlbmQsIHVuaWNvZGUpOgogICAgICAgICAgICAgICAgd2FudF91bmljb2RlID0g\nVHJ1ZQogICAgICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKGVuZCwgc3RyKToKICAgICAgICAg\nICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZW5kIG11c3QgYmUgTm9uZSBvciBhIHN0cmluZyIpCiAg\nICAgICAgaWYga3dhcmdzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImludmFsaWQga2V5\nd29yZCBhcmd1bWVudHMgdG8gcHJpbnQoKSIpCiAgICAgICAgaWYgbm90IHdhbnRfdW5pY29kZToK\nICAgICAgICAgICAgZm9yIGFyZyBpbiBhcmdzOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5j\nZShhcmcsIHVuaWNvZGUpOgogICAgICAgICAgICAgICAgICAgIHdhbnRfdW5pY29kZSA9IFRydWUK\nICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGlmIHdhbnRfdW5pY29kZToKICAgICAg\nICAgICAgbmV3bGluZSA9IHVuaWNvZGUoIlxuIikKICAgICAgICAgICAgc3BhY2UgPSB1bmljb2Rl\nKCIgIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBuZXdsaW5lID0gIlxuIgogICAgICAgICAg\nICBzcGFjZSA9ICIgIgogICAgICAgIGlmIHNlcCBpcyBOb25lOgogICAgICAgICAgICBzZXAgPSBz\ncGFjZQogICAgICAgIGlmIGVuZCBpcyBOb25lOgogICAgICAgICAgICBlbmQgPSBuZXdsaW5lCiAg\nICAgICAgZm9yIGksIGFyZyBpbiBlbnVtZXJhdGUoYXJncyk6CiAgICAgICAgICAgIGlmIGk6CiAg\nICAgICAgICAgICAgICB3cml0ZShzZXApCiAgICAgICAgICAgIHdyaXRlKGFyZykKICAgICAgICB3\ncml0ZShlbmQpCgpfYWRkX2RvYyhyZXJhaXNlLCAiIiJSZXJhaXNlIGFuIGV4Y2VwdGlvbi4iIiIp\nCgoKZGVmIHdpdGhfbWV0YWNsYXNzKG1ldGEsIGJhc2U9b2JqZWN0KToKICAgICIiIkNyZWF0ZSBh\nIGJhc2UgY2xhc3Mgd2l0aCBhIG1ldGFjbGFzcy4iIiIKICAgIHJldHVybiBtZXRhKCJOZXdCYXNl\nIiwgKGJhc2UsKSwge30pCg==\n'))
_chut_modules.append(('docopt', 'aW1wb3J0IHN5cwppbXBvcnQgcmUKCgpjbGFzcyBEb2NvcHRMYW5ndWFnZUVycm9yKEV4Y2VwdGlv\nbik6CgogICAgIiIiRXJyb3IgaW4gY29uc3RydWN0aW9uIG9mIHVzYWdlLW1lc3NhZ2UgYnkgZGV2\nZWxvcGVyLiIiIgoKCmNsYXNzIERvY29wdEV4aXQoU3lzdGVtRXhpdCk6CgogICAgIiIiRXhpdCBp\nbiBjYXNlIHVzZXIgaW52b2tlZCBwcm9ncmFtIHdpdGggaW5jb3JyZWN0IGFyZ3VtZW50cy4iIiIK\nCiAgICB1c2FnZSA9ICcnCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2U9JycpOgogICAg\nICAgIFN5c3RlbUV4aXQuX19pbml0X18oc2VsZiwgKG1lc3NhZ2UgKyAnXG4nICsgc2VsZi51c2Fn\nZSkuc3RyaXAoKSkKCgpjbGFzcyBQYXR0ZXJuKG9iamVjdCk6CgogICAgZGVmIF9fZXFfXyhzZWxm\nLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIHJlcHIoc2VsZikgPT0gcmVwcihvdGhlcikKCiAgICBk\nZWYgX19oYXNoX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGhhc2gocmVwcihzZWxmKSkKCiAgICBk\nZWYgZml4KHNlbGYpOgogICAgICAgIHNlbGYuZml4X2lkZW50aXRpZXMoKQogICAgICAgIHNlbGYu\nZml4X2xpc3RfYXJndW1lbnRzKCkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBmaXhfaWRl\nbnRpdGllcyhzZWxmLCB1bmlxPU5vbmUpOgogICAgICAgICIiIk1ha2UgcGF0dGVybi10cmVlIHRp\ncHMgcG9pbnQgdG8gc2FtZSBvYmplY3QgaWYgdGhleSBhcmUgZXF1YWwuIiIiCiAgICAgICAgaWYg\nbm90IGhhc2F0dHIoc2VsZiwgJ2NoaWxkcmVuJyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmCiAg\nICAgICAgdW5pcSA9IGxpc3Qoc2V0KHNlbGYuZmxhdCkpIGlmIHVuaXEgPT0gTm9uZSBlbHNlIHVu\naXEKICAgICAgICBmb3IgaSwgYyBpbiBlbnVtZXJhdGUoc2VsZi5jaGlsZHJlbik6CiAgICAgICAg\nICAgIGlmIG5vdCBoYXNhdHRyKGMsICdjaGlsZHJlbicpOgogICAgICAgICAgICAgICAgYXNzZXJ0\nIGMgaW4gdW5pcQogICAgICAgICAgICAgICAgc2VsZi5jaGlsZHJlbltpXSA9IHVuaXFbdW5pcS5p\nbmRleChjKV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGMuZml4X2lkZW50aXRp\nZXModW5pcSkKCiAgICBkZWYgZml4X2xpc3RfYXJndW1lbnRzKHNlbGYpOgogICAgICAgICIiIkZp\nbmQgYXJndW1lbnRzIHRoYXQgc2hvdWxkIGFjY3VtdWxhdGUgdmFsdWVzIGFuZCBmaXggdGhlbS4i\nIiIKICAgICAgICBlaXRoZXIgPSBbbGlzdChjLmNoaWxkcmVuKSBmb3IgYyBpbiBzZWxmLmVpdGhl\nci5jaGlsZHJlbl0KICAgICAgICBmb3IgY2FzZSBpbiBlaXRoZXI6CiAgICAgICAgICAgIGZvciBl\nIGluIFtjIGZvciBjIGluIGNhc2UgaWYgY2FzZS5jb3VudChjKSA+IDFdOgogICAgICAgICAgICAg\nICAgaWYgdHlwZShlKSBpcyBBcmd1bWVudCBvciB0eXBlKGUpIGlzIE9wdGlvbiBhbmQgZS5hcmdj\nb3VudDoKICAgICAgICAgICAgICAgICAgICBlLnZhbHVlID0gW10KICAgICAgICAgICAgICAgIGlm\nIHR5cGUoZSkgaXMgQ29tbWFuZCBvciB0eXBlKGUpIGlzIE9wdGlvbiBhbmQgZS5hcmdjb3VudCA9\nPSAwOgogICAgICAgICAgICAgICAgICAgIGUudmFsdWUgPSAwCiAgICAgICAgcmV0dXJuIHNlbGYK\nCiAgICBAcHJvcGVydHkKICAgIGRlZiBlaXRoZXIoc2VsZik6CiAgICAgICAgIiIiVHJhbnNmb3Jt\nIHBhdHRlcm4gaW50byBhbiBlcXVpdmFsZW50LCB3aXRoIG9ubHkgdG9wLWxldmVsIEVpdGhlci4i\nIiIKICAgICAgICAjIEN1cnJlbnRseSB0aGUgcGF0dGVybiB3aWxsIG5vdCBiZSBlcXVpdmFsZW50\nLCBidXQgbW9yZSAibmFycm93IiwKICAgICAgICAjIGFsdGhvdWdoIGdvb2QgZW5vdWdoIHRvIHJl\nYXNvbiBhYm91dCBsaXN0IGFyZ3VtZW50cy4KICAgICAgICByZXQgPSBbXQogICAgICAgIGdyb3Vw\ncyA9IFtbc2VsZl1dCiAgICAgICAgd2hpbGUgZ3JvdXBzOgogICAgICAgICAgICBjaGlsZHJlbiA9\nIGdyb3Vwcy5wb3AoMCkKICAgICAgICAgICAgdHlwZXMgPSBbdHlwZShjKSBmb3IgYyBpbiBjaGls\nZHJlbl0KICAgICAgICAgICAgaWYgRWl0aGVyIGluIHR5cGVzOgogICAgICAgICAgICAgICAgZWl0\naGVyID0gW2MgZm9yIGMgaW4gY2hpbGRyZW4gaWYgdHlwZShjKSBpcyBFaXRoZXJdWzBdCiAgICAg\nICAgICAgICAgICBjaGlsZHJlbi5wb3AoY2hpbGRyZW4uaW5kZXgoZWl0aGVyKSkKICAgICAgICAg\nICAgICAgIGZvciBjIGluIGVpdGhlci5jaGlsZHJlbjoKICAgICAgICAgICAgICAgICAgICBncm91\ncHMuYXBwZW5kKFtjXSArIGNoaWxkcmVuKQogICAgICAgICAgICBlbGlmIFJlcXVpcmVkIGluIHR5\ncGVzOgogICAgICAgICAgICAgICAgcmVxdWlyZWQgPSBbYyBmb3IgYyBpbiBjaGlsZHJlbiBpZiB0\neXBlKGMpIGlzIFJlcXVpcmVkXVswXQogICAgICAgICAgICAgICAgY2hpbGRyZW4ucG9wKGNoaWxk\ncmVuLmluZGV4KHJlcXVpcmVkKSkKICAgICAgICAgICAgICAgIGdyb3Vwcy5hcHBlbmQobGlzdChy\nZXF1aXJlZC5jaGlsZHJlbikgKyBjaGlsZHJlbikKICAgICAgICAgICAgZWxpZiBPcHRpb25hbCBp\nbiB0eXBlczoKICAgICAgICAgICAgICAgIG9wdGlvbmFsID0gW2MgZm9yIGMgaW4gY2hpbGRyZW4g\naWYgdHlwZShjKSBpcyBPcHRpb25hbF1bMF0KICAgICAgICAgICAgICAgIGNoaWxkcmVuLnBvcChj\naGlsZHJlbi5pbmRleChvcHRpb25hbCkpCiAgICAgICAgICAgICAgICBncm91cHMuYXBwZW5kKGxp\nc3Qob3B0aW9uYWwuY2hpbGRyZW4pICsgY2hpbGRyZW4pCiAgICAgICAgICAgIGVsaWYgT25lT3JN\nb3JlIGluIHR5cGVzOgogICAgICAgICAgICAgICAgb25lb3Jtb3JlID0gW2MgZm9yIGMgaW4gY2hp\nbGRyZW4gaWYgdHlwZShjKSBpcyBPbmVPck1vcmVdWzBdCiAgICAgICAgICAgICAgICBjaGlsZHJl\nbi5wb3AoY2hpbGRyZW4uaW5kZXgob25lb3Jtb3JlKSkKICAgICAgICAgICAgICAgIGdyb3Vwcy5h\ncHBlbmQobGlzdChvbmVvcm1vcmUuY2hpbGRyZW4pICogMiArIGNoaWxkcmVuKQogICAgICAgICAg\nICBlbHNlOgogICAgICAgICAgICAgICAgcmV0LmFwcGVuZChjaGlsZHJlbikKICAgICAgICByZXR1\ncm4gRWl0aGVyKCpbUmVxdWlyZWQoKmUpIGZvciBlIGluIHJldF0pCgoKY2xhc3MgQ2hpbGRQYXR0\nZXJuKFBhdHRlcm4pOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCB2YWx1ZT1Ob25lKToK\nICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbHVlCgogICAg\nZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnJXMoJXIsICVyKScgJSAoc2VsZi5f\nX2NsYXNzX18uX19uYW1lX18sIHNlbGYubmFtZSwgc2VsZi52YWx1ZSkKCiAgICBAcHJvcGVydHkK\nICAgIGRlZiBmbGF0KHNlbGYpOgogICAgICAgIHJldHVybiBbc2VsZl0KCiAgICBkZWYgbWF0Y2go\nc2VsZiwgbGVmdCwgY29sbGVjdGVkPU5vbmUpOgogICAgICAgIGNvbGxlY3RlZCA9IFtdIGlmIGNv\nbGxlY3RlZCBpcyBOb25lIGVsc2UgY29sbGVjdGVkCiAgICAgICAgcG9zLCBtYXRjaCA9IHNlbGYu\nc2luZ2xlX21hdGNoKGxlZnQpCiAgICAgICAgaWYgbWF0Y2ggaXMgTm9uZToKICAgICAgICAgICAg\ncmV0dXJuIEZhbHNlLCBsZWZ0LCBjb2xsZWN0ZWQKICAgICAgICBsZWZ0XyA9IGxlZnRbOnBvc10g\nKyBsZWZ0W3BvcysxOl0KICAgICAgICBzYW1lX25hbWUgPSBbYSBmb3IgYSBpbiBjb2xsZWN0ZWQg\naWYgYS5uYW1lID09IHNlbGYubmFtZV0KICAgICAgICBpZiB0eXBlKHNlbGYudmFsdWUpIGluIChp\nbnQsIGxpc3QpOgogICAgICAgICAgICBpbmNyZW1lbnQgPSAxIGlmIHR5cGUoc2VsZi52YWx1ZSkg\naXMgaW50IGVsc2UgW21hdGNoLnZhbHVlXQogICAgICAgICAgICBpZiBub3Qgc2FtZV9uYW1lOgog\nICAgICAgICAgICAgICAgbWF0Y2gudmFsdWUgPSBpbmNyZW1lbnQKICAgICAgICAgICAgICAgIHJl\ndHVybiBUcnVlLCBsZWZ0XywgY29sbGVjdGVkICsgW21hdGNoXQogICAgICAgICAgICBzYW1lX25h\nbWVbMF0udmFsdWUgKz0gaW5jcmVtZW50CiAgICAgICAgICAgIHJldHVybiBUcnVlLCBsZWZ0Xywg\nY29sbGVjdGVkCiAgICAgICAgcmV0dXJuIFRydWUsIGxlZnRfLCBjb2xsZWN0ZWQgKyBbbWF0Y2hd\nCgoKY2xhc3MgUGFycmVudFBhdHRlcm4oUGF0dGVybik6CgogICAgZGVmIF9faW5pdF9fKHNlbGYs\nICpjaGlsZHJlbik6CiAgICAgICAgc2VsZi5jaGlsZHJlbiA9IGxpc3QoY2hpbGRyZW4pCgogICAg\nZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAnJXMoJXMpJyAlIChzZWxmLl9fY2xh\nc3NfXy5fX25hbWVfXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgJy5qb2luKHJlcHIo\nYSkgZm9yIGEgaW4gc2VsZi5jaGlsZHJlbikpCgogICAgQHByb3BlcnR5CiAgICBkZWYgZmxhdChz\nZWxmKToKICAgICAgICByZXR1cm4gc3VtKFtjLmZsYXQgZm9yIGMgaW4gc2VsZi5jaGlsZHJlbl0s\nIFtdKQoKCmNsYXNzIEFyZ3VtZW50KENoaWxkUGF0dGVybik6CgogICAgZGVmIHNpbmdsZV9tYXRj\naChzZWxmLCBsZWZ0KToKICAgICAgICBmb3IgbiwgcCBpbiBlbnVtZXJhdGUobGVmdCk6CiAgICAg\nICAgICAgIGlmIHR5cGUocCkgaXMgQXJndW1lbnQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbiwg\nQXJndW1lbnQoc2VsZi5uYW1lLCBwLnZhbHVlKQogICAgICAgIHJldHVybiBOb25lLCBOb25lCgoK\nY2xhc3MgQ29tbWFuZChBcmd1bWVudCk6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIHZh\nbHVlPUZhbHNlKToKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi52YWx1ZSA9\nIHZhbHVlCgogICAgZGVmIHNpbmdsZV9tYXRjaChzZWxmLCBsZWZ0KToKICAgICAgICBmb3Igbiwg\ncCBpbiBlbnVtZXJhdGUobGVmdCk6CiAgICAgICAgICAgIGlmIHR5cGUocCkgaXMgQXJndW1lbnQ6\nCiAgICAgICAgICAgICAgICBpZiBwLnZhbHVlID09IHNlbGYubmFtZToKICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gbiwgQ29tbWFuZChzZWxmLm5hbWUsIFRydWUpCiAgICAgICAgICAgICAgICBl\nbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUK\nCgpjbGFzcyBPcHRpb24oQ2hpbGRQYXR0ZXJuKToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgc2hv\ncnQ9Tm9uZSwgbG9uZz1Ob25lLCBhcmdjb3VudD0wLCB2YWx1ZT1GYWxzZSk6CiAgICAgICAgYXNz\nZXJ0IGFyZ2NvdW50IGluICgwLCAxKQogICAgICAgIHNlbGYuc2hvcnQsIHNlbGYubG9uZyA9IHNo\nb3J0LCBsb25nCiAgICAgICAgc2VsZi5hcmdjb3VudCwgc2VsZi52YWx1ZSA9IGFyZ2NvdW50LCB2\nYWx1ZQogICAgICAgIHNlbGYudmFsdWUgPSBOb25lIGlmIHZhbHVlID09IEZhbHNlIGFuZCBhcmdj\nb3VudCBlbHNlIHZhbHVlICAjIEhBQ0sKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBwYXJzZShj\nbGFzc18sIG9wdGlvbl9kZXNjcmlwdGlvbik6CiAgICAgICAgc2hvcnQsIGxvbmcsIGFyZ2NvdW50\nLCB2YWx1ZSA9IE5vbmUsIE5vbmUsIDAsIEZhbHNlCiAgICAgICAgb3B0aW9ucywgXywgZGVzY3Jp\ncHRpb24gPSBvcHRpb25fZGVzY3JpcHRpb24uc3RyaXAoKS5wYXJ0aXRpb24oJyAgJykKICAgICAg\nICBvcHRpb25zID0gb3B0aW9ucy5yZXBsYWNlKCcsJywgJyAnKS5yZXBsYWNlKCc9JywgJyAnKQog\nICAgICAgIGZvciBzIGluIG9wdGlvbnMuc3BsaXQoKToKICAgICAgICAgICAgaWYgcy5zdGFydHN3\naXRoKCctLScpOgogICAgICAgICAgICAgICAgbG9uZyA9IHMKICAgICAgICAgICAgZWxpZiBzLnN0\nYXJ0c3dpdGgoJy0nKToKICAgICAgICAgICAgICAgIHNob3J0ID0gcwogICAgICAgICAgICBlbHNl\nOgogICAgICAgICAgICAgICAgYXJnY291bnQgPSAxCiAgICAgICAgaWYgYXJnY291bnQ6CiAgICAg\nICAgICAgIG1hdGNoZWQgPSByZS5maW5kYWxsKCdcW2RlZmF1bHQ6ICguKilcXScsIGRlc2NyaXB0\naW9uLCBmbGFncz1yZS5JKQogICAgICAgICAgICB2YWx1ZSA9IG1hdGNoZWRbMF0gaWYgbWF0Y2hl\nZCBlbHNlIE5vbmUKICAgICAgICByZXR1cm4gY2xhc3NfKHNob3J0LCBsb25nLCBhcmdjb3VudCwg\ndmFsdWUpCgogICAgZGVmIHNpbmdsZV9tYXRjaChzZWxmLCBsZWZ0KToKICAgICAgICBmb3Igbiwg\ncCBpbiBlbnVtZXJhdGUobGVmdCk6CiAgICAgICAgICAgIGlmIHNlbGYubmFtZSA9PSBwLm5hbWU6\nCiAgICAgICAgICAgICAgICByZXR1cm4gbiwgcAogICAgICAgIHJldHVybiBOb25lLCBOb25lCgog\nICAgQHByb3BlcnR5CiAgICBkZWYgbmFtZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5sb25n\nIG9yIHNlbGYuc2hvcnQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICdP\ncHRpb24oJXIsICVyLCAlciwgJXIpJyAlIChzZWxmLnNob3J0LCBzZWxmLmxvbmcsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFyZ2NvdW50LCBzZWxmLnZh\nbHVlKQoKCmNsYXNzIFJlcXVpcmVkKFBhcnJlbnRQYXR0ZXJuKToKCiAgICBkZWYgbWF0Y2goc2Vs\nZiwgbGVmdCwgY29sbGVjdGVkPU5vbmUpOgogICAgICAgIGNvbGxlY3RlZCA9IFtdIGlmIGNvbGxl\nY3RlZCBpcyBOb25lIGVsc2UgY29sbGVjdGVkCiAgICAgICAgbCA9IGxlZnQKICAgICAgICBjID0g\nY29sbGVjdGVkCiAgICAgICAgZm9yIHAgaW4gc2VsZi5jaGlsZHJlbjoKICAgICAgICAgICAgbWF0\nY2hlZCwgbCwgYyA9IHAubWF0Y2gobCwgYykKICAgICAgICAgICAgaWYgbm90IG1hdGNoZWQ6CiAg\nICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGxlZnQsIGNvbGxlY3RlZAogICAgICAgIHJldHVy\nbiBUcnVlLCBsLCBjCgoKY2xhc3MgT3B0aW9uYWwoUGFycmVudFBhdHRlcm4pOgoKICAgIGRlZiBt\nYXRjaChzZWxmLCBsZWZ0LCBjb2xsZWN0ZWQ9Tm9uZSk6CiAgICAgICAgY29sbGVjdGVkID0gW10g\naWYgY29sbGVjdGVkIGlzIE5vbmUgZWxzZSBjb2xsZWN0ZWQKICAgICAgICBmb3IgcCBpbiBzZWxm\nLmNoaWxkcmVuOgogICAgICAgICAgICBtLCBsZWZ0LCBjb2xsZWN0ZWQgPSBwLm1hdGNoKGxlZnQs\nIGNvbGxlY3RlZCkKICAgICAgICByZXR1cm4gVHJ1ZSwgbGVmdCwgY29sbGVjdGVkCgoKY2xhc3Mg\nT25lT3JNb3JlKFBhcnJlbnRQYXR0ZXJuKToKCiAgICBkZWYgbWF0Y2goc2VsZiwgbGVmdCwgY29s\nbGVjdGVkPU5vbmUpOgogICAgICAgIGFzc2VydCBsZW4oc2VsZi5jaGlsZHJlbikgPT0gMQogICAg\nICAgIGNvbGxlY3RlZCA9IFtdIGlmIGNvbGxlY3RlZCBpcyBOb25lIGVsc2UgY29sbGVjdGVkCiAg\nICAgICAgbCA9IGxlZnQKICAgICAgICBjID0gY29sbGVjdGVkCiAgICAgICAgbF8gPSBOb25lCiAg\nICAgICAgbWF0Y2hlZCA9IFRydWUKICAgICAgICB0aW1lcyA9IDAKICAgICAgICB3aGlsZSBtYXRj\naGVkOgogICAgICAgICAgICAjIGNvdWxkIGl0IGJlIHRoYXQgc29tZXRoaW5nIGRpZG4ndCBtYXRj\naCBidXQgY2hhbmdlZCBsIG9yIGM/CiAgICAgICAgICAgIG1hdGNoZWQsIGwsIGMgPSBzZWxmLmNo\naWxkcmVuWzBdLm1hdGNoKGwsIGMpCiAgICAgICAgICAgIHRpbWVzICs9IDEgaWYgbWF0Y2hlZCBl\nbHNlIDAKICAgICAgICAgICAgaWYgbF8gPT0gbDoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAg\nICAgICAgIGxfID0gbAogICAgICAgIGlmIHRpbWVzID49IDE6CiAgICAgICAgICAgIHJldHVybiBU\ncnVlLCBsLCBjCiAgICAgICAgcmV0dXJuIEZhbHNlLCBsZWZ0LCBjb2xsZWN0ZWQKCgpjbGFzcyBF\naXRoZXIoUGFycmVudFBhdHRlcm4pOgoKICAgIGRlZiBtYXRjaChzZWxmLCBsZWZ0LCBjb2xsZWN0\nZWQ9Tm9uZSk6CiAgICAgICAgY29sbGVjdGVkID0gW10gaWYgY29sbGVjdGVkIGlzIE5vbmUgZWxz\nZSBjb2xsZWN0ZWQKICAgICAgICBvdXRjb21lcyA9IFtdCiAgICAgICAgZm9yIHAgaW4gc2VsZi5j\naGlsZHJlbjoKICAgICAgICAgICAgbWF0Y2hlZCwgXywgXyA9IG91dGNvbWUgPSBwLm1hdGNoKGxl\nZnQsIGNvbGxlY3RlZCkKICAgICAgICAgICAgaWYgbWF0Y2hlZDoKICAgICAgICAgICAgICAgIG91\ndGNvbWVzLmFwcGVuZChvdXRjb21lKQogICAgICAgIGlmIG91dGNvbWVzOgogICAgICAgICAgICBy\nZXR1cm4gbWluKG91dGNvbWVzLCBrZXk9bGFtYmRhIG91dGNvbWU6IGxlbihvdXRjb21lWzFdKSkK\nICAgICAgICByZXR1cm4gRmFsc2UsIGxlZnQsIGNvbGxlY3RlZAoKCmNsYXNzIFRva2VuU3RyZWFt\nKGxpc3QpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzb3VyY2UsIGVycm9yKToKICAgICAgICBz\nZWxmICs9IHNvdXJjZS5zcGxpdCgpIGlmIGhhc2F0dHIoc291cmNlLCAnc3BsaXQnKSBlbHNlIHNv\ndXJjZQogICAgICAgIHNlbGYuZXJyb3IgPSBlcnJvcgoKICAgIGRlZiBtb3ZlKHNlbGYpOgogICAg\nICAgIHJldHVybiBzZWxmLnBvcCgwKSBpZiBsZW4oc2VsZikgZWxzZSBOb25lCgogICAgZGVmIGN1\ncnJlbnQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGZbMF0gaWYgbGVuKHNlbGYpIGVsc2UgTm9u\nZQoKCmRlZiBwYXJzZV9sb25nKHRva2Vucywgb3B0aW9ucyk6CiAgICByYXcsIGVxLCB2YWx1ZSA9\nIHRva2Vucy5tb3ZlKCkucGFydGl0aW9uKCc9JykKICAgIHZhbHVlID0gTm9uZSBpZiBlcSA9PSB2\nYWx1ZSA9PSAnJyBlbHNlIHZhbHVlCiAgICBvcHQgPSBbbyBmb3IgbyBpbiBvcHRpb25zIGlmIG8u\nbG9uZyBhbmQgby5sb25nID09IHJhd10KICAgIGlmIHRva2Vucy5lcnJvciBpcyBEb2NvcHRFeGl0\nIGFuZCBvcHQgPT0gW106CiAgICAgICAgb3B0ID0gW28gZm9yIG8gaW4gb3B0aW9ucyBpZiBvLmxv\nbmcgYW5kIG8ubG9uZy5zdGFydHN3aXRoKHJhdyldCiAgICBpZiBsZW4ob3B0KSA8IDE6CiAgICAg\nICAgaWYgdG9rZW5zLmVycm9yIGlzIERvY29wdEV4aXQ6CiAgICAgICAgICAgIHJhaXNlIHRva2Vu\ncy5lcnJvcignJXMgaXMgbm90IHJlY29nbml6ZWQnICUgcmF3KQogICAgICAgIGVsc2U6CiAgICAg\nICAgICAgIG8gPSBPcHRpb24oTm9uZSwgcmF3LCAoMSBpZiBlcSA9PSAnPScgZWxzZSAwKSkKICAg\nICAgICAgICAgb3B0aW9ucy5hcHBlbmQobykKICAgICAgICAgICAgcmV0dXJuIFtvXQogICAgaWYg\nbGVuKG9wdCkgPiAxOgogICAgICAgIHJhaXNlIHRva2Vucy5lcnJvcignJXMgaXMgbm90IGEgdW5p\ncXVlIHByZWZpeDogJXM/JyAlCiAgICAgICAgICAgICAgICAgICAgICAgICAocmF3LCAnLCAnLmpv\naW4oJyVzJyAlIG8ubG9uZyBmb3IgbyBpbiBvcHQpKSkKICAgIG8gPSBvcHRbMF0KICAgIG9wdCA9\nIE9wdGlvbihvLnNob3J0LCBvLmxvbmcsIG8uYXJnY291bnQsIG8udmFsdWUpCiAgICBpZiBvcHQu\nYXJnY291bnQgPT0gMToKICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOgogICAgICAgICAgICBpZiB0\nb2tlbnMuY3VycmVudCgpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSB0b2tlbnMuZXJy\nb3IoJyVzIHJlcXVpcmVzIGFyZ3VtZW50JyAlIG9wdC5uYW1lKQogICAgICAgICAgICB2YWx1ZSA9\nIHRva2Vucy5tb3ZlKCkKICAgIGVsaWYgdmFsdWUgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2Ug\ndG9rZW5zLmVycm9yKCclcyBtdXN0IG5vdCBoYXZlIGFuIGFyZ3VtZW50JyAlIG9wdC5uYW1lKQog\nICAgaWYgdG9rZW5zLmVycm9yIGlzIERvY29wdEV4aXQ6CiAgICAgICAgb3B0LnZhbHVlID0gdmFs\ndWUgb3IgVHJ1ZQogICAgZWxzZToKICAgICAgICBvcHQudmFsdWUgPSBOb25lIGlmIHZhbHVlIGVs\nc2UgRmFsc2UKICAgIHJldHVybiBbb3B0XQoKCmRlZiBwYXJzZV9zaG9ydHModG9rZW5zLCBvcHRp\nb25zKToKICAgIHJhdyA9IHRva2Vucy5tb3ZlKClbMTpdCiAgICBwYXJzZWQgPSBbXQogICAgd2hp\nbGUgcmF3ICE9ICcnOgogICAgICAgIG9wdCA9IFtvIGZvciBvIGluIG9wdGlvbnMKICAgICAgICAg\nICAgICAgaWYgby5zaG9ydCBhbmQgby5zaG9ydC5sc3RyaXAoJy0nKS5zdGFydHN3aXRoKHJhd1sw\nXSldCiAgICAgICAgaWYgbGVuKG9wdCkgPiAxOgogICAgICAgICAgICByYWlzZSB0b2tlbnMuZXJy\nb3IoJy0lcyBpcyBzcGVjaWZpZWQgYW1iaWd1b3VzbHkgJWQgdGltZXMnICUKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKHJhd1swXSwgbGVuKG9wdCkpKQogICAgICAgIGlmIGxlbihvcHQp\nIDwgMToKICAgICAgICAgICAgaWYgdG9rZW5zLmVycm9yIGlzIERvY29wdEV4aXQ6CiAgICAgICAg\nICAgICAgICByYWlzZSB0b2tlbnMuZXJyb3IoJy0lcyBpcyBub3QgcmVjb2duaXplZCcgJSByYXdb\nMF0pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBvID0gT3B0aW9uKCctJyArIHJh\nd1swXSwgTm9uZSkKICAgICAgICAgICAgICAgIG9wdGlvbnMuYXBwZW5kKG8pCiAgICAgICAgICAg\nICAgICBwYXJzZWQuYXBwZW5kKG8pCiAgICAgICAgICAgICAgICByYXcgPSByYXdbMTpdCiAgICAg\nICAgICAgICAgICBjb250aW51ZQogICAgICAgIG8gPSBvcHRbMF0KICAgICAgICBvcHQgPSBPcHRp\nb24oby5zaG9ydCwgby5sb25nLCBvLmFyZ2NvdW50LCBvLnZhbHVlKQogICAgICAgIHJhdyA9IHJh\nd1sxOl0KICAgICAgICBpZiBvcHQuYXJnY291bnQgPT0gMDoKICAgICAgICAgICAgdmFsdWUgPSBU\ncnVlIGlmIHRva2Vucy5lcnJvciBpcyBEb2NvcHRFeGl0IGVsc2UgRmFsc2UKICAgICAgICBlbHNl\nOgogICAgICAgICAgICBpZiByYXcgPT0gJyc6CiAgICAgICAgICAgICAgICBpZiB0b2tlbnMuY3Vy\ncmVudCgpIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgdG9rZW5zLmVycm9yKCct\nJXMgcmVxdWlyZXMgYXJndW1lbnQnICUgb3B0LnNob3J0WzBdKQogICAgICAgICAgICAgICAgcmF3\nID0gdG9rZW5zLm1vdmUoKQogICAgICAgICAgICB2YWx1ZSwgcmF3ID0gcmF3LCAnJwogICAgICAg\nIGlmIHRva2Vucy5lcnJvciBpcyBEb2NvcHRFeGl0OgogICAgICAgICAgICBvcHQudmFsdWUgPSB2\nYWx1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9wdC52YWx1ZSA9IE5vbmUgaWYgdmFsdWUg\nZWxzZSBGYWxzZQogICAgICAgIHBhcnNlZC5hcHBlbmQob3B0KQogICAgcmV0dXJuIHBhcnNlZAoK\nCmRlZiBwYXJzZV9wYXR0ZXJuKHNvdXJjZSwgb3B0aW9ucyk6CiAgICB0b2tlbnMgPSBUb2tlblN0\ncmVhbShyZS5zdWIocicoW1xbXF1cKFwpXHxdfFwuXC5cLiknLCByJyBcMSAnLCBzb3VyY2UpLAog\nICAgICAgICAgICAgICAgICAgICAgICAgRG9jb3B0TGFuZ3VhZ2VFcnJvcikKICAgIHJlc3VsdCA9\nIHBhcnNlX2V4cHIodG9rZW5zLCBvcHRpb25zKQogICAgaWYgdG9rZW5zLmN1cnJlbnQoKSBpcyBu\nb3QgTm9uZToKICAgICAgICByYWlzZSB0b2tlbnMuZXJyb3IoJ3VuZXhwZWN0ZWQgZW5kaW5nOiAl\ncicgJSAnICcuam9pbih0b2tlbnMpKQogICAgcmV0dXJuIFJlcXVpcmVkKCpyZXN1bHQpCgoKZGVm\nIHBhcnNlX2V4cHIodG9rZW5zLCBvcHRpb25zKToKICAgICIiImV4cHIgOjo9IHNlcSAoICd8JyBz\nZXEgKSogOyIiIgogICAgc2VxID0gcGFyc2Vfc2VxKHRva2Vucywgb3B0aW9ucykKICAgIGlmIHRv\na2Vucy5jdXJyZW50KCkgIT0gJ3wnOgogICAgICAgIHJldHVybiBzZXEKICAgIHJlc3VsdCA9IFtS\nZXF1aXJlZCgqc2VxKV0gaWYgbGVuKHNlcSkgPiAxIGVsc2Ugc2VxCiAgICB3aGlsZSB0b2tlbnMu\nY3VycmVudCgpID09ICd8JzoKICAgICAgICB0b2tlbnMubW92ZSgpCiAgICAgICAgc2VxID0gcGFy\nc2Vfc2VxKHRva2Vucywgb3B0aW9ucykKICAgICAgICByZXN1bHQgKz0gW1JlcXVpcmVkKCpzZXEp\nXSBpZiBsZW4oc2VxKSA+IDEgZWxzZSBzZXEKICAgIHJldHVybiBbRWl0aGVyKCpyZXN1bHQpXSBp\nZiBsZW4ocmVzdWx0KSA+IDEgZWxzZSByZXN1bHQKCgpkZWYgcGFyc2Vfc2VxKHRva2Vucywgb3B0\naW9ucyk6CiAgICAiIiJzZXEgOjo9ICggYXRvbSBbICcuLi4nIF0gKSogOyIiIgogICAgcmVzdWx0\nID0gW10KICAgIHdoaWxlIHRva2Vucy5jdXJyZW50KCkgbm90IGluIFtOb25lLCAnXScsICcpJywg\nJ3wnXToKICAgICAgICBhdG9tID0gcGFyc2VfYXRvbSh0b2tlbnMsIG9wdGlvbnMpCiAgICAgICAg\naWYgdG9rZW5zLmN1cnJlbnQoKSA9PSAnLi4uJzoKICAgICAgICAgICAgYXRvbSA9IFtPbmVPck1v\ncmUoKmF0b20pXQogICAgICAgICAgICB0b2tlbnMubW92ZSgpCiAgICAgICAgcmVzdWx0ICs9IGF0\nb20KICAgIHJldHVybiByZXN1bHQKCgpkZWYgcGFyc2VfYXRvbSh0b2tlbnMsIG9wdGlvbnMpOgog\nICAgIiIiYXRvbSA6Oj0gJygnIGV4cHIgJyknIHwgJ1snIGV4cHIgJ10nIHwgJ29wdGlvbnMnCiAg\nICAgICAgICAgICB8IGxvbmcgfCBzaG9ydHMgfCBhcmd1bWVudCB8IGNvbW1hbmQgOwogICAgIiIi\nCiAgICB0b2tlbiA9IHRva2Vucy5jdXJyZW50KCkKICAgIHJlc3VsdCA9IFtdCiAgICBpZiB0b2tl\nbiBpbiAnKFsnOgogICAgICAgIHRva2Vucy5tb3ZlKCkKICAgICAgICBtYXRjaGluZywgcGF0dGVy\nbiA9IHsnKCc6IFsnKScsIFJlcXVpcmVkXSwgJ1snOiBbJ10nLCBPcHRpb25hbF19W3Rva2VuXQog\nICAgICAgIHJlc3VsdCA9IHBhdHRlcm4oKnBhcnNlX2V4cHIodG9rZW5zLCBvcHRpb25zKSkKICAg\nICAgICBpZiB0b2tlbnMubW92ZSgpICE9IG1hdGNoaW5nOgogICAgICAgICAgICByYWlzZSB0b2tl\nbnMuZXJyb3IoInVubWF0Y2hlZCAnJXMnIiAlIHRva2VuKQogICAgICAgIHJldHVybiBbcmVzdWx0\nXQogICAgZWxpZiB0b2tlbiA9PSAnb3B0aW9ucyc6CiAgICAgICAgdG9rZW5zLm1vdmUoKQogICAg\nICAgIHJldHVybiBvcHRpb25zCiAgICBlbGlmIHRva2VuLnN0YXJ0c3dpdGgoJy0tJykgYW5kIHRv\na2VuICE9ICctLSc6CiAgICAgICAgcmV0dXJuIHBhcnNlX2xvbmcodG9rZW5zLCBvcHRpb25zKQog\nICAgZWxpZiB0b2tlbi5zdGFydHN3aXRoKCctJykgYW5kIHRva2VuIG5vdCBpbiAoJy0nLCAnLS0n\nKToKICAgICAgICByZXR1cm4gcGFyc2Vfc2hvcnRzKHRva2Vucywgb3B0aW9ucykKICAgIGVsaWYg\ndG9rZW4uc3RhcnRzd2l0aCgnPCcpIGFuZCB0b2tlbi5lbmRzd2l0aCgnPicpIG9yIHRva2VuLmlz\ndXBwZXIoKToKICAgICAgICByZXR1cm4gW0FyZ3VtZW50KHRva2Vucy5tb3ZlKCkpXQogICAgZWxz\nZToKICAgICAgICByZXR1cm4gW0NvbW1hbmQodG9rZW5zLm1vdmUoKSldCgoKZGVmIHBhcnNlX2Fy\nZ3Yoc291cmNlLCBvcHRpb25zKToKICAgIHRva2VucyA9IFRva2VuU3RyZWFtKHNvdXJjZSwgRG9j\nb3B0RXhpdCkKICAgIHBhcnNlZCA9IFtdCiAgICB3aGlsZSB0b2tlbnMuY3VycmVudCgpIGlzIG5v\ndCBOb25lOgogICAgICAgIGlmIHRva2Vucy5jdXJyZW50KCkgPT0gJy0tJzoKICAgICAgICAgICAg\ncmV0dXJuIHBhcnNlZCArIFtBcmd1bWVudChOb25lLCB2KSBmb3IgdiBpbiB0b2tlbnNdCiAgICAg\nICAgZWxpZiB0b2tlbnMuY3VycmVudCgpLnN0YXJ0c3dpdGgoJy0tJyk6CiAgICAgICAgICAgIHBh\ncnNlZCArPSBwYXJzZV9sb25nKHRva2Vucywgb3B0aW9ucykKICAgICAgICBlbGlmIHRva2Vucy5j\ndXJyZW50KCkuc3RhcnRzd2l0aCgnLScpIGFuZCB0b2tlbnMuY3VycmVudCgpICE9ICctJzoKICAg\nICAgICAgICAgcGFyc2VkICs9IHBhcnNlX3Nob3J0cyh0b2tlbnMsIG9wdGlvbnMpCiAgICAgICAg\nZWxzZToKICAgICAgICAgICAgcGFyc2VkLmFwcGVuZChBcmd1bWVudChOb25lLCB0b2tlbnMubW92\nZSgpKSkKICAgIHJldHVybiBwYXJzZWQKCgpkZWYgcGFyc2VfZG9jX29wdGlvbnMoZG9jKToKICAg\nIHJldHVybiBbT3B0aW9uLnBhcnNlKCctJyArIHMpIGZvciBzIGluIHJlLnNwbGl0KCdeICotfFxu\nICotJywgZG9jKVsxOl1dCgoKZGVmIHByaW50YWJsZV91c2FnZShkb2MpOgogICAgdXNhZ2Vfc3Bs\naXQgPSByZS5zcGxpdChyJyhbVXVdW1NzXVtBYV1bR2ddW0VlXTopJywgZG9jKQogICAgaWYgbGVu\nKHVzYWdlX3NwbGl0KSA8IDM6CiAgICAgICAgcmFpc2UgRG9jb3B0TGFuZ3VhZ2VFcnJvcignInVz\nYWdlOiIgKGNhc2UtaW5zZW5zaXRpdmUpIG5vdCBmb3VuZC4nKQogICAgaWYgbGVuKHVzYWdlX3Nw\nbGl0KSA+IDM6CiAgICAgICAgcmFpc2UgRG9jb3B0TGFuZ3VhZ2VFcnJvcignTW9yZSB0aGFuIG9u\nZSAidXNhZ2U6IiAoY2FzZS1pbnNlbnNpdGl2ZSkuJykKICAgIHJldHVybiByZS5zcGxpdChyJ1xu\nXHMqXG4nLCAnJy5qb2luKHVzYWdlX3NwbGl0WzE6XSkpWzBdLnN0cmlwKCkKCgpkZWYgZm9ybWFs\nX3VzYWdlKHByaW50YWJsZV91c2FnZSk6CiAgICBwdSA9IHByaW50YWJsZV91c2FnZS5zcGxpdCgp\nWzE6XSAgIyBzcGxpdCBhbmQgZHJvcCAidXNhZ2U6IgogICAgcmV0dXJuICcoICcgKyAnICcuam9p\nbignKSB8ICgnIGlmIHMgPT0gcHVbMF0gZWxzZSBzIGZvciBzIGluIHB1WzE6XSkgKyAnICknCgoK\nZGVmIGV4dHJhcyhoZWxwLCB2ZXJzaW9uLCBvcHRpb25zLCBkb2MpOgogICAgaWYgaGVscCBhbmQg\nYW55KChvLm5hbWUgaW4gKCctaCcsICctLWhlbHAnKSkgYW5kIG8udmFsdWUgZm9yIG8gaW4gb3B0\naW9ucyk6CiAgICAgICAgcHJpbnQoZG9jLnN0cmlwKCkpCiAgICAgICAgZXhpdCgpCiAgICBpZiB2\nZXJzaW9uIGFuZCBhbnkoby5uYW1lID09ICctLXZlcnNpb24nIGFuZCBvLnZhbHVlIGZvciBvIGlu\nIG9wdGlvbnMpOgogICAgICAgIHByaW50KHZlcnNpb24pCiAgICAgICAgZXhpdCgpCgoKY2xhc3Mg\nRGljdChkaWN0KToKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJ3slc30n\nICUgJyxcbiAnLmpvaW4oJyVyOiAlcicgJSBpIGZvciBpIGluIHNvcnRlZChzZWxmLml0ZW1zKCkp\nKQoKCmRlZiBkb2NvcHQoZG9jLCBhcmd2PXN5cy5hcmd2WzE6XSwgaGVscD1UcnVlLCB2ZXJzaW9u\nPU5vbmUpOgogICAgRG9jb3B0RXhpdC51c2FnZSA9IHByaW50YWJsZV91c2FnZShkb2MpCiAgICBv\ncHRpb25zID0gcGFyc2VfZG9jX29wdGlvbnMoZG9jKQogICAgcGF0dGVybiA9IHBhcnNlX3BhdHRl\ncm4oZm9ybWFsX3VzYWdlKERvY29wdEV4aXQudXNhZ2UpLCBvcHRpb25zKQogICAgYXJndiA9IHBh\ncnNlX2FyZ3YoYXJndiwgb3B0aW9ucykKICAgIGV4dHJhcyhoZWxwLCB2ZXJzaW9uLCBhcmd2LCBk\nb2MpCiAgICBtYXRjaGVkLCBsZWZ0LCBjb2xsZWN0ZWQgPSBwYXR0ZXJuLmZpeCgpLm1hdGNoKGFy\nZ3YpCiAgICBpZiBtYXRjaGVkIGFuZCBsZWZ0ID09IFtdOiAgIyBiZXR0ZXIgZXJyb3IgbWVzc2Fn\nZSBpZiBsZWZ0PwogICAgICAgIHJldHVybiBEaWN0KChhLm5hbWUsIGEudmFsdWUpIGZvciBhIGlu\nIChwYXR0ZXJuLmZsYXQgKyBvcHRpb25zICsgY29sbGVjdGVkKSkKICAgIHJhaXNlIERvY29wdEV4\naXQoKQo=\n'))
_chut_modules.append(('ConfigObject', 'IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KaW1wb3J0IG9zCmltcG9ydCB0ZW1wZmlsZQp0cnk6CiAg\nICBmcm9tIENvbmZpZ1BhcnNlciBpbXBvcnQgQ29uZmlnUGFyc2VyCiAgICBQWTMgPSBGYWxzZQpl\neGNlcHQ6CiAgICBmcm9tIGNvbmZpZ3BhcnNlciBpbXBvcnQgQ29uZmlnUGFyc2VyCiAgICBQWTMg\nPSBUcnVlCgpfX2RvY19fID0gIiIiCjpjbGFzczpgfkNvbmZpZ09iamVjdC5Db25maWdPYmplY3Rg\nIGlzIGEgd3JhcHBlciB0byB0aGUgcHl0aG9uIENvbmZpZ1BhcnNlcl8gdG8KYWxsb3cgdG8gYWNj\nZXNzIHNlY3Rpb25zL29wdGlvbnMgd2l0aCBhdHRyaWJ1dGUgbmFtZXM6OgoKICAgID4+PiBmcm9t\nIENvbmZpZ09iamVjdCBpbXBvcnQgQ29uZmlnT2JqZWN0CiAgICA+Pj4gY29uZmlnID0gQ29uZmln\nT2JqZWN0KCkKCiAgICA+Pj4gY29uZmlnLnNlY3Rpb24udmFsdWUgPSAxCgpWYWx1ZXMgYXJlIHN0\nb3JlZCBhcyBzdHJpbmc6OgoKICAgID4+PiBjb25maWcuc2VjdGlvbi52YWx1ZQogICAgJzEnCgpW\nYWx1ZXMgYXJlIHJldHVybmVkIGFzIDpjbGFzczpgfkNvbmZpZ09iamVjdC5Db25maWdWYWx1ZWAg\ndG8gY29udmVydCByZXN1bHQgdG8Kb3RoZXIgdHlwZXM6OgoKICAgID4+PiBjb25maWcuc2VjdGlv\nbi52YWx1ZS5hc19pbnQoKQogICAgMQoKSGVyZSBpcyBob3cgbGlzdCBhcmUgc3RvcmVkOjoKCiAg\nICA+Pj4gY29uZmlnLnNlY3Rpb24udmFsdWUxID0gbGlzdChyYW5nZSgyKSkKICAgID4+PiBwcmlu\ndChjb25maWcuc2VjdGlvbi52YWx1ZTEpCiAgICAwCiAgICAxCiAgICA+Pj4gY29uZmlnLnNlY3Rp\nb24udmFsdWUxLmFzX2xpc3QoKQogICAgWycwJywgJzEnXQoKWW91IGNhbiB1c2Uga2V5czo6Cgog\nICAgPj4+IGNvbmZpZ1snc2V0J11bJ3ZhbHVlJ10gPSAxCiAgICA+Pj4gY29uZmlnWydzZXQnXVsn\ndmFsdWUnXS5hc19pbnQoKQogICAgMQoKWW91IGNhbiBzZXQgYSBzZWN0aW9uIGFzIGRpY3Q6OgoK\nICAgID4+PiBjb25maWcuZGljdCA9IGRpY3QodmFsdWU9MSwgdmFsdWUyPVsnMCcsICcxJ10pCiAg\nICA+Pj4gY29uZmlnLmRpY3QudmFsdWUuYXNfaW50KCkKICAgIDEKICAgID4+PiBjb25maWcuZGlj\ndC52YWx1ZTIuYXNfbGlzdCgpCiAgICBbJzAnLCAnMSddCgpVcGRhdGUgaXQ6OgoKICAgID4+PiBj\nb25maWcuZGljdC51cGRhdGUodmFsdWUyPVsxLCAyXSkKICAgID4+PiBjb25maWcuZGljdC52YWx1\nZTIuYXNfbGlzdCgpCiAgICBbJzEnLCAnMiddCgpTZWUgd2hhdCB5b3VyIHNlY3Rpb24gbG9vayBs\naWtlOjoKCiAgICA+Pj4gY29uZmlnWydzZXQnXQogICAgeyd2YWx1ZSc6ICcxJ30KCgpEZWxldGUg\nb3B0aW9uczo6CgogICAgPj4+IGRlbCBjb25maWdbJ3NldCddLnZhbHVlCiAgICA+Pj4gY29uZmln\nWydzZXQnXQogICAge30KClBsYXlpbmcgd2l0aCBmaWxlczo6CgogICAgPj4+IGZpbGVuYW1lPW9z\nLnBhdGguam9pbih0ZW1wZmlsZS5nZXR0ZW1wZGlyKCksICdjb25maWcuaW5pJykKICAgID4+PiBj\nb25maWcgPSBDb25maWdPYmplY3QoZmlsZW5hbWU9ZmlsZW5hbWUpCiAgICA+Pj4gY29uZmlnLnNl\nY3Rpb24gPSBkaWN0KHZhbHVlPTEpCiAgICA+Pj4gY29uZmlnLndyaXRlKCkKCiAgICA+Pj4gY29u\nZmlnID0gQ29uZmlnT2JqZWN0KGZpbGVuYW1lPWZpbGVuYW1lKQogICAgPj4+IGNvbmZpZy5zZWN0\naW9uLnZhbHVlLmFzX2ludCgpCiAgICAxCgo6OgoKICAgID4+PiBvcy5yZW1vdmUoZmlsZW5hbWUp\nCgoiIiIKCl9fYWxsX18gPSAoJ0NvbmZpZ09iamVjdCcsICdjb25maWdfbW9kdWxlJywgJ09iamVj\ndCcpCgpjbGFzcyBDb25maWdWYWx1ZShzdHIpOgoKICAgIGRlZiBhc19pbnQoc2VsZik6CiAgICAg\nICAgIiIiY29udmVydCB2YWx1ZSB0byBpbnQiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJl\ndHVybiBpbnQoc2VsZikKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICByYWlz\nZSBUeXBlRXJyb3IoJyVzIGlzIG5vdCBhIHZhbGlkIGludCcgJSBzZWxmKQoKICAgIGRlZiBhc19m\nbG9hdChzZWxmKToKICAgICAgICAiIiJjb252ZXJ0IHZhbHVlIHRvIGZsb2F0IiIiCiAgICAgICAg\ndHJ5OgogICAgICAgICAgICByZXR1cm4gZmxvYXQoc2VsZikKICAgICAgICBleGNlcHQgVHlwZUVy\ncm9yOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoJyVzIGlzIG5vdCBhIHZhbGlkIGZsb2F0\nJyAlIHNlbGYpCgogICAgZGVmIGFzX2xpc3Qoc2VsZiwgc2VwPU5vbmUpOgogICAgICAgICIiImNv\nbnZlcnQgdmFsdWUgdG8gbGlzdDo6CiAgICAgICAgICAgID4+PiBjb25maWcgPSBDb25maWdPYmpl\nY3QoKQogICAgICAgICAgICA+Pj4gY29uZmlnLmxpc3RlcyA9IGRpY3QobGlzdGU9WzAsIDFdLCBz\ndHJpbmc9JzE7MjszJykKCiAgICAgICAgICAgID4+PiBwcmludChjb25maWcubGlzdGVzLmxpc3Rl\nKQogICAgICAgICAgICAwCiAgICAgICAgICAgIDEKICAgICAgICAgICAgPj4+IGNvbmZpZy5saXN0\nZXMubGlzdGUuYXNfbGlzdCgpCiAgICAgICAgICAgIFsnMCcsICcxJ10KICAgICAgICAgICAgPj4+\nIGNvbmZpZy5saXN0ZXMuc3RyaW5nLmFzX2xpc3Qoc2VwPSc7JykKICAgICAgICAgICAgWycxJywg\nJzInLCAnMyddCiAgICAgICAgIiIiCiAgICAgICAgaWYgc2VwIGlzIE5vbmUgYW5kICdcbicgaW4g\nc2VsZjoKICAgICAgICAgICAgc2VwID0gJ1xuJwogICAgICAgIHJldHVybiBbQ29uZmlnVmFsdWUo\ndikgZm9yIHYgaW4gc2VsZi5zcGxpdChzZXApIGlmIHZdCgogICAgZGVmIGFzX2Jvb2woc2VsZiwg\ndHJ1ZT1UcnVlLCBmYWxzZT1GYWxzZSk6CiAgICAgICAgIiIiY29udmVydCB2YWx1ZSB0byBib29s\nOjoKCiAgICAgICAgICAgID4+PiBjb25maWcgPSBDb25maWdPYmplY3QoKQogICAgICAgICAgICA+\nPj4gY29uZmlnLmJvb2xzID0gZGljdCh0cnVlPVRydWUsIGZhbHNlPUZhbHNlKQoKICAgICAgICAg\nICAgPj4+IGNvbmZpZy5ib29scy50cnVlCiAgICAgICAgICAgICd0cnVlJwogICAgICAgICAgICA+\nPj4gY29uZmlnLmJvb2xzLnRydWUuYXNfYm9vbCgpCiAgICAgICAgICAgIFRydWUKICAgICAgICAg\nICAgPj4+IGNvbmZpZy5ib29scy50cnVlLmFzX2Jvb2woJ29uJywgJ29mZicpCiAgICAgICAgICAg\nICdvbicKCiAgICAgICAgICAgID4+PiBjb25maWcuYm9vbHMuZmFsc2UKICAgICAgICAgICAgJ2Zh\nbHNlJwogICAgICAgICAgICA+Pj4gY29uZmlnLmJvb2xzLmZhbHNlLmFzX2Jvb2woKQogICAgICAg\nICAgICBGYWxzZQogICAgICAgICAgICA+Pj4gY29uZmlnLmJvb2xzLmZhbHNlLmFzX2Jvb2woJ29u\nJywgJ29mZicpCiAgICAgICAgICAgICdvZmYnCgogICAgICAgICAgICA+Pj4gY29uZmlnLmJvb2xz\nLm5vbmUuYXNfYm9vbCgpCiAgICAgICAgICAgIEZhbHNlCgogICAgICAgICIiIgogICAgICAgIGlm\nIHNlbGYubG93ZXIoKSBpbiAoJzEnLCAneScsICd0cnVlJywgJ3llcycsICdvbicpOgogICAgICAg\nICAgICByZXR1cm4gdHJ1ZQogICAgICAgIGVsaWYgc2VsZi5sb3dlcigpIGluICgnMCcsICdmJywg\nJ2ZhbHNlJywgJ25vJywgJ29mZicpOgogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICBl\nbGlmIG5vdCBzZWxmOgogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICBlbHNlOgogICAg\nICAgICAgICByYWlzZSBUeXBlRXJyb3IoJyVzIGlzIG5vdCBhIHZhbGlkIGJvb2wnICUgc2VsZikK\nCiAgICBkZWYgX19odG1sX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHJlcHIoc2VsZikKCgpkZWYg\nX0NvbmZpZ1ZhbHVlKHZhbHVlPScnKToKICAgICIiIgogICAgICAgID4+PiBfQ29uZmlnVmFsdWUo\nMSkKICAgICAgICAnMScKICAgICAgICA+Pj4gX0NvbmZpZ1ZhbHVlKC4xKQogICAgICAgICcwLjEn\nCiAgICAgICAgPj4+IF9Db25maWdWYWx1ZShUcnVlKQogICAgICAgICd0cnVlJwogICAgICAgID4+\nPiBwcmludChfQ29uZmlnVmFsdWUobGlzdChyYW5nZSgyKSkpKQogICAgICAgIDAKICAgICAgICAx\nCiAgICAiIiIKICAgIGlmIHZhbHVlIGlzIFRydWUgb3IgdmFsdWUgaXMgRmFsc2U6CiAgICAgICAg\ndmFsdWUgPSB2YWx1ZSBhbmQgJ3RydWUnIG9yICdmYWxzZScKICAgIGVsaWYgaXNpbnN0YW5jZSh2\nYWx1ZSwgc2V0KSBvciBcCiAgICAgICAgIGlzaW5zdGFuY2UodmFsdWUsIGxpc3QpIG9yIFwKICAg\nICAgICAgaXNpbnN0YW5jZSh2YWx1ZSwgdHVwbGUpOgogICAgICAgIHZhbHVlID0gJ1xuJy5qb2lu\nKFtzdHIodikgZm9yIHYgaW4gdmFsdWVdKQogICAgcmV0dXJuIENvbmZpZ1ZhbHVlKHZhbHVlKQoK\nY2xhc3MgQ29uZmlnRGljdChvYmplY3QpOgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXJlbnQs\nIHNlY3Rpb24pOgogICAgICAgIHNlbGYuX19wYXJlbnQgPSBwYXJlbnQKICAgICAgICBzZWxmLl9f\nc2VjdGlvbiA9IHNlY3Rpb24KCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0ciwgZGVmYXVs\ndD1Ob25lKToKICAgICAgICByZXR1cm4gc2VsZi5nZXQoYXR0ciwgTm9uZSkKCiAgICBkZWYgX19n\nZXRpdGVtX18oc2VsZiwgYXR0cik6CiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0KGF0dHIsIE5vbmUp\nCgogICAgZGVmIGdldChzZWxmLCBhdHRyLCBkZWZhdWx0PU5vbmUpOgogICAgICAgICIiImRpY3Qg\nYXBpIiIiCiAgICAgICAgY29uZmlnID0gc2VsZi5fX3BhcmVudAogICAgICAgIHNlY3Rpb24gPSBz\nZWxmLl9fc2VjdGlvbgogICAgICAgIGlmIGNvbmZpZy5oYXNfc2VjdGlvbihzZWN0aW9uKSBhbmQg\nY29uZmlnLmhhc19vcHRpb24oc2VjdGlvbiwgYXR0cik6CiAgICAgICAgICAgIHZhbHVlID0gY29u\nZmlnLmdldChzZWN0aW9uLCBhdHRyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHZhbHVlID0g\nZGVmYXVsdAogICAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgICAgIHZhbHVlID0gX0Nv\nbmZpZ1ZhbHVlKCkKICAgICAgICBlbGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBDb25maWdWYWx1\nZSk6CiAgICAgICAgICAgIHZhbHVlID0gX0NvbmZpZ1ZhbHVlKHZhbHVlKQogICAgICAgIHJldHVy\nbiB2YWx1ZQoKICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBhdHRyLCB2YWx1ZSk6CiAgICAgICAg\naWYgYXR0ci5zdGFydHN3aXRoKCdfQ29uZmlnRGljdF9fJyk6CiAgICAgICAgICAgIG9iamVjdC5f\nX3NldGF0dHJfXyhzZWxmLCBhdHRyLCB2YWx1ZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBz\nZWxmLl9fc2V0aXRlbV9fKGF0dHIsIHZhbHVlKQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBh\ndHRyLCB2YWx1ZSk6CiAgICAgICAgY29uZmlnID0gc2VsZi5fX3BhcmVudAogICAgICAgIGlmIG5v\ndCBjb25maWcuaGFzX3NlY3Rpb24oc2VsZi5fX3NlY3Rpb24pOgogICAgICAgICAgICBjb25maWcu\nYWRkX3NlY3Rpb24oc2VsZi5fX3NlY3Rpb24pCiAgICAgICAgaWYgdmFsdWUgaXMgbm90IE5vbmUg\nYW5kIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBDb25maWdWYWx1ZSk6CiAgICAgICAgICAgIHZhbHVl\nID0gX0NvbmZpZ1ZhbHVlKHZhbHVlKQogICAgICAgIGNvbmZpZy5zZXQoc2VsZi5fX3NlY3Rpb24s\nIGF0dHIsIHZhbHVlKQoKICAgIGRlZiBfX2RlbGF0dHJfXyhzZWxmLCBhdHRyKToKICAgICAgICBj\nb25maWcgPSBzZWxmLl9fcGFyZW50CiAgICAgICAgaWYgY29uZmlnLmhhc19zZWN0aW9uKHNlbGYu\nX19zZWN0aW9uKToKICAgICAgICAgICAgaWYgY29uZmlnLmhhc19vcHRpb24oc2VsZi5fX3NlY3Rp\nb24sIGF0dHIpOgogICAgICAgICAgICAgICAgY29uZmlnLnJlbW92ZV9vcHRpb24oc2VsZi5fX3Nl\nY3Rpb24sIGF0dHIpCgogICAgX19kZWxpdGVtX18gPSBfX2RlbGF0dHJfXwoKICAgIGRlZiBpdGVt\ncyhzZWxmKToKICAgICAgICAiIiJkaWN0IGFwaSIiIgogICAgICAgIGlmIHNlbGYuX19wYXJlbnQu\naGFzX3NlY3Rpb24oc2VsZi5fX3NlY3Rpb24pOgogICAgICAgICAgICBpdGVtcyA9IHNlbGYuX19w\nYXJlbnQuaXRlbXMoc2VsZi5fX3NlY3Rpb24pCiAgICAgICAgICAgIHJldHVybiBbKGssIF9Db25m\naWdWYWx1ZSh2KSkgZm9yIGssIHYgaW4gaXRlbXNdCiAgICAgICAgcmV0dXJuIFtdCgogICAgZGVm\nIGtleXMoc2VsZik6CiAgICAgICAgIiIiZGljdCBhcGkiIiIKICAgICAgICBpZiBzZWxmLl9fcGFy\nZW50Lmhhc19zZWN0aW9uKHNlbGYuX19zZWN0aW9uKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYu\nX19wYXJlbnQub3B0aW9ucyhzZWxmLl9fc2VjdGlvbikKICAgICAgICByZXR1cm4gW10KCiAgICBk\nZWYgdXBkYXRlKHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIiIiZGljdCBhcGkiIiIK\nICAgICAgICB2YWx1ZXMgPSB7fQogICAgICAgIGZvciBhcmcgaW4gYXJnczoKICAgICAgICAgICAg\ndmFsdWVzLnVwZGF0ZShhcmcpCiAgICAgICAgdmFsdWVzLnVwZGF0ZShrd2FyZ3MpCiAgICAgICAg\nY29uZmlnID0gc2VsZi5fX3BhcmVudAogICAgICAgIGlmIG5vdCBjb25maWcuaGFzX3NlY3Rpb24o\nc2VsZi5fX3NlY3Rpb24pOgogICAgICAgICAgICBjb25maWcuYWRkX3NlY3Rpb24oc2VsZi5fX3Nl\nY3Rpb24pCiAgICAgICAgZm9yIGF0dHIsIHZhbHVlIGluIHZhbHVlcy5pdGVtcygpOgogICAgICAg\nICAgICBpZiB2YWx1ZSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UodmFsdWUsIENvbmZp\nZ1ZhbHVlKToKICAgICAgICAgICAgICAgIHZhbHVlID0gX0NvbmZpZ1ZhbHVlKHZhbHVlKQogICAg\nICAgICAgICBjb25maWcuc2V0KHNlbGYuX19zZWN0aW9uLCBhdHRyLCB2YWx1ZSkKCiAgICBkZWYg\nX19jb250YWluc19fKHNlbGYsIG90aGVyKToKICAgICAgICBjb25maWcgPSBzZWxmLl9fcGFyZW50\nCiAgICAgICAgc2VjdGlvbiA9IHNlbGYuX19zZWN0aW9uCiAgICAgICAgaWYgY29uZmlnLmhhc19z\nZWN0aW9uKHNlY3Rpb24pIGFuZCBjb25maWcuaGFzX29wdGlvbihzZWN0aW9uLCBvdGhlcik6CiAg\nICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIF9fcmVw\ncl9fKHNlbGYpOgogICAgICAgIHJldHVybiByZXByKGRpY3Qoc2VsZi5pdGVtcygpKSkKCiAgICBf\nX2h0bWxfXyA9IF9fcmVwcl9fCgpjbGFzcyBPYmplY3QoZGljdCk6CiAgICBkZWYgX19nZXRhdHRy\nX18oc2VsZiwgYXR0cik6CiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0KGF0dHIpCiAgICBkZWYgX19z\nZXRhdHRyX18oc2VsZiwgYXR0ciwgdmFsdWUpOgogICAgICAgIHNlbGZbYXR0cl0gPSB2YWx1ZQoK\nCmNsYXNzIENvbmZpZ09iamVjdChDb25maWdQYXJzZXIsIG9iamVjdCk6CiAgICAiIiJDb25maWdQ\nYXJzZXJfIHdyYXBwZXIKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKipr\nd2FyZ3MpOgogICAgICAgIHNlbGYuX19jb25maWcgPSBPYmplY3QoKQogICAgICAgIHNlbGYuZmls\nZW5hbWUgPSBOb25lCiAgICAgICAgaWYgJ2ZpbGVuYW1lJyBpbiBrd2FyZ3M6CiAgICAgICAgICAg\nIHNlbGYuZmlsZW5hbWUgPSBrd2FyZ3MucG9wKCdmaWxlbmFtZScpCiAgICAgICAgQ29uZmlnUGFy\nc2VyLl9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3YXJncykKICAgICAgICBpZiBzZWxmLmZpbGVu\nYW1lIGFuZCBvcy5wYXRoLmlzZmlsZShzZWxmLmZpbGVuYW1lKToKICAgICAgICAgICAgc2VsZi5y\nZWFkKHNlbGYuZmlsZW5hbWUpCgogICAgZGVmIHdyaXRlKHNlbGYsIGZkPU5vbmUsIHNwYWNlX2Fy\nb3VuZF9kZWxpbWl0ZXJzPVRydWUpOgogICAgICAgICIiIlNhdmUgdG8gYGBDb25maWdPYmplY3Qu\nZmlsZW5hbWVgYCBpZiBubyBmZCBpcyBwcm92aWRlZCIiIgogICAgICAgIGlmIGZkIGlzIE5vbmU6\nCiAgICAgICAgICAgIGZkID0gb3BlbihzZWxmLmZpbGVuYW1lLCAndycpCiAgICAgICAgICAgIGlm\nIFBZMzoKICAgICAgICAgICAgICAgIENvbmZpZ1BhcnNlci53cml0ZShzZWxmLCBmZCwKICAgICAg\nICAgICAgICAgICAgICBzcGFjZV9hcm91bmRfZGVsaW1pdGVycz1zcGFjZV9hcm91bmRfZGVsaW1p\ndGVycykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIENvbmZpZ1BhcnNlci53cml0\nZShzZWxmLCBmZCkKICAgICAgICAgICAgZmQuY2xvc2UoKQogICAgICAgIGVsc2U6CiAgICAgICAg\nICAgIGlmIFBZMzoKICAgICAgICAgICAgICAgIENvbmZpZ1BhcnNlci53cml0ZShzZWxmLCBmZCwK\nICAgICAgICAgICAgICAgICAgICBzcGFjZV9hcm91bmRfZGVsaW1pdGVycz1zcGFjZV9hcm91bmRf\nZGVsaW1pdGVycykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIENvbmZpZ1BhcnNl\nci53cml0ZShzZWxmLCBmZCkKCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6CiAgICAg\nICAgcmV0dXJuIENvbmZpZ0RpY3Qoc2VsZiwgYXR0cikKCiAgICBfX2dldGl0ZW1fXyA9IF9fZ2V0\nYXR0cl9fCgogICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIGF0dHIsIHZhbHVlKToKICAgICAgICBp\nZiBhdHRyLnN0YXJ0c3dpdGgoJ18nKSBvciBpc2luc3RhbmNlKHZhbHVlLCBPYmplY3QpOgogICAg\nICAgICAgICBvYmplY3QuX19zZXRhdHRyX18oc2VsZiwgYXR0ciwgdmFsdWUpCiAgICAgICAgZWxp\nZiBhdHRyIGluICgnZGVmYXVsdF9zZWN0aW9uJywgJ2ZpbGVuYW1lJyk6CiAgICAgICAgICAgIG9i\namVjdC5fX3NldGF0dHJfXyhzZWxmLCBhdHRyLCB2YWx1ZSkKICAgICAgICBlbGlmIHZhbHVlOgog\nICAgICAgICAgICBzZWxmLl9fc2V0aXRlbV9fKGF0dHIsIHZhbHVlKQoKICAgIGRlZiBfX3NldGl0\nZW1fXyhzZWxmLCBhdHRyLCB2YWx1ZSk6CiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgZGlj\ndCk6CiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmhhc19zZWN0aW9uKGF0dHIpOgogICAgICAgICAg\nICAgICAgc2VsZi5hZGRfc2VjdGlvbihhdHRyKQogICAgICAgICAgICBzZWN0aW9uID0gZ2V0YXR0\ncihzZWxmLCBhdHRyKQogICAgICAgICAgICBmb3IgaywgdiBpbiB2YWx1ZS5pdGVtcygpOgogICAg\nICAgICAgICAgICAgc2VjdGlvbltrXSA9IHYKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlz\nZSBUeXBlRXJyb3IoJ1ZhbHVlIG11c3QgYmUgYSBkaWN0JykKCiAgICBkZWYgX19kZWxhdHRyX18o\nc2VsZiwgYXR0cik6CiAgICAgICAgaWYgc2VsZi5oYXNfc2VjdGlvbihhdHRyKToKICAgICAgICAg\nICAgc2VsZi5yZW1vdmVfc2VjdGlvbihhdHRyKQoKICAgIF9fZGVsaXRlbV9fID0gX19kZWxhdHRy\nX18KCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBzZWxmLmhh\nc19zZWN0aW9uKG90aGVyKToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4g\nRmFsc2UKCiAgICBkZWYgX19odG1sX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHJlcHIoc2VsZikK\nCmRlZiBjb25maWdfbW9kdWxlKG5hbWUsIGZpbGUsICpmaWxlbmFtZXMsICoqZGVmYXVsdHMpOgog\nICAgIiIiQWxsb3cgdG8gc2V0IGEgOmNsYXNzOmB+Q29uZmlnT2JqZWN0LkNvbmZpZ09iamVjdGAg\nYXMgbW9kdWxlLiBZb3UgaGF2ZQogICAgdG8gYWRkIHRoaXMgdG8gYGB5b3VycHJvamVjdC9jb25m\naWcucHlgYDoKCiAgICAuLiBsaXRlcmFsaW5jbHVkZTo6IC4uL0NvbmZpZ09iamVjdC90ZXN0cy9j\nb25maWcucHkKCiAgICBUaGVuIHlvdSBhcmUgYWJsZSB0byB1c2UgYGBmcm9tIHlvdXJwcm9qZWN0\nIGltcG9ydCBjb25maWdgYCB3aGVyZQogICAgYGBjb25maWdgYCBpcyB0aGUgOmNsYXNzOmB+Q29u\nZmlnT2JqZWN0LkNvbmZpZ09iamVjdGAgaXRzZWxmLgogICAgIiIiCiAgICBjb25maWcgPSBDb25m\naWdPYmplY3QoZGVmYXVsdHM9ZGVmYXVsdHMpCiAgICBjb25maWcuX19uYW1lX18gPSBuYW1lCiAg\nICBjb25maWcuX19maWxlX18gPSBmaWxlCiAgICBjb25maWcuX19wYXRoX18gPSBmaWxlCiAgICBj\nb25maWcucmVhZChmaWxlbmFtZXMpCiAgICBpbXBvcnQgc3lzCiAgICBzeXMubW9kdWxlc1tuYW1l\nXSA9IGNvbmZpZwogICAgcmV0dXJuIGNvbmZpZwoKCg==\n'))
_chut_modules.append(('chut', 'ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCB1bmljb2RlX2xpdGVyYWxzLCBwcmludF9mdW5jdGlvbgpp\nbXBvcnQgb3MKaW1wb3J0IHN5cwppbXBvcnQgc2l4CmltcG9ydCB0aW1lCmltcG9ydCB0eXBlcwpp\nbXBvcnQgYmFzZTY0CmltcG9ydCBzaHV0aWwKaW1wb3J0IGluc3BlY3QKaW1wb3J0IGxvZ2dpbmcK\naW1wb3J0IGZ1bmN0b29scwppbXBvcnQgcG9zaXhwYXRoCmZyb20gc3VicHJvY2VzcyBpbXBvcnQg\nUG9wZW4KZnJvbSBzdWJwcm9jZXNzIGltcG9ydCBQSVBFCmZyb20gc3VicHJvY2VzcyBpbXBvcnQg\nU1RET1VUCmZyb20gY29weSBpbXBvcnQgZGVlcGNvcHkKZnJvbSBDb25maWdPYmplY3QgaW1wb3J0\nIENvbmZpZ09iamVjdApmcm9tIGNvbnRleHRsaWIgaW1wb3J0IGNvbnRleHRtYW5hZ2VyCgpfX2Fs\nbF9fID0gWwogICAgJ2NvbnNvbGVfc2NyaXB0JywgJ3JlcXVpcmVzJywgJ3NoJywgJ2VudicsICdp\nbmknLCAnc3RkaW4nLCAndGVzdCcsCiAgICAnbHMnLCAnY2F0JywgJ2dyZXAnLCAnZmluZCcsICdj\ndXQnLCAndHInLCAnaGVhZCcsICd0YWlsJywgJ3NlZCcsICdhd2snLAogICAgJ25jJywgJ3Bpbmcn\nLCAnbm1hcCcsICdob3N0bmFtZScsICdob3N0JywgJ3NjcCcsICdyc3luYycsICd3Z2V0JywgJ2N1\ncmwnLAogICAgJ2NkJywgJ3doaWNoJywgJ21rdGVtcCcsICdlY2hvJywgJ3djJywKICAgICd0YXIn\nLCAnZ3ppcCcsICdndW56aXAnLCAnemlwJywgJ3VuemlwJywKICAgICd2bGMnLCAnZmZtcGVnJywg\nJ2NvbnZlcnQnLAogICAgJ3ZpcnR1YWxlbnYnLCAncGlwJywKICAgICdnaXQnLCAnaGcnLCAnc3Zu\nJywKICAgICdzc2gnLCAnc3VkbycsCiAgICAncGF0aCcsICdwd2QnLCAgIyBwYXRoIGlzIHBvc2l4\ncGF0aCwgcHdkIHJldHVybiBvcy5nZXRjd2QoKQogICAgJ2VzY2FwZScsICdlJywgICMgZSBpcyBl\nc2NhcGUoKQpdCgpfX25vdF9waXBlZF9fID0gWydjaG1vZCcsICdjcCcsICdta2RpcicsICdtdics\nICdybScsICdybWRpcicsICd0b3VjaCddCgpfX2FsbF9fICs9IF9fbm90X3BpcGVkX18KCmxvZyA9\nIGxvZ2dpbmcuZ2V0TG9nZ2VyKCdjaHV0JykKCmFsaWFzZXMgPSBkaWN0KAogICAgaWZjb25maWc9\nJy9zYmluL2lmY29uZmlnJywKICAgIHN1ZG89Jy91c3IvYmluL3N1ZG8nLAogICAgc3NoPSdzc2gn\nLAogICkKCgpkZWYgY2hlY2tfc3VkbygpOgogICAgc3VkbyA9IGFsaWFzZXMuZ2V0KCdzdWRvJykK\nICAgIGlmIG5vdCBvcy5wYXRoLmlzZmlsZShzdWRvKToKICAgICAgICByYWlzZSBPU0Vycm9yKCdz\ndWRvIGlzIG5vdCBpbnN0YWxsZWQnKQogICAgYXJncyA9IFtzdWRvLCAnLXMnLCAnd2hvYW1pJ10K\nICAgIGt3YXJncyA9IGRpY3Qoc3Rkb3V0PVBJUEUsIHN0ZGVycj1TVERPVVQpCiAgICBsb2cuZGVi\ndWcoJ1BvcGVuKCVyLCAqKiVyKScsIGFyZ3MsIGt3YXJncykKICAgIHdob2FtaSA9IFBvcGVuKGFy\nZ3MsIGVudj1lbnYsICoqa3dhcmdzKQogICAgd2hvYW1pLndhaXQoKQogICAgd2hvYW1pID0gd2hv\nYW1pLnN0ZG91dC5yZWFkKCkuc3RyaXAoKQogICAgaWYgd2hvYW1pICE9IHNpeC5iKCdyb290Jyk6\nCiAgICAgICAgcmFpc2UgT1NFcnJvcignTm90IGFibGUgdG8gcnVuIHN1ZG8uJykKCgpkZWYgZXNj\nYXBlKHZhbHVlKToKICAgIGNoYXJzID0gInwhYCdbXSgpICIKICAgIGVzYyA9ICdcXCcKICAgIGlm\nIGlzaW5zdGFuY2UodmFsdWUsIHNpeC5iaW5hcnlfdHlwZSk6CiAgICAgICAgY2hhcnMgPSBjaGFy\ncy5lbmNvZGUoJ2FzY2lpJykKICAgICAgICBlc2MgPSBlc2MuZW5jb2RlKCdhc2NpaScpCiAgICBm\nb3IgYyBpbiBjaGFyczoKICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoYywgZXNjICsgYykK\nICAgIHJldHVybiB2YWx1ZQoKCmRlZiBpbmkoZmlsZW5hbWUsICoqZGVmYXVsdHMpOgogICAgIiIi\nTG9hZCBhIC5pbmkgZmlsZSBpbiBhIENvbmZpZ09iamVjdC4gRG9udCByYWlzZSBpZiB0aGUgZmls\nZSBkb2VzIG5vdAogICAgZXhpc3QiIiIKICAgIGZvciBrLCB2IGluIGVudi5pdGVtcygpOgogICAg\nICAgIGlmIGsgbm90IGluIGRlZmF1bHRzIGFuZCBpc2luc3RhbmNlKHYsIHNpeC5zdHJpbmdfdHlw\nZXMpOgogICAgICAgICAgICBkZWZhdWx0c1trXSA9IHYKICAgIHJldHVybiBDb25maWdPYmplY3Qo\nZmlsZW5hbWU9ZmlsZW5hbWUsIGRlZmF1bHRzPWRlZmF1bHRzKQoKCmNsYXNzIEVudmlyb24oZGlj\ndCk6CiAgICAiIiJNYW5hZ2Ugb3MuZW52aXJvbiIiIgoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxm\nLCBhdHRyKToKICAgICAgICB2YWx1ZSA9IHNlbGYuZ2V0KGF0dHIudXBwZXIoKSwgTm9uZSkKICAg\nICAgICBpZiBhdHRyLmxvd2VyKCkgaW4gKCdwYXRoJywpOgogICAgICAgICAgICByZXR1cm4gdmFs\ndWUuc3BsaXQob3MucGF0aHNlcCkKICAgICAgICByZXR1cm4gdmFsdWUKCiAgICBkZWYgX19zZXRh\ndHRyX18oc2VsZiwgYXR0ciwgdmFsdWUpOgogICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIChs\naXN0LCB0dXBsZSkpOgogICAgICAgICAgICB2YWx1ZSA9IG9zLnBhdGhzZXAuam9pbih2YWx1ZSkK\nICAgICAgICBzZWxmW2F0dHIudXBwZXIoKV0gPSB2YWx1ZQoKICAgIGRlZiBfX2RlbGF0dHJfXyhz\nZWxmLCBhdHRyKToKICAgICAgICBhdHRyID0gYXR0ci51cHBlcigpCiAgICAgICAgaWYgYXR0ciBp\nbiBzZWxmOgogICAgICAgICAgICBkZWwgc2VsZlthdHRyXQoKICAgIGRlZiBfX2NhbGxfXyhzZWxm\nLCAqKmt3YXJncyk6CiAgICAgICAgZW52aXJvbiA9IHNlbGYuX19jbGFzc19fKHNlbGYuY29weSgp\nKQogICAgICAgIGZvciBrLCB2IGluIGt3YXJncy5pdGVtcygpOgogICAgICAgICAgICBzZXRhdHRy\nKGVudmlyb24sIGssIHYpCiAgICAgICAgcmV0dXJuIGVudmlyb24KCgpjbGFzcyBQaXBlKG9iamVj\ndCk6CiAgICAiIiJBIHBpcGUgb2JqZWN0LiBSZXByZXNlbnQgYSBzZXQgb2Ygb25lIG9yIG1vcmUg\nY29tbWFuZHMuIiIiCgogICAgX2NodXQgPSBOb25lCiAgICBfcGlwZSA9IFRydWUKICAgIF9jbWRf\nYXJncyA9IFtdCiAgICBfc3lzX3N0ZG91dCA9IHN5cy5zdGRvdXQKICAgIF9zeXNfc3RkZXJyID0g\nc3lzLnN0ZGVycgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAg\nICAgIHNlbGYuX2RvbmUgPSBGYWxzZQogICAgICAgIHNlbGYuX3N0ZG91dCA9IE5vbmUKICAgICAg\nICBzZWxmLl9zdGRlcnIgPSBOb25lCiAgICAgICAgc2VsZi5hcmdzID0gbGlzdChhcmdzKQogICAg\nICAgIHNlbGYucHJldmlvdXMgPSBOb25lCiAgICAgICAgc2VsZi5wcm9jZXNzZXMgPSBbXQogICAg\nICAgIGVuY29kaW5nID0ga3dhcmdzLmdldCgnZW5jb2RpbmcnKQogICAgICAgIGlmIG5vdCBlbmNv\nZGluZzoKICAgICAgICAgICAgZW5jb2RpbmcgPSBnZXRhdHRyKHN5cy5zdGRvdXQsICdlbmNvZGlu\nZycsIE5vbmUpIG9yICd1dGY4JwogICAgICAgIHNlbGYuZW5jb2RpbmcgPSBlbmNvZGluZwogICAg\nICAgIHNlbGYua3dhcmdzID0ga3dhcmdzCiAgICAgICAgaWYgJ3NoJyBpbiBrd2FyZ3M6CiAgICAg\nICAgICAgIGt3YXJnc1snc2hlbGwnXSA9IGt3YXJncy5wb3AoJ3NoJykKICAgICAgICBpZiAnY29t\nYmluZV9zdGRlcnInIGluIGt3YXJnczoKICAgICAgICAgICAga3dhcmdzLnBvcCgnY29tYmluZV9z\ndGRlcnInKQogICAgICAgICAgICBrd2FyZ3NbJ3N0ZGVyciddID0gU1RET1VUCiAgICAgICAgaWYg\nJ3BpcGUnIGluIGt3YXJnczoKICAgICAgICAgICAgaWYgbm90IGt3YXJncy5wb3AoJ3BpcGUnKToK\nICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxfcGlwZSgpCiAgICAgICAgZWxpZiBub3Qgc2VsZi5f\ncGlwZToKICAgICAgICAgICAgc2VsZi5fY2FsbF9waXBlKCkKCiAgICBkZWYgX2NhbGxfcGlwZShz\nZWxmKToKICAgICAgICBzZWxmLl9kb25lID0gVHJ1ZQogICAgICAgIHJldCA9IHNlbGYuX19jYWxs\nX18oKQogICAgICAgIGlmIHJldC5mYWlsZWQ6CiAgICAgICAgICAgIHByaW50KHJldC5zdGRlcnIs\nIGZpbGU9c3lzLnN0ZGVycikKCiAgICBAcHJvcGVydHkKICAgIGRlZiByZXR1cm5jb2RlcyhzZWxm\nKToKICAgICAgICAiIiJBIGxpc3Qgb2YgcmV0dXJuIGNvZGVzIG9mIGFsbCBwcm9jZXNzZXMgbGF1\nbmNoZWQgYnkgdGhlIHBpcGUiIiIKICAgICAgICBmb3IgcCBpbiBzZWxmLnByb2Nlc3NlczoKICAg\nICAgICAgICAgcC53YWl0KCkKICAgICAgICBjb2RlcyA9IFtwLnBvbGwoKSBmb3IgcCBpbiBzZWxm\nLnByb2Nlc3Nlc10KICAgICAgICBpZiBzZXQoY29kZXMpID09IHNldChbMF0pOgogICAgICAgICAg\nICByZXR1cm4gW10KICAgICAgICByZXR1cm4gY29kZXMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBm\nYWlsZWQoc2VsZik6CiAgICAgICAgIiIiVHJ1ZSBpZiBvbmUgb3IgbW9yZSBwcm9jZXNzIGZhaWxl\nZCIiIgogICAgICAgIG91dHB1dCA9IHNlbGYuX19jYWxsX18oKQogICAgICAgIHJldHVybiBvdXRw\ndXQuZmFpbGVkCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3VjY2VlZGVkKHNlbGYpOgogICAgICAg\nICIiIlRydWUgaWYgYWxsIHByb2Nlc3NlcyBzdWNjZWVkZWQiIiIKICAgICAgICBvdXRwdXQgPSBz\nZWxmLl9fY2FsbF9fKCkKICAgICAgICBpZiBvdXRwdXQuc3VjY2VlZGVkOgogICAgICAgICAgICBy\nZXR1cm4gb3V0cHV0IG9yIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBAcHJvcGVydHkK\nICAgIGRlZiBzdGRlcnIoc2VsZik6CiAgICAgICAgIiIiY29tYmluZWQgc3RkZXJyIG9mIGFsbCBw\ncm9jZXNzZXMiIiIKICAgICAgICBpZiBzZWxmLl9zdGRlcnIgaXMgTm9uZToKICAgICAgICAgICAg\nc3RkZXJyID0gW3Auc3RkZXJyLnJlYWQoKSBmb3IgcCBpbiBzZWxmLnByb2Nlc3NlcyBpZiBwLnN0\nZGVycl0KICAgICAgICAgICAgb3V0cHV0ID0gYidcbicuam9pbihzdGRlcnIpLnN0cmlwKCkKICAg\nICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3V0cHV0LCBzaXgudGV4dF90eXBlKToKICAgICAg\nICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5kZWNvZGUoc2VsZi5lbmNvZGluZywgJ2lnbm9yZScp\nCiAgICAgICAgICAgIHNlbGYuX3N0ZGVyciA9IG91dHB1dAogICAgICAgIHJldHVybiBzZWxmLl9z\ndGRlcnIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb21tYW5kcyhzZWxmKToKICAgICAgICBjbWRz\nID0gW3NlbGZdCiAgICAgICAgcHJldmlvdXMgPSBzZWxmLnByZXZpb3VzCiAgICAgICAgd2hpbGUg\ncHJldmlvdXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGNtZHMuaW5zZXJ0KDAsIHByZXZpb3Vz\nKQogICAgICAgICAgICBwcmV2aW91cyA9IHByZXZpb3VzLnByZXZpb3VzCiAgICAgICAgcmV0dXJu\nIGNtZHMKCiAgICBkZWYgY29tbWFuZF9saW5lKHNlbGYsIHNoZWxsPUZhbHNlKToKICAgICAgICBh\ncmdzID0gW10KCiAgICAgICAgaWYgc2VsZi5fY21kX2FyZ3M6CiAgICAgICAgICAgIGFyZ3MuZXh0\nZW5kKHNlbGYuX2NtZF9hcmdzKQoKICAgICAgICBpZiAnc3VkbycgaW4gYXJnczoKICAgICAgICAg\nICAgYXJnc1swOjFdID0gW2FsaWFzZXMuZ2V0KCdzdWRvJyldCgogICAgICAgIGJpbmFyeSA9IHNl\nbGYuX2JpbmFyeQogICAgICAgIGlmIHNlbGYuX2NtZF9hcmdzWzoxXSA9PSBbJ3NzaCddOgogICAg\nICAgICAgICBjbWQgPSAnJXMgJXMnICUgKGJpbmFyeSwgJyAnLmpvaW4oc2VsZi5hcmdzKSkKICAg\nICAgICAgICAgY21kID0gY21kLnN0cmlwKCkKICAgICAgICAgICAgZm9yIGMgaW4gJ1wnIio8Pnwn\nOgogICAgICAgICAgICAgICAgaWYgYyBpbiBjbWQ6CiAgICAgICAgICAgICAgICAgICAgY21kID0g\ncmVwcihzdHIoY21kKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBhcmdz\nLmFwcGVuZChjbWQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYXJncy5leHRlbmQoYmluYXJ5\nLnNwbGl0KCkpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5hcmdzLCBsaXN0KToKICAg\nICAgICAgICAgICAgIGZvciBhIGluIHNlbGYuYXJnczoKICAgICAgICAgICAgICAgICAgICBhcmdz\nLmV4dGVuZChhLnNwbGl0KCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhcmdz\nLmV4dGVuZChzZWxmLmFyZ3Muc3BsaXQoIiAiKSkKCiAgICAgICAgYXJncyA9IFthIGZvciBhIGlu\nIGFyZ3MgaWYgYV0KCiAgICAgICAgaWYgc2hlbGw6CiAgICAgICAgICAgIHJldHVybiAnICcuam9p\nbihhcmdzKQogICAgICAgIHJldHVybiBhcmdzCgogICAgQHByb3BlcnR5CiAgICBkZWYgY29tbWFu\nZHNfbGluZShzZWxmKToKICAgICAgICBjbWRzID0gW10KICAgICAgICBmb3IgY21kIGluIHNlbGYu\nY29tbWFuZHM6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY21kLCBTdGRpbik6CiAgICAgICAg\nICAgICAgICBzID0gJ3N0ZGluJwogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoY21kLCBQeVBp\ncGUpOgogICAgICAgICAgICAgICAgcyA9ICclcygpJyAlIGNtZC5fX2NsYXNzX18uX19uYW1lX18K\nICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHMgPSBjbWQuY29tbWFuZF9saW5lKHNo\nZWxsPVRydWUpCiAgICAgICAgICAgIGNtZHMuYXBwZW5kKHMuc3RyaXAoKSkKICAgICAgICByZXR1\ncm4gc3RyKCcgfCAnLmpvaW4oY21kcykpCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3Rkb3V0KHNl\nbGYpOgogICAgICAgICIiInN0YW5kYXJkIG91dHB1dCBvZiB0aGUgcGlwZS4gQSBmaWxlIGRlc2Ny\naXB0b3Igb3IgYW4gaXRlcmFyb3IiIiIKICAgICAgICBwID0gTm9uZQogICAgICAgIHNlbGYucHJv\nY2Vzc2VzID0gW10KICAgICAgICBzZWxmLl9zdGRlcnIgPSBOb25lCiAgICAgICAgc3RkaW4gPSBz\neXMuc3RkaW4KICAgICAgICBjbWRzID0gc2VsZi5jb21tYW5kcwoKICAgICAgICBpZiBbYyBmb3Ig\nYyBpbiBjbWRzIGlmIGMuX2NtZF9hcmdzWzoxXSA9PSBbJ3N1ZG8nXV06CiAgICAgICAgICAgIGNo\nZWNrX3N1ZG8oKQoKICAgICAgICBmb3IgY21kIGluIGNtZHM6CiAgICAgICAgICAgIGlmIGlzaW5z\ndGFuY2UoY21kLCBTdGRpbik6CiAgICAgICAgICAgICAgICBzdGRpbiA9IGNtZC5pdGVyX3N0ZG91\ndAogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoY21kLCBQeVBpcGUpOgogICAgICAgICAgICAg\nICAgY21kLnN0ZGluID0gcC5zdGRvdXQKICAgICAgICAgICAgICAgIHN0ZGluID0gY21kLml0ZXJf\nc3Rkb3V0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhcmdzID0gY21kLmNvbW1h\nbmRfbGluZShjbWQua3dhcmdzLmdldCgnc2hlbGwnLCBGYWxzZSkpCgogICAgICAgICAgICAgICAg\na3dhcmdzID0gZGljdCgKICAgICAgICAgICAgICAgICAgICBzdGRpbj1zdGRpbiwgc3RkZXJyPVBJ\nUEUsCiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0PVBJUEUKICAgICAgICAgICAgICAgICAgICAp\nCiAgICAgICAgICAgICAgICBrd2FyZ3MudXBkYXRlKGNtZC5rd2FyZ3MpCiAgICAgICAgICAgICAg\nICBlbnZfID0ga3dhcmdzLnBvcCgnZW52JywgZW52KQoKICAgICAgICAgICAgICAgIGxvZy5kZWJ1\nZygnUG9wZW4oJXIsICoqJXIpJywgYXJncywga3dhcmdzKQoKICAgICAgICAgICAgICAgIGt3YXJn\nc1snZW52J10gPSBlbnZfCgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAg\nIHAgPSBQb3BlbihhcmdzLCAqKmt3YXJncykKICAgICAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9y\nOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3JhaXNlKCkKCiAgICAgICAgICAgICAgICBzZWxm\nLnByb2Nlc3Nlcy5hcHBlbmQocCkKICAgICAgICAgICAgICAgIHN0ZGluID0gcC5zdGRvdXQKICAg\nICAgICByZXR1cm4gc3RkaW4KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBtYXAoY2xzLCBhcmdz\nLAogICAgICAgICAgICBwb29sX3NpemU9Tm9uZSwgc3RvcF9vbl9mYWlsdXJlPUZhbHNlLCAqKmt3\nYXJncyk6CiAgICAgICAgIiIiUnVuIGEgYmF0Y2ggb2YgdGhlIHNhbWUgY29tbWFuZCBhbmQgbWFu\nYWdlIGEgcG9vbCBvZiBwcm9jZXNzZXMgZm9yCiAgICAgICAgeW91IiIiCiAgICAgICAga3cgPSBk\naWN0KAogICAgICAgICAgICBzdGRpbj1zeXMuc3RkaW4sIHN0ZGVycj1QSVBFLAogICAgICAgICAg\nICBzdGRvdXQ9UElQRQogICAgICAgICAgICApCiAgICAgICAga3cudXBkYXRlKGt3YXJncykKICAg\nICAgICBpZiBwb29sX3NpemUgaXMgTm9uZToKICAgICAgICAgICAgaW1wb3J0IG11bHRpcHJvY2Vz\nc2luZwogICAgICAgICAgICBwb29sX3NpemUgPSBtdWx0aXByb2Nlc3NpbmcuY3B1X2NvdW50KCkK\nICAgICAgICByZXN1bHRzID0gW05vbmVdICogbGVuKGFyZ3MpCiAgICAgICAgcHJvY2Vzc2VzID0g\nW10KICAgICAgICBpbmRleCA9IDAKICAgICAgICBvdXRfaW5kZXggPSAwCiAgICAgICAgd2hpbGUg\nYXJncyBvciBwcm9jZXNzZXM6CiAgICAgICAgICAgIGlmIGFyZ3MgYW5kIGxlbihwcm9jZXNzZXMp\nIDwgcG9vbF9zaXplOgogICAgICAgICAgICAgICAgYSA9IGFyZ3MucG9wKDApCiAgICAgICAgICAg\nICAgICBpZiBub3QgaXNpbnN0YW5jZShhLCBsaXN0KToKICAgICAgICAgICAgICAgICAgICBhID0g\nW2FdCiAgICAgICAgICAgICAgICBjbWQgPSBjbHMoKmEpCiAgICAgICAgICAgICAgICBhID0gY21k\nLmNvbW1hbmRfbGluZShjbWQua3dhcmdzLmdldCgnc2hlbGwnLCBGYWxzZSkpCiAgICAgICAgICAg\nICAgICBwcm9jZXNzZXMuYXBwZW5kKChpbmRleCwgY21kLCBQb3BlbihhLCAqKmt3KSkpCiAgICAg\nICAgICAgICAgICBpbmRleCArPSAxCiAgICAgICAgICAgIGZvciBpLCBjbWQsIHAgaW4gcHJvY2Vz\nc2VzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gcC5wb2xsKCkKICAgICAgICAgICAgICAgIGlm\nIHJlc3VsdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBTdGRvdXQo\ncC5zdGRvdXQucmVhZCgpKQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5zdGRlcnIgPSBwLnN0\nZGVyci5yZWFkKCkKICAgICAgICAgICAgICAgICAgICBvdXRwdXQucmV0dXJuY29kZXMgPSBbcmVz\ndWx0XQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5mYWlsZWQgPSBib29sKHJlc3VsdCkKICAg\nICAgICAgICAgICAgICAgICBvdXRwdXQuc3VjY2VlZGVkID0gbm90IG91dHB1dC5mYWlsZWQKICAg\nICAgICAgICAgICAgICAgICByZXN1bHRzW2ldID0gb3V0cHV0CiAgICAgICAgICAgICAgICAgICAg\ncHJvY2Vzc2VzLnJlbW92ZSgoaSwgY21kLCBwKSkKICAgICAgICAgICAgICAgICAgICBpZiBvdXRf\naW5kZXggPT0gaToKICAgICAgICAgICAgICAgICAgICAgICAgb3V0X2luZGV4ICs9IDEKICAgICAg\nICAgICAgICAgICAgICAgICAgeWllbGQgcmVzdWx0c1tpXQogICAgICAgICAgICAgICAgICAgIGlm\nIHJlc3VsdCA+IDAgYW5kIHN0b3Bfb25fZmFpbHVyZToKICAgICAgICAgICAgICAgICAgICAgICAg\nYXJncyA9IE5vbmUKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCBjbWQsIHAgaW4g\ncHJvY2Vzc2VzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcC5wb2xsKCkgaXMgTm9u\nZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmtpbGwoKQogICAgICAgICAgICAg\nICAgICAgICAgICBjbWQuX3JhaXNlKG91dHB1dD1vdXRwdXQpCiAgICAgICAgICAgIHRpbWUuc2xl\nZXAoLjEpCiAgICAgICAgaWYgb3V0X2luZGV4IDwgbGVuKHJlc3VsdHMpOgogICAgICAgICAgICB5\naWVsZCByZXN1bHRzW291dF9pbmRleF0KICAgICAgICAgICAgb3V0X2luZGV4ICs9IDEKCiAgICBk\nZWYgX19nZXRpdGVtX18oc2VsZiwgaXRlbSk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaXRl\nbSwgc2xpY2UpOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcignWW91IGNhbiBvbmx5IHVzZSBz\nbGljZXMnKQogICAgICAgIGNtZHMgPSBzZWxmLmNvbW1hbmRzCiAgICAgICAgY21kcyA9IFtkZWVw\nY29weShjbWQpIGZvciBjbWQgaW4gY21kc1tpdGVtXV0KICAgICAgICByZXR1cm4gc2VsZi5fb3Jk\nZXIoY21kcylbLTFdCgogICAgZGVmIF9fZ2V0c2xpY2VfXyhzZWxmLCBzdGFydCwgc3RvcCk6CiAg\nICAgICAgY21kcyA9IHNlbGYuY29tbWFuZHMKICAgICAgICBjbWRzID0gW2RlZXBjb3B5KGNtZCkg\nZm9yIGNtZCBpbiBjbWRzW3N0YXJ0OnN0b3BdXQogICAgICAgIHJldHVybiBzZWxmLl9vcmRlcihj\nbWRzKVstMV0KCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgZm9yIGxpbmUgaW4gc2Vs\nZi5zdGRvdXQ6CiAgICAgICAgICAgIHlpZWxkIHNlbGYuX2RlY29kZShsaW5lKQoKICAgIGRlZiBf\nX2NhbGxfXyhzZWxmLCAqKmt3YXJncyk6CiAgICAgICAgaWYgc2VsZi5fZG9uZSBhbmQgc2VsZi5f\nc3Rkb3V0IGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fc3Rkb3V0CiAgICAg\nICAgZm9yIGNtZCBpbiBzZWxmLmNvbW1hbmRzOgogICAgICAgICAgICBpZiBrd2FyZ3MuZ2V0KCdz\naGVsbCcpOgogICAgICAgICAgICAgICAgY21kLmt3YXJnc1snc2hlbGwnXSA9IFRydWUKICAgICAg\nICAgICAgaWYga3dhcmdzLmdldCgnY29tYmluZV9zdGRlcnInKToKICAgICAgICAgICAgICAgIGNt\nZC5rd2FyZ3NbJ3N0ZGVyciddID0gU1RET1VUCiAgICAgICAgc3Rkb3V0ID0gc2VsZi5zdGRvdXQK\nICAgICAgICBpZiBzdGRvdXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGhhc2F0dHIoc3Rk\nb3V0LCAncmVhZCcpOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gc3Rkb3V0LnJlYWQoKS5yc3Ry\naXAoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgb3V0cHV0ID0gYicnLmpvaW4o\nbGlzdChzdGRvdXQpKS5yc3RyaXAoKQogICAgICAgICAgICBvdXRwdXQgPSBzZWxmLl9kZWNvZGUo\nb3V0cHV0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dHB1dCA9ICcnCiAgICAgICAgb3V0\ncHV0ID0gc2VsZi5fZ2V0X3N0ZG91dChvdXRwdXQpCiAgICAgICAgaWYgc2VsZi5fZG9uZToKICAg\nICAgICAgICAgc2VsZi5fc3Rkb3V0ID0gb3V0cHV0CiAgICAgICAgcmV0dXJuIG91dHB1dAoKICAg\nIF9fc3RyX18gPSBfX2NhbGxfXwoKICAgIGRlZiBfX2d0X18oc2VsZiwgZmlsZW5hbWUpOgogICAg\nICAgIHJldHVybiBzZWxmLl93cml0ZShmaWxlbmFtZSwgJ3diKycpCgogICAgZGVmIF9fcnNoaWZ0\nX18oc2VsZiwgZmlsZW5hbWUpOgogICAgICAgIHJldHVybiBzZWxmLl93cml0ZShmaWxlbmFtZSwg\nJ2FiKycpCgogICAgZGVmIF9fb3JfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgaXNpbnN0YW5j\nZShvdGhlci5jb21tYW5kcywgcHJvcGVydHkpOgogICAgICAgICAgICBvdGhlciA9IG90aGVyKCkK\nICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYsIFN0ZGluKToKICAgICAgICAgICAgZmlyc3QgPSBv\ndGhlci5jb21tYW5kc1swXQogICAgICAgICAgICBmaXJzdC5wcmV2aW91cyA9IHNlbGYKICAgICAg\nICAgICAgcmV0dXJuIG90aGVyCiAgICAgICAgY21kcyA9IGRlZXBjb3B5KHNlbGYuY29tbWFuZHMp\nICsgZGVlcGNvcHkob3RoZXIuY29tbWFuZHMpCiAgICAgICAgY21kcyA9IHNlbGYuX29yZGVyKGNt\nZHMpCiAgICAgICAgb3RoZXIgPSBjbWRzWy0xXQogICAgICAgIHJldHVybiBvdGhlcgoKICAgIGRl\nZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICByZXR1cm4gbm90IHNlbGYuZmFpbGVkCiAgICBfX25v\nbnplcm9fXyA9IF9fYm9vbF9fCgogICAgZGVmIF9fZGVlcGNvcHlfXyhzZWxmLCAqYXJncyk6CiAg\nICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKCpzZWxmLmFyZ3MsICoqc2VsZi5rd2FyZ3MpCgog\nICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiByZXByKHNlbGYuY29tbWFuZHNf\nbGluZSkKCiAgICBkZWYgX29yZGVyKHNlbGYsIGNtZHMpOgogICAgICAgIGlmIGNtZHM6CiAgICAg\nICAgICAgIGNtZHNbMF0ucHJldmlvdXMgPSBOb25lCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdl\nKGxlbihjbWRzKSAtIDEsIDAsIC0xKToKICAgICAgICAgICAgICAgIGNtZHNbaV0ucHJldmlvdXMg\nPSBjbWRzW2kgLSAxXQogICAgICAgIHJldHVybiBjbWRzCgogICAgZGVmIF93cml0ZV90byhzZWxm\nLCBmZCk6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VsZiwgUHlQaXBlKToKICAgICAgICAg\nICAgc2VsZi5rd2FyZ3NbJ3N0ZG91dCddID0gZmQKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19j\nYWxsX18oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZvciBsaW5lIGluIHNlbGYuc3Rkb3V0\nOgogICAgICAgICAgICAgICAgZmQud3JpdGUobGluZSkKICAgICAgICAgICAgcmV0dXJuIHNlbGYu\nX2dldF9zdGRvdXQoJycpCgogICAgZGVmIF93cml0ZShzZWxmLCBmaWxlbmFtZSwgbW9kZSk6CiAg\nICAgICAgaWYgaXNpbnN0YW5jZShmaWxlbmFtZSwgaW50KToKICAgICAgICAgICAgaWYgZmlsZW5h\nbWUgPT0gMjoKICAgICAgICAgICAgICAgIGZkID0gc2VsZi5fc3lzX3N0ZGVycgogICAgICAgICAg\nICBlbHNlOgogICAgICAgICAgICAgICAgZmQgPSBzZWxmLl9zeXNfc3Rkb3V0CiAgICAgICAgICAg\nIG91dHB1dCA9IHNlbGYuX3dyaXRlX3RvKGZkKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHdp\ndGggb3BlbihmaWxlbmFtZSwgbW9kZSkgYXMgZmQ6CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBz\nZWxmLl93cml0ZV90byhmZCkKICAgICAgICBpZiBvdXRwdXQuZmFpbGVkOgogICAgICAgICAgICBz\nZWxmLl9yYWlzZShvdXRwdXQ9b3V0cHV0KQogICAgICAgIHJldHVybiBvdXRwdXQKCiAgICBkZWYg\nX2RlY29kZShzZWxmLCBvdXRwdXQpOgogICAgICAgIGlmIHNpeC5QWTMgYW5kIG5vdCBpc2luc3Rh\nbmNlKG91dHB1dCwgc2l4LnRleHRfdHlwZSk6CiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5k\nZWNvZGUoc2VsZi5lbmNvZGluZykKICAgICAgICByZXR1cm4gb3V0cHV0CgogICAgZGVmIF9nZXRf\nc3Rkb3V0KHNlbGYsIHN0ZG91dCk6CiAgICAgICAgaWYgbm90IHNpeC5QWTMgYW5kIG5vdCBpc2lu\nc3RhbmNlKHN0ZG91dCwgc2l4LmJpbmFyeV90eXBlKToKICAgICAgICAgICAgc3Rkb3V0ID0gc3Rk\nb3V0LmVuY29kZShzZWxmLmVuY29kaW5nKQogICAgICAgIG91dHB1dCA9IFN0ZG91dChzdGRvdXQp\nCiAgICAgICAgb3V0cHV0LnN0ZGVyciA9IHNlbGYuc3RkZXJyCiAgICAgICAgb3V0cHV0LnJldHVy\nbmNvZGVzID0gc2VsZi5yZXR1cm5jb2RlcwogICAgICAgIG91dHB1dC5mYWlsZWQgPSBib29sKG91\ndHB1dC5yZXR1cm5jb2RlcykKICAgICAgICBvdXRwdXQuc3VjY2VlZGVkID0gbm90IG91dHB1dC5m\nYWlsZWQKICAgICAgICByZXR1cm4gb3V0cHV0CgogICAgZGVmIF9yYWlzZShzZWxmLCBvdXRwdXQ9\nTm9uZSk6CiAgICAgICAgaWYgbm90IGxvZy5oYW5kbGVyczoKICAgICAgICAgICAgbG9nZ2luZy5i\nYXNpY0NvbmZpZyhzdHJlYW09c3lzLnN0ZGVycikKICAgICAgICBpZiBvdXRwdXQgaXMgbm90IE5v\nbmU6CiAgICAgICAgICAgIGlmIG91dHB1dC5zdGRlcnI6CiAgICAgICAgICAgICAgICBsb2cuZXJy\nb3Iob3V0cHV0LnN0ZGVycikKICAgICAgICAgICAgcmFpc2UgT1NFcnJvcihzZWxmLmNvbW1hbmRz\nX2xpbmUsIG91dHB1dC5zdGRlcnIpCiAgICAgICAgcmFpc2UgT1NFcnJvcihzZWxmLmNvbW1hbmRz\nX2xpbmUpCgoKY2xhc3MgU3RkaW4oUGlwZSk6CiAgICAiIiJVc2VkIHRvIGluamVjdCBzb21lIGRh\ndGEgaW4gdGhlIHBpcGUiIiIKCiAgICBzdGRlcnIgPSAnJwogICAgcmV0dXJuY29kZXMgPSBbXQoK\nICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSk6CiAgICAgICAgc3VwZXIoU3RkaW4sIHNlbGYp\nLl9faW5pdF9fKCkKICAgICAgICBzZWxmLnZhbHVlID0gdmFsdWUKICAgICAgICBzZWxmLl9zdGRp\nbiA9IE5vbmUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBpdGVyX3N0ZG91dChzZWxmKToKICAgICAg\nICBpZiBoYXNhdHRyKHNlbGYudmFsdWUsICdzZWVrJyk6CiAgICAgICAgICAgIHNlbGYudmFsdWUu\nc2VlaygwKQogICAgICAgIGlmIGhhc2F0dHIoc2VsZi52YWx1ZSwgJ2ZpbGVubycpOgogICAgICAg\nICAgICByID0gc2VsZi52YWx1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGhhc2F0dHIo\nc2VsZi52YWx1ZSwgJ3JlYWQnKToKICAgICAgICAgICAgICAgIHZhbHVlID0gc2VsZi52YWx1ZS5y\nZWFkKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNl\nKHNlbGYudmFsdWUsIHNpeC5iaW5hcnlfdHlwZSk6CiAgICAgICAgICAgICAgICAgICAgdmFsdWUg\nPSBzaXguYihzZWxmLnZhbHVlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg\nICAgICB2YWx1ZSA9IHNlbGYudmFsdWUKICAgICAgICAgICAgciwgdyA9IG9zLnBpcGUoKQogICAg\nICAgICAgICBmZCA9IG9zLmZkb3Blbih3LCAnd2InKQogICAgICAgICAgICBmZC53cml0ZSh2YWx1\nZSkKICAgICAgICAgICAgZmQuY2xvc2UoKQogICAgICAgIHJldHVybiByCgogICAgZGVmIF9fZGVl\ncGNvcHlfXyhzZWxmLCAqYXJncyk6CiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKHNlbGYu\ndmFsdWUpCgogICAgZGVmIF93cml0ZShzZWxmLCBmaWxlbmFtZSwgbW9kZSk6CiAgICAgICAgd2l0\naCBvcGVuKGZpbGVuYW1lLCBtb2RlKSBhcyBmZDoKICAgICAgICAgICAgaWYgaGFzYXR0cihzZWxm\nLnZhbHVlLCAnc2VlaycpOgogICAgICAgICAgICAgICAgc2VsZi52YWx1ZS5zZWVrKDApCiAgICAg\nICAgICAgIGlmIGhhc2F0dHIoc2VsZi52YWx1ZSwgJ3JlYWQnKToKICAgICAgICAgICAgICAgIHNo\ndXRpbC5jb3B5ZmlsZW9iaihzZWxmLnZhbHVlLCBmZCkKICAgICAgICAgICAgZWxzZToKICAgICAg\nICAgICAgICAgIGZkLndyaXRlKHNlbGYudmFsdWUpCiAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9z\ndGRvdXQoJycpCgoKY2xhc3MgU3Rkb3V0KHN0cik6CiAgICAiIiJBIHN0cmluZyB3aXRoIGV4dHJh\nIGF0dHJpYnV0ZXM6CgogICAgLSBzdWNjZWVkZWQKICAgIC0gZmFpbGVkCiAgICAtIHN0ZG91dAog\nICAgLSBzdGRlcnIKICAgICIiIgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHN0ZG91dChzZWxmKToK\nICAgICAgICByZXR1cm4gc3RyKHNlbGYpCgoKY2xhc3MgUHlQaXBlKFBpcGUpOgoKICAgIEBwcm9w\nZXJ0eQogICAgZGVmIGl0ZXJfc3Rkb3V0KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmZ1bmMo\nc2VsZi5zdGRpbikKCiAgICBkZWYgX19kZWVwY29weV9fKHNlbGYsICphcmdzKToKICAgICAgICBy\nZXR1cm4gc2gud3JhcHMoc2VsZi5mdW5jKQoKCmNsYXNzIEJhc2Uob2JqZWN0KToKICAgIG5vdF9w\naXBlZCA9IFtzdHIoYykgZm9yIGMgaW4gX19ub3RfcGlwZWRfX10KCiAgICBkZWYgX19pbml0X18o\nc2VsZiwgbmFtZSwgKmNtZF9hcmdzKToKICAgICAgICBzZWxmLl9fbmFtZV9fID0gbmFtZQogICAg\nICAgIHNlbGYuX2NtZHMgPSB7fQogICAgICAgIHNlbGYuX2NtZF9hcmdzID0gW10KICAgICAgICBp\nZiBjbWRfYXJnczoKICAgICAgICAgICAgc2VsZi5fY21kX2FyZ3MgPSBbbmFtZV0gKyBsaXN0KGNt\nZF9hcmdzKQoKICAgIGRlZiBzZXRfZGVidWcoc2VsZiwgZW5hYmxlPVRydWUpOgogICAgICAgIGlm\nIGVuYWJsZToKICAgICAgICAgICAgbG9nLnNldExldmVsKGxvZ2dpbmcuREVCVUcpCiAgICAgICAg\nICAgIGxvZy5hZGRIYW5kbGVyKGxvZ2dpbmcuU3RyZWFtSGFuZGxlcihzeXMuc3Rkb3V0KSkKICAg\nICAgICBlbHNlOgogICAgICAgICAgICBsb2cuc2V0TGV2ZWwobG9nZ2luZy5JTkZPKQoKICAgIGRl\nZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKToKICAgICAgICBhdHRyID0gc3RyKGF0dHIpCiAgICAg\nICAgaWYgYXR0ciBub3QgaW4gc2VsZi5fY21kczoKICAgICAgICAgICAga3cgPSBkaWN0KF9jaHV0\nPXNlbGYsCiAgICAgICAgICAgICAgICAgICAgICBfYmluYXJ5PXN0cihhbGlhc2VzLmdldChhdHRy\nLCBhdHRyKSksCiAgICAgICAgICAgICAgICAgICAgICBfY21kX2FyZ3M9c2VsZi5fY21kX2FyZ3Ms\nCiAgICAgICAgICAgICAgICAgICAgICBfcGlwZT1UcnVlKQogICAgICAgICAgICBpZiBhdHRyIGlu\nIHNlbGYubm90X3BpcGVkOgogICAgICAgICAgICAgICAga3dbJ19waXBlJ10gPSBGYWxzZQogICAg\nICAgICAgICBzZWxmLl9jbWRzW2F0dHJdID0gdHlwZShhdHRyLCAoUGlwZSwpLCBrdykKICAgICAg\nICByZXR1cm4gc2VsZi5fY21kc1thdHRyXQoKICAgIF9fZ2V0aXRlbV9fID0gX19nZXRhdHRyX18K\nCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICc8JXM+JyAlIHNlbGYuX19u\nYW1lX18KCgpjbGFzcyBDaHV0KEJhc2UpOgoKICAgIHBhdGggPSBwb3NpeHBhdGgKCiAgICBkZWYg\nd3JhcHMoc2VsZiwgZnVuYyk6CiAgICAgICAgcmV0dXJuIHR5cGUoZnVuYy5fX25hbWVfXywgKFB5\nUGlwZSwpLCB7J2Z1bmMnOiBzdGF0aWNtZXRob2QoZnVuYyl9KSgpCgogICAgQGNvbnRleHRtYW5h\nZ2VyCiAgICBkZWYgcGlwZXMoc2VsZiwgY21kKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHlp\nZWxkIGNtZAogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIGlmIGNtZC5yZXR1cm5jb2RlczoK\nICAgICAgICAgICAgICAgIHN0ZGVyciA9IGNtZC5zdGRlcnIKICAgICAgICAgICAgICAgIGxvZy5l\ncnJvcignRXJyb3Igd2hpbGUgcnVubmluZyAlclxuJXMnLCBjbWQsIHN0ZGVycikKICAgICAgICAg\nICAgICAgIHJhaXNlIE9TRXJyb3Ioc3RkZXJyKQoKICAgIGRlZiBwaXBlKHNlbGYsIGJpbmFyeSwg\nKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICBwaXBlID0gZ2V0YXR0cihzZWxmLCBzdHIoYmluYXJ5\nKSkKICAgICAgICByZXR1cm4gcGlwZSgqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIGNkKHNlbGYs\nIGRpcmVjdG9yeSk6CiAgICAgICAgIiIiQ2hhbmdlIHRoZSBjdXJyZW50IGRpcmVjdG9yeSIiIgog\nICAgICAgIGlmIHNlbGYuX19uYW1lX18gbm90IGluICgnc2gnLCAnc3VkbycpOgogICAgICAgICAg\nICByYWlzZSBJbXBvcnRFcnJvcignWW91IGNhbiBvbmx5IHJ1biBjZCBpbiBsb2NhbCBjb21tYW5k\ncycpCiAgICAgICAgZGlyZWN0b3J5ID0gb3MucGF0aC5yZWFscGF0aChkaXJlY3RvcnkpCiAgICAg\nICAgb3MuY2hkaXIoZGlyZWN0b3J5KQogICAgICAgIGVudi5wd2QgPSBkaXJlY3RvcnkKCiAgICBk\nZWYgcHdkKHNlbGYpOgogICAgICAgICIiInJldHVybiBvcy5wYXRoLmFic3BhdGgob3MuZ2V0Y3dk\nKCkpIiIiCiAgICAgICAgaWYgc2VsZi5fX25hbWVfXyBub3QgaW4gKCdzaCcsICdzdWRvJyk6CiAg\nICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKCdZb3UgY2FuIG9ubHkgdXNlIHB3ZCBpbiBsb2Nh\nbCBjb21tYW5kcycpCiAgICAgICAgcmV0dXJuIG9zLnBhdGguYWJzcGF0aChvcy5nZXRjd2QoKSkK\nCiAgICBkZWYgc3RkaW4oc2VsZiwgdmFsdWUpOgogICAgICAgIHJldHVybiBTdGRpbih2YWx1ZSkK\nCiAgICBkZWYgc3NoKHNlbGYsICphcmdzKToKICAgICAgICByZXR1cm4gU1NIKCdzc2gnLCAqYXJn\ncykKCgpjbGFzcyBDb21tYW5kKEJhc2UpOgogICAgIiIiQSBjb21tYW5kIChsaWtlIHRlc3QpIiIi\nCgogICAgZGVmIF9fZ2V0YXR0cl9fKHNlbGYsIGF0dHIpOgogICAgICAgIGF0dHIgPSBzdHIoYXR0\ncikKICAgICAgICBpZiBhdHRyIG5vdCBpbiBzZWxmLl9jbWRzOgogICAgICAgICAgICBjbWQgPSBz\nZWxmLl9fbmFtZV9fCiAgICAgICAgICAgIGt3ID0gZGljdChfY2h1dD1zZWxmLAogICAgICAgICAg\nICAgICAgICAgICAgX2JpbmFyeT0nJywKICAgICAgICAgICAgICAgICAgICAgIF9jbWRfYXJncz1b\nY21kLCAnLScgKyBhdHRyXSwKICAgICAgICAgICAgICAgICAgICAgIF9waXBlPVRydWUpCiAgICAg\nICAgICAgIHNlbGYuX2NtZHNbYXR0cl0gPSB0eXBlKHN0cihjbWQpLCAoUGlwZSwpLCBrdykKICAg\nICAgICByZXR1cm4gc2VsZi5fY21kc1thdHRyXQoKCmNsYXNzIFNTSChCYXNlKToKICAgICIiIkEg\nc3NoIHNlcnZlciIiIgoKICAgIGRlZiBqb2luKHNlbGYsICphcmdzKToKICAgICAgICBwID0gcG9z\naXhwYXRoLmpvaW4oKmFyZ3MpCiAgICAgICAgaG9zdCA9IHN0cihzZWxmKQogICAgICAgIHF1b3Rl\nID0gJyInCiAgICAgICAgaWYgaXNpbnN0YW5jZShwLCBzaXguYmluYXJ5X3R5cGUpOgogICAgICAg\nICAgICBob3N0ID0gaG9zdC5lbmNvZGUoJ2FzY2lpJykKICAgICAgICAgICAgcXVvdGUgPSBxdW90\nZS5lbmNvZGUoJ2FzY2lpJykKICAgICAgICByZXR1cm4gaG9zdCArIHF1b3RlICsgZXNjYXBlKHAp\nICsgcXVvdGUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBob3N0KHNlbGYpOgogICAgICAgIHJldHVy\nbiBzZWxmLl9jbWRfYXJnc1stMV0KCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1\ncm4gJyVzOicgJSBzZWxmLmhvc3QKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgKmFyZ3MsICoqa3dh\ncmdzKToKICAgICAgICBjbWRzID0gW10KICAgICAgICBmb3IgYSBpbiBhcmdzOgogICAgICAgICAg\nICBpZiBpc2luc3RhbmNlKGEsIFBpcGUpOgogICAgICAgICAgICAgICAgY21kcy5hcHBlbmQoYS5j\nb21tYW5kc19saW5lKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY21kcy5hcHBl\nbmQoYSkKICAgICAgICBzcnYgPSBnZXRhdHRyKFNTSChhbGlhc2VzLmdldCgnc3NoJyksICpzZWxm\nLl9jbWRfYXJnc1sxOl0pLCAnJykKICAgICAgICByZXR1cm4gc3J2KCpjbWRzLCAqKmt3YXJncykK\nCgpjbGFzcyBNb2R1bGVXcmFwcGVyKHR5cGVzLk1vZHVsZVR5cGUpOgogICAgIiIid3JhcCBjaHV0\nIGFuZCBhZGQgZXh0cmEgYXR0cmlidXRlcyBmcm9tIGNsYXNzZXMiIiIKCiAgICBkZWYgX19pbml0\nX18oc2VsZiwgbW9kLCBjaHV0LCBuYW1lKToKICAgICAgICBzZWxmLl9fbmFtZV9fID0gbmFtZQog\nICAgICAgIGZvciBhdHRyIGluIFsiX19idWlsdGluc19fIiwgIl9fZG9jX18iLAogICAgICAgICAg\nICAgICAgICAgICAiX19wYWNrYWdlX18iLCAiX19maWxlX18iXToKICAgICAgICAgICAgc2V0YXR0\ncihzZWxmLCBhdHRyLCBnZXRhdHRyKG1vZCwgYXR0ciwgTm9uZSkpCiAgICAgICAgc2VsZi5fX3Bh\ndGhfXyA9IGdldGF0dHIobW9kLCAnX19wYXRoX18nLCBbXSkKICAgICAgICBzZWxmLl9fdGVzdF9f\nID0gZ2V0YXR0cihtb2QsICdfX3Rlc3RfXycsIHt9KQogICAgICAgIHNlbGYubW9kID0gbW9kCiAg\nICAgICAgc2VsZi5jaHV0ID0gY2h1dAoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKToK\nICAgICAgICBpZiBhdHRyID09ICdfX2FsbF9fJzoKICAgICAgICAgICAgaWYgc2VsZi5fX25hbWVf\nXyA9PSAnY2h1dCc6CiAgICAgICAgICAgICAgICByZXR1cm4gW3N0cihjKSBmb3IgYyBpbiBfX2Fs\nbF9fXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3Io\nJ1lvdSBjYW50IGltcG9ydCB0aGluZ3MgdGhhdCBkb2VzIG5vdCBleGlzdCcpCiAgICAgICAgaWYg\naGFzYXR0cihzZWxmLm1vZCwgYXR0cik6CiAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYu\nbW9kLCBhdHRyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYu\nY2h1dCwgYXR0cikKCiAgICBfX2dldGl0ZW1fXyA9IF9fZ2V0YXR0cl9fCgoKZW52ID0gRW52aXJv\nbihvcy5lbnZpcm9uLmNvcHkoKSkKc2ggPSBDaHV0KCdzaCcpCnN1ZG8gPSBDaHV0KCdzdWRvJywg\nJy1zJykKdGVzdCA9IENvbW1hbmQoJ3Rlc3QnKQplID0gZXNjYXBlCgoKZGVmIHdyYXBzX21vZHVs\nZShtb2QpOgogICAgc3lzLm1vZHVsZXNbJ2NodXQnXSA9IE1vZHVsZVdyYXBwZXIobW9kLCBzaCwg\nJ2NodXQnKQogICAgc3lzLm1vZHVsZXNbJ2NodXQuc3VkbyddID0gTW9kdWxlV3JhcHBlcihtb2Qs\nIHN1ZG8sICdzdWRvJykKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIFNjcmlwdCBnZW5lcmF0aW9u\nICMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKQGNvbnRleHRtYW5hZ2VyCmRlZiByZXF1aXJlcygq\ncmVxdWlyZW1lbnRzLCAqKmt3YXJncyk6CiAgICBpZiAnLnRveC9iaW4vJyBpbiBzeXMuZXhlY3V0\nYWJsZToKICAgICAgICB2ZW52ID0gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguZGlybmFtZShzeXMu\nZXhlY3V0YWJsZSkpCiAgICBlbGlmIGVudi52aXJ0dWFsX2VudjoKICAgICAgICB2ZW52ID0gZW52\nLnZpcnR1YWxfZW52CiAgICBlbHNlOgogICAgICAgIHZlbnYgPSBvcy5wYXRoLmV4cGFuZHVzZXIo\na3dhcmdzLmdldCgndmVudicsICd+Ly5jaHV0L3ZlbnYnKSkKICAgIHVwZ3JhZGUgPSAnLS11cGdy\nYWRlLWRlcHMnIGluIHN5cy5hcmd2CiAgICBpZiBub3QgZW52LnBpcF9kb3dubG9hZF9jYWNoZToK\nICAgICAgICBlbnYucGlwX2Rvd25sb2FkX2NhY2hlID0gb3MucGF0aC5leHBhbmR1c2VyKCd+Ly5j\naHV0L2NhY2hlJykKICAgICAgICBzaC5ta2RpcignLXAnLCBlbnYucGlwX2Rvd25sb2FkX2NhY2hl\nKQogICAgYmluX2RpciA9IG9zLnBhdGguam9pbih2ZW52LCAnYmluJykKICAgIGlmIGJpbl9kaXIg\nbm90IGluIGVudi5wYXRoOgogICAgICAgIGVudi5wYXRoID0gW2Jpbl9kaXJdICsgZW52LnBhdGgK\nICAgIGlmIG5vdCBvcy5wYXRoLmlzZGlyKHZlbnYpOgogICAgICAgIHNoLndnZXQoCiAgICAgICAg\nICAgICctLW5vLWNoZWNrLWNlcnRpZmljYXRlIC1PIC90bXAvdmlydHVhbGVudi5weScsCiAgICAg\nICAgICAgICdodHRwczovL3Jhdy5naXRodWIuY29tL3B5cGEvdmlydHVhbGVudi9tYXN0ZXIvdmly\ndHVhbGVudi5weScKICAgICAgICAgICAgKSA+IDEKICAgICAgICBweXRob24gPSBzaFtzeXMuZXhl\nY3V0YWJsZV0KICAgICAgICBweXRob24oJy1TIC90bXAvdmlydHVhbGVudi5weScsIHZlbnYpID4g\nMQogICAgICAgIHNoLnJtKCcvdG1wL3ZpcnR1YWxlbnYqJywgc2hlbGw9VHJ1ZSkKICAgICAgICBz\naC5waXAoJ2luc3RhbGwgLU1xIC0tdGltZW91dD01JywgKnJlcXVpcmVtZW50cykgPiAxCiAgICBl\nbGlmIG5vdCBlbnYuY2h1dF92aXJ0dWFsZW52IGFuZCAoZW52LmNodXRfdXBncmFkZSBvciB1cGdy\nYWRlKToKICAgICAgICBzaC5waXAoJ2luc3RhbGwgLU0gLS11cGdyYWRlIC0tdGltZW91dD01Jywg\nKnJlcXVpcmVtZW50cykgPiAxCiAgICBleGVjdXRhYmxlID0gb3MucGF0aC5qb2luKGJpbl9kaXIs\nICdweXRob24nKQogICAgaWYgbm90IGVudi5jaHV0X3ZpcnR1YWxlbnY6CiAgICAgICAgZW52LmNo\ndXRfdmlydHVhbGVudiA9IHZlbnYKICAgICAgICBvcy5leGVjdmUoZXhlY3V0YWJsZSwgW2V4ZWN1\ndGFibGVdICsgc3lzLmFyZ3YsIGVudikKICAgIHlpZWxkIFRydWUKCgpkZWYgY29uc29sZV9zY3Jp\ncHQoKmFyZ3MsICoqZG9jb3B0cyk6CiAgICAiIiJBIGRlY29yYXRvciB0byB0YWtlIGNhcmUgb2Yg\nc3lzLmFyZ3YgdmlhIGRvY29wdCIiIgogICAgZGVmIF9jb25zb2xlX3NjcmlwdChmdW5jLCAqKmRv\nY29wdHMpOgogICAgICAgIEBmdW5jdG9vbHMud3JhcHMoZnVuYykKICAgICAgICBkZWYgd3JhcHBl\ncihhcmd1bWVudHM9Tm9uZSk6CiAgICAgICAgICAgIGlmICdoZWxwJyBub3QgaW4gZG9jb3B0czoK\nICAgICAgICAgICAgICAgIGRvY29wdHNbJ2hlbHAnXSA9IFRydWUKICAgICAgICAgICAgaWYgJ2Rv\nYycgbm90IGluIGRvY29wdHM6CiAgICAgICAgICAgICAgICBkb2MgPSBnZXRhdHRyKGZ1bmMsICdf\nX2RvY19fJywgTm9uZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRvYyA9IGRv\nY29wdHMucG9wKCdkb2MnKQogICAgICAgICAgICBpZiBkb2MgaXMgTm9uZToKICAgICAgICAgICAg\nICAgIGRvYyA9ICdVc2FnZTogJXByb2cnCiAgICAgICAgICAgIG5hbWUgPSBmdW5jLl9fbmFtZV9f\nLnJlcGxhY2UoJ18nLCAnLScpCiAgICAgICAgICAgIGRvYyA9IGRvYy5yZXBsYWNlKCclcHJvZycs\nIG5hbWUpLnN0cmlwKCkKICAgICAgICAgICAgZG9jID0gZG9jLnJlcGxhY2UoJ1xuICAgICcsICdc\nbicpCiAgICAgICAgICAgIGltcG9ydCBkb2NvcHQKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShh\ncmd1bWVudHMsIGxpc3QpOgogICAgICAgICAgICAgICAgZG9jb3B0c1snYXJndiddID0gYXJndW1l\nbnRzCiAgICAgICAgICAgICAgICBhcmd1bWVudHMgPSBkb2NvcHQuZG9jb3B0KGRvYywgKipkb2Nv\ncHRzKQogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMoYXJndW1lbnRzKQogICAgICAgICAgICBl\nbHNlOgogICAgICAgICAgICAgICAgYXJndW1lbnRzID0gZG9jb3B0LmRvY29wdChkb2MsICoqZG9j\nb3B0cykKICAgICAgICAgICAgICAgIHN5cy5leGl0KGZ1bmMoYXJndW1lbnRzKSkKICAgICAgICB3\ncmFwcGVyLmNvbnNvbGVfc2NyaXB0ID0gVHJ1ZQogICAgICAgIHJldHVybiB3cmFwcGVyCiAgICBp\nZiBub3QgYXJnczoKICAgICAgICBkZWYgd2FpdGluZ19mb3JfZnVuYyhmdW5jKToKICAgICAgICAg\nICAgcmV0dXJuIF9jb25zb2xlX3NjcmlwdChmdW5jLCAqKmRvY29wdHMpCiAgICAgICAgcmV0dXJu\nIHdhaXRpbmdfZm9yX2Z1bmMKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIF9jb25zb2xlX3Njcmlw\ndChhcmdzWzBdKQoKCmRlZiBnZW5lcmF0ZShmaWxlbmFtZSwgYXJndW1lbnRzPU5vbmUpOgogICAg\nIiIiZ2VuZXJhdGUgYSBzY3JpcHQgZnJvbSBhIEBjb25zb2xlX3NjcmlwdC4gYXJndW1lbnRzIG1h\neSBjb250YWluIHNvbWUKICAgIGRvY29wdHMgbGlrZSBhcmd1bWVudHMiIiIKICAgIGlmIGFyZ3Vt\nZW50cyBpcyBOb25lOgogICAgICAgIGFyZ3VtZW50cyA9IHt9CiAgICBpZiBub3Qgb3MucGF0aC5p\nc2ZpbGUoZmlsZW5hbWUpOgogICAgICAgIG1vZCA9IF9faW1wb3J0X18oZmlsZW5hbWUsIGdsb2Jh\nbHMoKSwgbG9jYWxzKCksIFsnJ10pCiAgICAgICAgZmlsZW5hbWUgPSBtb2QuX19maWxlX18KICAg\nICAgICBuYW1lID0gbW9kLl9fbmFtZV9fCiAgICBlbHNlOgogICAgICAgIGRpcm5hbWUgPSBvcy5w\nYXRoLmRpcm5hbWUoZmlsZW5hbWUpCiAgICAgICAgc3lzLnBhdGguaW5zZXJ0KDAsIGRpcm5hbWUp\nCiAgICAgICAgbmFtZSA9IGluc3BlY3QuZ2V0bW9kdWxlbmFtZShmaWxlbmFtZSkKICAgICAgICBt\nb2QgPSBfX2ltcG9ydF9fKG5hbWUpCgogICAgZmlsZW5hbWVzID0gW10KICAgIGZvciBrLCB2IGlu\nIG1vZC5fX2RpY3RfXy5pdGVtcygpOgogICAgICAgIGlmIGdldGF0dHIodiwgJ2NvbnNvbGVfc2Ny\naXB0JywgRmFsc2UpIGlzIFRydWU6CiAgICAgICAgICAgIGZpbGVuYW1lcy5hcHBlbmQoaykKCiAg\nICBkZXN0ID0gb3MucGF0aC5leHBhbmR1c2VyKGFyZ3VtZW50cy5nZXQoJy0tZGVzdGluYXRpb24n\nLCAnZGlzdC9zY3JpcHRzJykpCiAgICBzaC5ta2RpcignLXAnLCBkZXN0KQoKICAgIGRlZiBlbmNv\nZGVfbW9kdWxlKG1vZCk6CiAgICAgICAgaWYgbm90IGhhc2F0dHIobW9kLCAnX19maWxlX18nKToK\nICAgICAgICAgICAgbW9kID0gX19pbXBvcnRfXyhtb2QpCiAgICAgICAgZGF0YSA9IGluc3BlY3Qu\nZ2V0c291cmNlKG1vZCkKICAgICAgICBkYXRhID0gYmFzZTY0LmVuY29kZXN0cmluZyhzaXguYihk\nYXRhKSkKICAgICAgICByZXR1cm4gJ19jaHV0X21vZHVsZXMuYXBwZW5kKCglciwgJXIpKVxuJyAl\nIChzdHIobW9kLl9fbmFtZV9fKSwgZGF0YSkKCiAgICB0cnk6CiAgICAgICAgIyBjaGVjayBpZiB0\naGUgc2NyaXB0IGlzIGFscmVhZHkgY2h1dGlmaWVkCiAgICAgICAgX2NodXRfbW9kdWxlcyA9IHN5\ncy5tb2R1bGVzWydfX21haW5fXyddLl9jaHV0X21vZHVsZXMKICAgIGV4Y2VwdCBBdHRyaWJ1dGVF\ncnJvcjoKICAgICAgICAjIGdldCBzb3VyY2UgZnJvbSBmaWxlcwogICAgICAgIG1vZHVsZXMgPSBb\nCiAgICAgICAgICAgICdzaXgnLCAnZG9jb3B0JywgJ0NvbmZpZ09iamVjdCcsIHN5cy5tb2R1bGVz\nW19fbmFtZV9fXQogICAgICAgIF0KICAgICAgICBtb2R1bGVzID0gJycuam9pbihbZW5jb2RlX21v\nZHVsZShtKSBmb3IgbSBpbiBtb2R1bGVzXSkKICAgIGVsc2U6CiAgICAgICAgIyBnZXQgc291cmNl\nIGZyb20gX2NodXRfbW9kdWxlcwogICAgICAgIG1vZHVsZXMgPSAnJwogICAgICAgIGZvciBuYW1l\nLCBkYXRhIGluIF9jaHV0X21vZHVsZXM6CiAgICAgICAgICAgIG1vZHVsZXMgKz0gJ19jaHV0X21v\nZHVsZXMuYXBwZW5kKCglciwgJXIpKVxuJyAlIChuYW1lLCBkYXRhKQoKICAgIHNjcmlwdHMgPSBb\nXQogICAgZm9yIG5hbWUgaW4gZmlsZW5hbWVzOgogICAgICAgIHNjcmlwdCA9IG9zLnBhdGguam9p\nbihkZXN0LCBuYW1lLnJlcGxhY2UoJ18nLCAnLScpKQogICAgICAgIHdpdGggb3BlbihzY3JpcHQs\nICd3JykgYXMgZmQ6CiAgICAgICAgICAgIGZkLndyaXRlKFNDUklQVF9IRUFERVIgKyBtb2R1bGVz\nICsgTE9BRF9NT0RVTEVTKQogICAgICAgICAgICBmZC53cml0ZShpbnNwZWN0LmdldHNvdXJjZSht\nb2QpLnJlcGxhY2UoJ19fbWFpbl9fJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICdfX2NodXRpZmllZF9fJykpCiAgICAgICAgICAgIGZkLndyaXRl\nKCJpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOlxuICAgICVzKClcbiIgJSBuYW1lKQogICAgICAg\nIGV4ZWN1dGFibGUgPSBzaC5jaG1vZCgnK3gnLCBzY3JpcHQpCiAgICAgICAgaWYgZXhlY3V0YWJs\nZToKICAgICAgICAgICAgcHJpbnQoZXhlY3V0YWJsZS5jb21tYW5kc19saW5lKQogICAgICAgICAg\nICBzY3JpcHRzLmFwcGVuZChzY3JpcHQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQo\nJ2ZhaWxlZCB0byBnZW5lcmF0ZSAlcycgJSBzY3JpcHQpCiAgICByZXR1cm4gc2NyaXB0cwoKClND\nUklQVF9IRUFERVIgPSAnJycKIyEvdXNyL2Jpbi9lbnYgcHl0aG9uCmltcG9ydCBiYXNlNjQsIGpz\nb24sIHR5cGVzLCBzeXMKUFkzID0gc3lzLnZlcnNpb25faW5mb1swXSA9PSAzCl9jaHV0X21vZHVs\nZXMgPSBbXQonJycubHN0cmlwKCkKCkxPQURfTU9EVUxFUyA9ICcnJwpmb3IgbmFtZSwgY29kZSBp\nbiBfY2h1dF9tb2R1bGVzOgogICAgaWYgUFkzOgogICAgICAgIGlmIGlzaW5zdGFuY2UoY29kZSwg\nc3RyKToKICAgICAgICAgICAgY29kZSA9IGNvZGUuZW5jb2RlKCd1dGYtOCcpCiAgICBlbHNlOgog\nICAgICAgIG5hbWUgPSBieXRlcyhuYW1lKQogICAgY29kZSA9IGJhc2U2NC5kZWNvZGVzdHJpbmco\nY29kZSkKICAgIG1vZCA9IHR5cGVzLk1vZHVsZVR5cGUobmFtZSkKICAgIGdsb2JzID0gZGljdCgp\nCiAgICBpZiBQWTM6CiAgICAgICAgaWYgaXNpbnN0YW5jZShjb2RlLCBieXRlcyk6CiAgICAgICAg\nICAgIGNvZGUgPSBjb2RlLmRlY29kZSgndXRmLTgnKQogICAgICAgIGV4ZWMoY29kZSwgZ2xvYnMp\nCiAgICBlbHNlOgogICAgICAgIGV4ZWMoJ2V4ZWMgY29kZSBpbiBnbG9icycpCiAgICBtb2QuX19k\naWN0X18udXBkYXRlKGdsb2JzKQogICAgaWYgbmFtZSA9PSAnY2h1dCc6CiAgICAgICAgbW9kLndy\nYXBzX21vZHVsZShtb2QpCiAgICBlbHNlOgogICAgICAgIHN5cy5tb2R1bGVzW25hbWVdID0gbW9k\nCgppbXBvcnQgc2l4CicnJy5sc3RyaXAoKQoKaWYgX19uYW1lX18gIT0gJ19fbWFpbl9fJzoKICAg\nIG1vZCA9IHN5cy5tb2R1bGVzW19fbmFtZV9fXQogICAgd3JhcHNfbW9kdWxlKG1vZCkK\n'))
for name, code in _chut_modules:
    if PY3:
        if isinstance(code, str):
            code = code.encode('utf-8')
    else:
        name = bytes(name)
    code = base64.decodestring(code)
    mod = types.ModuleType(name)
    globs = dict()
    if PY3:
        if isinstance(code, bytes):
            code = code.decode('utf-8')
        exec(code, globs)
    else:
        exec('exec code in globs')
    mod.__dict__.update(globs)
    if name == 'chut':
        mod.wraps_module(mod)
    else:
        sys.modules[name] = mod

import six
# -*- coding: utf-8 -*-
from chut import * # noqa
with requires('webob', 'waitress'):
    from waitress import serve
    import webob


def application(environ, start_response):
    req = webob.Request(environ)
    resp = webob.Response()
    resp.text = req.path_info
    return resp(environ, start_response)


@console_script
def webapp(args):
    """
    Usage: %prog [--upgrade-deps]
    """
    serve(application, port=4000)
if __name__ == '__main__':
    webapp()
